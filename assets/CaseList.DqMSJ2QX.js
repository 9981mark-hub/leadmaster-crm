import{c as ye,R as L,r as h,e as dn,j as o,X as ht,g as un,b as pn,h as ut,S as yt,i as Nr,k as Ds,l as wr,m as js,o as ze,L as Ir,q as Ss,t as Cs,v as As,w as Es,x as ks,y as Ps,z as Rs,f as Os,A as Ts,B as Bs}from"./index.BatHzcfy.js";import{B as Dr,M as jr,E as Sr,L as Ms}from"./Skeleton.CGpYNKMr.js";import{R as Ls,r as gn}from"./index.TKEK1CsW.js";import{i as _s,c as mn,b as Cr,P as Gs,a as $s,d as Fs,e as Ws}from"./tiny-invariant.XUtC9gpy.js";import{m as bt,C as zs}from"./proxy.CljdZosF.js";import{P as Ye}from"./phone.5E8NwPBk.js";import{C as Qe}from"./check.CTJA00gN.js";import{u as pt,w as Hs,r as Vs}from"./xlsx.BBWTpfDg.js";import{d as Ar,f as Us,G as qs,b as Er,s as Pe,p as Ys,e as He}from"./utils.CZR10HRf.js";import{U as vt}from"./upload.D2_PfJ6s.js";import{F as Js,S as Ks}from"./search.BlnVp4di.js";import{D as Xs}from"./download.C9qktaRu.js";import{P as Qs,T as Je}from"./trash-2.jFNcK706.js";import{B as Zs}from"./building.DXYB7-VP.js";import{F as eo}from"./funnel.CO7Q6EKO.js";import{C as fn}from"./chevron-left.tNmezBI8.js";import{A as kr}from"./index.zrIWJNGr.js";import{M as Pr}from"./message-square.DWN93aWP.js";import{C as to}from"./chevron-right.sxwTB4X9.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ro=[["path",{d:"m21 16-4 4-4-4",key:"f6ql7i"}],["path",{d:"M17 20V4",key:"1ejh1v"}],["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}]],bn=ye("arrow-up-down",ro);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],xn=ye("chevron-down",no);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const so=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],oo=ye("eye-off",so);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ao=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],Rr=ye("image",ao);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const io=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"14",y:"3",rx:"1",key:"6d4xhi"}],["rect",{width:"7",height:"7",x:"14",y:"14",rx:"1",key:"nxv5o0"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}]],lo=ye("layout-grid",io);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const co=[["rect",{width:"7",height:"7",x:"3",y:"3",rx:"1",key:"1g98yp"}],["rect",{width:"7",height:"7",x:"3",y:"14",rx:"1",key:"1bb6yr"}],["path",{d:"M14 4h7",key:"3xa0d5"}],["path",{d:"M14 9h7",key:"1icrd9"}],["path",{d:"M14 15h7",key:"1mj8o2"}],["path",{d:"M14 20h7",key:"11slyb"}]],uo=ye("layout-list",co);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const po=[["path",{d:"M3 5h.01",key:"18ugdj"}],["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 19h.01",key:"noohij"}],["path",{d:"M8 5h13",key:"1pao27"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 19h13",key:"m83p4d"}]],go=ye("list",po);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mo=[["path",{d:"m16 2 6 6",key:"1gw87d"}],["path",{d:"m22 2-6 6",key:"6f0sa0"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Or=ye("phone-missed",mo);var ce=function(t){var r=t.top,n=t.right,s=t.bottom,a=t.left,i=n-a,l=s-r,c={top:r,right:n,bottom:s,left:a,width:i,height:l,x:a,y:r,center:{x:(n+a)/2,y:(s+r)/2}};return c},er=function(t,r){return{top:t.top-r.top,left:t.left-r.left,bottom:t.bottom+r.bottom,right:t.right+r.right}},Tr=function(t,r){return{top:t.top+r.top,left:t.left+r.left,bottom:t.bottom-r.bottom,right:t.right-r.right}},fo=function(t,r){return{top:t.top+r.y,left:t.left+r.x,bottom:t.bottom+r.y,right:t.right+r.x}},Gt={top:0,right:0,bottom:0,left:0},tr=function(t){var r=t.borderBox,n=t.margin,s=n===void 0?Gt:n,a=t.border,i=a===void 0?Gt:a,l=t.padding,c=l===void 0?Gt:l,p=ce(er(r,s)),m=ce(Tr(r,i)),d=ce(Tr(m,c));return{marginBox:p,borderBox:ce(r),paddingBox:m,contentBox:d,margin:s,border:i,padding:c}},ne=function(t){var r=t.slice(0,-2),n=t.slice(-2);if(n!=="px")return 0;var s=Number(r);return isNaN(s)&&_s(),s},bo=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Nt=function(t,r){var n=t.borderBox,s=t.border,a=t.margin,i=t.padding,l=fo(n,r);return tr({borderBox:l,border:s,margin:a,padding:i})},wt=function(t,r){return r===void 0&&(r=bo()),Nt(t,r)},hn=function(t,r){var n={top:ne(r.marginTop),right:ne(r.marginRight),bottom:ne(r.marginBottom),left:ne(r.marginLeft)},s={top:ne(r.paddingTop),right:ne(r.paddingRight),bottom:ne(r.paddingBottom),left:ne(r.paddingLeft)},a={top:ne(r.borderTopWidth),right:ne(r.borderRightWidth),bottom:ne(r.borderBottomWidth),left:ne(r.borderLeftWidth)};return tr({borderBox:t,margin:n,padding:s,border:a})},yn=function(t){var r=t.getBoundingClientRect(),n=window.getComputedStyle(t);return hn(r,n)},Ze=function(t){var r=[],n=null,s=function(){for(var i=arguments.length,l=new Array(i),c=0;c<i;c++)l[c]=arguments[c];r=l,!n&&(n=requestAnimationFrame(function(){n=null,t.apply(void 0,r)}))};return s.cancel=function(){n&&(cancelAnimationFrame(n),n=null)},s};function It(){return It=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)({}).hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},It.apply(null,arguments)}function vn(e,t){}vn.bind(null,"warn");vn.bind(null,"error");function be(){}function xo(e,t){return{...e,...t}}function se(e,t,r){const n=t.map(s=>{const a=xo(r,s.options);return e.addEventListener(s.eventName,s.fn,a),function(){e.removeEventListener(s.eventName,s.fn,a)}});return function(){n.forEach(a=>{a()})}}const ho="Invariant failed";class Dt extends Error{}Dt.prototype.toString=function(){return this.message};function y(e,t){throw new Dt(ho)}class yo extends L.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=be,this.onWindowError=r=>{const n=this.getCallbacks();n.isDragging()&&n.tryAbort(),r.error instanceof Dt&&r.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=r=>{this.callbacks=r}}componentDidMount(){this.unbind=se(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Dt){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const vo=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,jt=e=>e+1,No=e=>`
  You have lifted an item in position ${jt(e.source.index)}
`,Nn=(e,t)=>{const r=e.droppableId===t.droppableId,n=jt(e.index),s=jt(t.index);return r?`
      You have moved the item from position ${n}
      to position ${s}
    `:`
    You have moved the item from position ${n}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${s}
  `},wn=(e,t,r)=>t.droppableId===r.droppableId?`
      The item ${e}
      has been combined with ${r.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${r.draggableId}
      in list ${r.droppableId}
    `,wo=e=>{const t=e.destination;if(t)return Nn(e.source,t);const r=e.combine;return r?wn(e.draggableId,e.source,r):"You are over an area that cannot be dropped on"},Br=e=>`
  The item has returned to its starting position
  of ${jt(e.index)}
`,Io=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${Br(e.source)}
    `;const t=e.destination,r=e.combine;return t?`
      You have dropped the item.
      ${Nn(e.source,t)}
    `:r?`
      You have dropped the item.
      ${wn(e.draggableId,e.source,r)}
    `:`
    The item has been dropped while not over a drop area.
    ${Br(e.source)}
  `},xt={dragHandleUsageInstructions:vo,onDragStart:No,onDragUpdate:wo,onDragEnd:Io};function Do(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function In(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(!Do(e[r],t[r]))return!1;return!0}function R(e,t){const r=h.useState(()=>({inputs:t,result:e()}))[0],n=h.useRef(!0),s=h.useRef(r),i=n.current||!!(t&&s.current.inputs&&In(t,s.current.inputs))?s.current:{inputs:t,result:e()};return h.useEffect(()=>{n.current=!1,s.current=i},[i]),i.result}function j(e,t){return R(()=>e,t)}const W={x:0,y:0},z=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),X=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),xe=(e,t)=>e.x===t.x&&e.y===t.y,Me=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),Se=(e,t,r=0)=>e==="x"?{x:t,y:r}:{x:r,y:t},et=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),Mr=(e,t)=>Math.min(...t.map(r=>et(e,r))),Dn=e=>t=>({x:e(t.x),y:e(t.y)});var jo=(e,t)=>{const r=ce({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return r.width<=0||r.height<=0?null:r};const at=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),Lr=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],So={top:0,right:0,bottom:0,left:0},Co=(e,t)=>t?at(e,t.scroll.diff.displacement):e,Ao=(e,t,r)=>r&&r.increasedBy?{...e,[t.end]:e[t.end]+r.increasedBy[t.line]}:e,Eo=(e,t)=>t&&t.shouldClipSubject?jo(t.pageMarginBox,e):ce(e);var Oe=({page:e,withPlaceholder:t,axis:r,frame:n})=>{const s=Co(e.marginBox,n),a=Ao(s,r,t),i=Eo(a,n);return{page:e,withPlaceholder:t,active:i}},rr=(e,t)=>{e.frame||y();const r=e.frame,n=X(t,r.scroll.initial),s=Me(n),a={...r,scroll:{initial:r.scroll.initial,current:t,diff:{value:n,displacement:s},max:r.scroll.max}},i=Oe({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:a});return{...e,frame:a,subject:i}};function F(e,t=In){let r=null;function n(...s){if(r&&r.lastThis===this&&t(s,r.lastArgs))return r.lastResult;const a=e.apply(this,s);return r={lastResult:a,lastArgs:s,lastThis:this},a}return n.clear=function(){r=null},n}const jn=F(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Sn=F(e=>e.reduce((t,r)=>(t[r.descriptor.id]=r,t),{})),Et=F(e=>Object.values(e)),ko=F(e=>Object.values(e));var Le=F((e,t)=>ko(t).filter(n=>e===n.descriptor.droppableId).sort((n,s)=>n.descriptor.index-s.descriptor.index));function nr(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function kt(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var Pt=F((e,t)=>t.filter(r=>r.descriptor.id!==e.descriptor.id)),Po=({isMovingForward:e,draggable:t,destination:r,insideDestination:n,previousImpact:s})=>{if(!r.isCombineEnabled||!nr(s))return null;function i(u){const b={type:"COMBINE",combine:{draggableId:u,droppableId:r.descriptor.id}};return{...s,at:b}}const l=s.displaced.all,c=l.length?l[0]:null;if(e)return c?i(c):null;const p=Pt(t,n);if(!c){if(!p.length)return null;const u=p[p.length-1];return i(u.descriptor.id)}const m=p.findIndex(u=>u.descriptor.id===c);m===-1&&y();const d=m-1;if(d<0)return null;const g=p[d];return i(g.descriptor.id)},_e=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const Cn={point:W,value:0},tt={invisible:{},visible:{},all:[]},Ro={displaced:tt,displacedBy:Cn,at:null};var oe=(e,t)=>r=>e<=r&&r<=t,An=e=>{const t=oe(e.top,e.bottom),r=oe(e.left,e.right);return n=>{if(t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right))return!0;const a=t(n.top)||t(n.bottom),i=r(n.left)||r(n.right);if(a&&i)return!0;const c=n.top<e.top&&n.bottom>e.bottom,p=n.left<e.left&&n.right>e.right;return c&&p?!0:c&&i||p&&a}},Oo=e=>{const t=oe(e.top,e.bottom),r=oe(e.left,e.right);return n=>t(n.top)&&t(n.bottom)&&r(n.left)&&r(n.right)};const sr={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},En={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var To=e=>t=>{const r=oe(t.top,t.bottom),n=oe(t.left,t.right);return s=>e===sr?r(s.top)&&r(s.bottom):n(s.left)&&n(s.right)};const Bo=(e,t)=>{const r=t.frame?t.frame.scroll.diff.displacement:W;return at(e,r)},Mo=(e,t,r)=>t.subject.active?r(t.subject.active)(e):!1,Lo=(e,t,r)=>r(t)(e),or=({target:e,destination:t,viewport:r,withDroppableDisplacement:n,isVisibleThroughFrameFn:s})=>{const a=n?Bo(e,t):e;return Mo(a,t,s)&&Lo(a,r,s)},_o=e=>or({...e,isVisibleThroughFrameFn:An}),kn=e=>or({...e,isVisibleThroughFrameFn:Oo}),Go=e=>or({...e,isVisibleThroughFrameFn:To(e.destination.axis)}),$o=(e,t,r)=>{if(typeof r=="boolean")return r;if(!t)return!0;const{invisible:n,visible:s}=t;if(n[e])return!1;const a=s[e];return a?a.shouldAnimate:!0};function Fo(e,t){const r=e.page.marginBox,n={top:t.point.y,right:0,bottom:0,left:t.point.x};return ce(er(r,n))}function rt({afterDragging:e,destination:t,displacedBy:r,viewport:n,forceShouldAnimate:s,last:a}){return e.reduce(function(l,c){const p=Fo(c,r),m=c.descriptor.id;if(l.all.push(m),!_o({target:p,destination:t,viewport:n,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const g=$o(m,a,s),u={draggableId:m,shouldAnimate:g};return l.visible[m]=u,l},{all:[],visible:{},invisible:{}})}function Wo(e,t){if(!e.length)return 0;const r=e[e.length-1].descriptor.index;return t.inHomeList?r:r+1}function _r({insideDestination:e,inHomeList:t,displacedBy:r,destination:n}){const s=Wo(e,{inHomeList:t});return{displaced:tt,displacedBy:r,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:s}}}}function St({draggable:e,insideDestination:t,destination:r,viewport:n,displacedBy:s,last:a,index:i,forceShouldAnimate:l}){const c=_e(e,r);if(i==null)return _r({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const p=t.find(b=>b.descriptor.index===i);if(!p)return _r({insideDestination:t,inHomeList:c,displacedBy:s,destination:r});const m=Pt(e,t),d=t.indexOf(p),g=m.slice(d);return{displaced:rt({afterDragging:g,destination:r,displacedBy:s,last:a,viewport:n.frame,forceShouldAnimate:l}),displacedBy:s,at:{type:"REORDER",destination:{droppableId:r.descriptor.id,index:i}}}}function he(e,t){return!!t.effected[e]}var zo=({isMovingForward:e,destination:t,draggables:r,combine:n,afterCritical:s})=>{if(!t.isCombineEnabled)return null;const a=n.draggableId,l=r[a].descriptor.index;return he(a,s)?e?l:l-1:e?l+1:l},Ho=({isMovingForward:e,isInHomeList:t,insideDestination:r,location:n})=>{if(!r.length)return null;const s=n.index,a=e?s+1:s-1,i=r[0].descriptor.index,l=r[r.length-1].descriptor.index,c=t?l:l+1;return a<i||a>c?null:a},Vo=({isMovingForward:e,isInHomeList:t,draggable:r,draggables:n,destination:s,insideDestination:a,previousImpact:i,viewport:l,afterCritical:c})=>{const p=i.at;if(p||y(),p.type==="REORDER"){const d=Ho({isMovingForward:e,isInHomeList:t,location:p.destination,insideDestination:a});return d==null?null:St({draggable:r,insideDestination:a,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:d})}const m=zo({isMovingForward:e,destination:s,displaced:i.displaced,draggables:n,combine:p.combine,afterCritical:c});return m==null?null:St({draggable:r,insideDestination:a,destination:s,viewport:l,last:i.displaced,displacedBy:i.displacedBy,index:m})},Uo=({displaced:e,afterCritical:t,combineWith:r,displacedBy:n})=>{const s=!!(e.visible[r]||e.invisible[r]);return he(r,t)?s?W:Me(n.point):s?n.point:W},qo=({afterCritical:e,impact:t,draggables:r})=>{const n=kt(t);n||y();const s=n.draggableId,a=r[s].page.borderBox.center,i=Uo({displaced:t.displaced,afterCritical:e,combineWith:s,displacedBy:t.displacedBy});return z(a,i)};const Pn=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Yo=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,ar=(e,t,r)=>t[e.crossAxisStart]+r.margin[e.crossAxisStart]+r.borderBox[e.crossAxisSize]/2,Gr=({axis:e,moveRelativeTo:t,isMoving:r})=>Se(e.line,t.marginBox[e.end]+Pn(e,r),ar(e,t.marginBox,r)),$r=({axis:e,moveRelativeTo:t,isMoving:r})=>Se(e.line,t.marginBox[e.start]-Yo(e,r),ar(e,t.marginBox,r)),Jo=({axis:e,moveInto:t,isMoving:r})=>Se(e.line,t.contentBox[e.start]+Pn(e,r),ar(e,t.contentBox,r));var Ko=({impact:e,draggable:t,draggables:r,droppable:n,afterCritical:s})=>{const a=Le(n.descriptor.id,r),i=t.page,l=n.axis;if(!a.length)return Jo({axis:l,moveInto:n.page,isMoving:i});const{displaced:c,displacedBy:p}=e,m=c.all[0];if(m){const g=r[m];if(he(m,s))return $r({axis:l,moveRelativeTo:g.page,isMoving:i});const u=Nt(g.page,p.point);return $r({axis:l,moveRelativeTo:u,isMoving:i})}const d=a[a.length-1];if(d.descriptor.id===t.descriptor.id)return i.borderBox.center;if(he(d.descriptor.id,s)){const g=Nt(d.page,Me(s.displacedBy.point));return Gr({axis:l,moveRelativeTo:g,isMoving:i})}return Gr({axis:l,moveRelativeTo:d.page,isMoving:i})},Yt=(e,t)=>{const r=e.frame;return r?z(t,r.scroll.diff.displacement):t};const Xo=({impact:e,draggable:t,droppable:r,draggables:n,afterCritical:s})=>{const a=t.page.borderBox.center,i=e.at;return!r||!i?a:i.type==="REORDER"?Ko({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:s}):qo({impact:e,draggables:n,afterCritical:s})};var Rt=e=>{const t=Xo(e),r=e.droppable;return r?Yt(r,t):t},Rn=(e,t)=>{const r=X(t,e.scroll.initial),n=Me(r);return{frame:ce({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:r,displacement:n}}}};function Fr(e,t){return e.map(r=>t[r])}function Qo(e,t){for(let r=0;r<t.length;r++){const n=t[r].visible[e];if(n)return n}return null}var Zo=({impact:e,viewport:t,destination:r,draggables:n,maxScrollChange:s})=>{const a=Rn(t,z(t.scroll.current,s)),i=r.frame?rr(r,z(r.frame.scroll.current,s)):r,l=e.displaced,c=rt({afterDragging:Fr(l.all,n),destination:r,displacedBy:e.displacedBy,viewport:a.frame,last:l,forceShouldAnimate:!1}),p=rt({afterDragging:Fr(l.all,n),destination:i,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),m={},d={},g=[l,c,p];return l.all.forEach(b=>{const x=Qo(b,g);if(x){d[b]=x;return}m[b]=!0}),{...e,displaced:{all:l.all,invisible:m,visible:d}}},ea=(e,t)=>z(e.scroll.diff.displacement,t),ir=({pageBorderBoxCenter:e,draggable:t,viewport:r})=>{const n=ea(r,e),s=X(n,t.page.borderBox.center);return z(t.client.borderBox.center,s)},On=({draggable:e,destination:t,newPageBorderBoxCenter:r,viewport:n,withDroppableDisplacement:s,onlyOnMainAxis:a=!1})=>{const i=X(r,e.page.borderBox.center),c={target:at(e.page.borderBox,i),destination:t,withDroppableDisplacement:s,viewport:n};return a?Go(c):kn(c)},ta=({isMovingForward:e,draggable:t,destination:r,draggables:n,previousImpact:s,viewport:a,previousPageBorderBoxCenter:i,previousClientSelection:l,afterCritical:c})=>{if(!r.isEnabled)return null;const p=Le(r.descriptor.id,n),m=_e(t,r),d=Po({isMovingForward:e,draggable:t,destination:r,insideDestination:p,previousImpact:s})||Vo({isMovingForward:e,isInHomeList:m,draggable:t,draggables:n,destination:r,insideDestination:p,previousImpact:s,viewport:a,afterCritical:c});if(!d)return null;const g=Rt({impact:d,draggable:t,droppable:r,draggables:n,afterCritical:c});if(On({draggable:t,destination:r,newPageBorderBoxCenter:g,viewport:a.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:ir({pageBorderBoxCenter:g,draggable:t,viewport:a}),impact:d,scrollJumpRequest:null};const b=X(g,i),x=Zo({impact:d,viewport:a,destination:r,draggables:n,maxScrollChange:b});return{clientSelection:l,impact:x,scrollJumpRequest:b}};const q=e=>{const t=e.subject.active;return t||y(),t};var ra=({isMovingForward:e,pageBorderBoxCenter:t,source:r,droppables:n,viewport:s})=>{const a=r.subject.active;if(!a)return null;const i=r.axis,l=oe(a[i.start],a[i.end]),c=Et(n).filter(m=>m!==r).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>An(s.frame)(q(m))).filter(m=>{const d=q(m);return e?a[i.crossAxisEnd]<d[i.crossAxisEnd]:d[i.crossAxisStart]<a[i.crossAxisStart]}).filter(m=>{const d=q(m),g=oe(d[i.start],d[i.end]);return l(d[i.start])||l(d[i.end])||g(a[i.start])||g(a[i.end])}).sort((m,d)=>{const g=q(m)[i.crossAxisStart],u=q(d)[i.crossAxisStart];return e?g-u:u-g}).filter((m,d,g)=>q(m)[i.crossAxisStart]===q(g[0])[i.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const p=c.filter(m=>oe(q(m)[i.start],q(m)[i.end])(t[i.line]));return p.length===1?p[0]:p.length>1?p.sort((m,d)=>q(m)[i.start]-q(d)[i.start])[0]:c.sort((m,d)=>{const g=Mr(t,Lr(q(m))),u=Mr(t,Lr(q(d)));return g!==u?g-u:q(m)[i.start]-q(d)[i.start]})[0]};const Wr=(e,t)=>{const r=e.page.borderBox.center;return he(e.descriptor.id,t)?X(r,t.displacedBy.point):r},na=(e,t)=>{const r=e.page.borderBox;return he(e.descriptor.id,t)?at(r,Me(t.displacedBy.point)):r};var sa=({pageBorderBoxCenter:e,viewport:t,destination:r,insideDestination:n,afterCritical:s})=>n.filter(i=>kn({target:na(i,s),destination:r,viewport:t.frame,withDroppableDisplacement:!0})).sort((i,l)=>{const c=et(e,Yt(r,Wr(i,s))),p=et(e,Yt(r,Wr(l,s)));return c<p?-1:p<c?1:i.descriptor.index-l.descriptor.index})[0]||null,it=F(function(t,r){const n=r[t.line];return{value:n,point:Se(t.line,n)}});const oa=(e,t,r)=>{const n=e.axis;if(e.descriptor.mode==="virtual")return Se(n.line,t[n.line]);const s=e.subject.page.contentBox[n.size],c=Le(e.descriptor.id,r).reduce((p,m)=>p+m.client.marginBox[n.size],0)+t[n.line]-s;return c<=0?null:Se(n.line,c)},Tn=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),Bn=(e,t,r)=>{const n=e.frame;_e(t,e)&&y(),e.subject.withPlaceholder&&y();const s=it(e.axis,t.displaceBy).point,a=oa(e,s,r),i={placeholderSize:s,increasedBy:a,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!n){const m=Oe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:e.frame});return{...e,subject:m}}const l=a?z(n.scroll.max,a):n.scroll.max,c=Tn(n,l),p=Oe({page:e.subject.page,withPlaceholder:i,axis:e.axis,frame:c});return{...e,subject:p,frame:c}},aa=e=>{const t=e.subject.withPlaceholder;t||y();const r=e.frame;if(!r){const i=Oe({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:i}}const n=t.oldFrameMaxScroll;n||y();const s=Tn(r,n),a=Oe({page:e.subject.page,axis:e.axis,frame:s,withPlaceholder:null});return{...e,subject:a,frame:s}};var ia=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:r,draggable:n,draggables:s,destination:a,viewport:i,afterCritical:l})=>{if(!t){if(r.length)return null;const d={displaced:tt,displacedBy:Cn,at:{type:"REORDER",destination:{droppableId:a.descriptor.id,index:0}}},g=Rt({impact:d,draggable:n,droppable:a,draggables:s,afterCritical:l}),u=_e(n,a)?a:Bn(a,n,s);return On({draggable:n,destination:u,newPageBorderBoxCenter:g,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?d:null}const c=e[a.axis.line]<=t.page.borderBox.center[a.axis.line],p=(()=>{const d=t.descriptor.index;return t.descriptor.id===n.descriptor.id||c?d:d+1})(),m=it(a.axis,n.displaceBy);return St({draggable:n,insideDestination:r,destination:a,viewport:i,displacedBy:m,last:tt,index:p})},la=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:r,isOver:n,draggables:s,droppables:a,viewport:i,afterCritical:l})=>{const c=ra({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:a,viewport:i});if(!c)return null;const p=Le(c.descriptor.id,s),m=sa({pageBorderBoxCenter:t,viewport:i,destination:c,insideDestination:p,afterCritical:l}),d=ia({previousPageBorderBoxCenter:t,destination:c,draggable:r,draggables:s,moveRelativeTo:m,insideDestination:p,viewport:i,afterCritical:l});if(!d)return null;const g=Rt({impact:d,draggable:r,droppable:c,draggables:s,afterCritical:l});return{clientSelection:ir({pageBorderBoxCenter:g,draggable:r,viewport:i}),impact:d,scrollJumpRequest:null}},Q=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const ca=(e,t)=>{const r=Q(e);return r?t[r]:null};var da=({state:e,type:t})=>{const r=ca(e.impact,e.dimensions.droppables),n=!!r,s=e.dimensions.droppables[e.critical.droppable.id],a=r||s,i=a.axis.direction,l=i==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||i==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!n)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",p=e.dimensions.draggables[e.critical.draggable.id],m=e.current.page.borderBoxCenter,{draggables:d,droppables:g}=e.dimensions;return l?ta({isMovingForward:c,previousPageBorderBoxCenter:m,draggable:p,destination:a,draggables:d,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):la({isMovingForward:c,previousPageBorderBoxCenter:m,draggable:p,isOver:a,draggables:d,droppables:g,viewport:e.viewport,afterCritical:e.afterCritical})};function je(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function Mn(e){const t=oe(e.top,e.bottom),r=oe(e.left,e.right);return function(s){return t(s.y)&&r(s.x)}}function ua(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function pa({pageBorderBox:e,draggable:t,candidates:r}){const n=t.page.borderBox.center,s=r.map(a=>{const i=a.axis,l=Se(a.axis.line,e.center[i.line],a.page.borderBox.center[i.crossAxisLine]);return{id:a.descriptor.id,distance:et(n,l)}}).sort((a,i)=>i.distance-a.distance);return s[0]?s[0].id:null}function ga({pageBorderBox:e,draggable:t,droppables:r}){const n=Et(r).filter(s=>{if(!s.isEnabled)return!1;const a=s.subject.active;if(!a||!ua(e,a))return!1;if(Mn(a)(e.center))return!0;const i=s.axis,l=a.center[i.crossAxisLine],c=e[i.crossAxisStart],p=e[i.crossAxisEnd],m=oe(a[i.crossAxisStart],a[i.crossAxisEnd]),d=m(c),g=m(p);return!d&&!g?!0:d?c<l:p>l});return n.length?n.length===1?n[0].descriptor.id:pa({pageBorderBox:e,draggable:t,candidates:n}):null}const Ln=(e,t)=>ce(at(e,t));var ma=(e,t)=>{const r=e.frame;return r?Ln(t,r.scroll.diff.value):t};function _n({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function fa({draggable:e,closest:t,inHomeList:r}){return t?r&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var ba=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:r,insideDestination:n,last:s,viewport:a,afterCritical:i})=>{const l=r.axis,c=it(r.axis,t.displaceBy),p=c.value,m=e[l.start],d=e[l.end],u=Pt(t,n).find(x=>{const f=x.descriptor.id,v=x.page.borderBox.center[l.line],S=he(f,i),k=_n({displaced:s,id:f});return S?k?d<=v:m<v-p:k?d<=v+p:m<v})||null,b=fa({draggable:t,closest:u,inHomeList:_e(t,r)});return St({draggable:t,insideDestination:n,destination:r,viewport:a,last:s,displacedBy:c,index:b})};const xa=4;var ha=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:r,destination:n,insideDestination:s,afterCritical:a})=>{if(!n.isCombineEnabled)return null;const i=n.axis,l=it(n.axis,e.displaceBy),c=l.value,p=t[i.start],m=t[i.end],g=Pt(e,s).find(b=>{const x=b.descriptor.id,f=b.page.borderBox,S=f[i.size]/xa,k=he(x,a),w=_n({displaced:r.displaced,id:x});return k?w?m>f[i.start]+S&&m<f[i.end]-S:p>f[i.start]-c+S&&p<f[i.end]-c-S:w?m>f[i.start]+c+S&&m<f[i.end]+c-S:p>f[i.start]+S&&p<f[i.end]-S});return g?{displacedBy:l,displaced:r.displaced,at:{type:"COMBINE",combine:{draggableId:g.descriptor.id,droppableId:n.descriptor.id}}}:null},Gn=({pageOffset:e,draggable:t,draggables:r,droppables:n,previousImpact:s,viewport:a,afterCritical:i})=>{const l=Ln(t.page.borderBox,e),c=ga({pageBorderBox:l,draggable:t,droppables:n});if(!c)return Ro;const p=n[c],m=Le(p.descriptor.id,r),d=ma(p,l);return ha({pageBorderBoxWithDroppableScroll:d,draggable:t,previousImpact:s,destination:p,insideDestination:m,afterCritical:i})||ba({pageBorderBoxWithDroppableScroll:d,draggable:t,destination:p,insideDestination:m,last:s.displaced,viewport:a,afterCritical:i})},lr=(e,t)=>({...e,[t.descriptor.id]:t});const ya=({previousImpact:e,impact:t,droppables:r})=>{const n=Q(e),s=Q(t);if(!n||n===s)return r;const a=r[n];if(!a.subject.withPlaceholder)return r;const i=aa(a);return lr(r,i)};var va=({draggable:e,draggables:t,droppables:r,previousImpact:n,impact:s})=>{const a=ya({previousImpact:n,impact:s,droppables:r}),i=Q(s);if(!i)return a;const l=r[i];if(_e(e,l)||l.subject.withPlaceholder)return a;const c=Bn(l,e,t);return lr(a,c)},Ke=({state:e,clientSelection:t,dimensions:r,viewport:n,impact:s,scrollJumpRequest:a})=>{const i=n||e.viewport,l=r||e.dimensions,c=t||e.current.client.selection,p=X(c,e.initial.client.selection),m={offset:p,selection:c,borderBoxCenter:z(e.initial.client.borderBoxCenter,p)},d={selection:z(m.selection,i.scroll.current),borderBoxCenter:z(m.borderBoxCenter,i.scroll.current),offset:z(m.offset,i.scroll.diff.value)},g={client:m,page:d};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:i,current:g};const u=l.draggables[e.critical.draggable.id],b=s||Gn({pageOffset:d.offset,draggable:u,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:i,afterCritical:e.afterCritical}),x=va({draggable:u,impact:b,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:g,dimensions:{draggables:l.draggables,droppables:x},impact:b,viewport:i,scrollJumpRequest:a||null,forceShouldAnimate:a?!1:null}};function Na(e,t){return e.map(r=>t[r])}var $n=({impact:e,viewport:t,draggables:r,destination:n,forceShouldAnimate:s})=>{const a=e.displaced,i=Na(a.all,r),l=rt({afterDragging:i,destination:n,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:s,last:a});return{...e,displaced:l}},Fn=({impact:e,draggable:t,droppable:r,draggables:n,viewport:s,afterCritical:a})=>{const i=Rt({impact:e,draggable:t,draggables:n,droppable:r,afterCritical:a});return ir({pageBorderBoxCenter:i,draggable:t,viewport:s})},Wn=({state:e,dimensions:t,viewport:r})=>{e.movementMode!=="SNAP"&&y();const n=e.impact,s=r||e.viewport,a=t||e.dimensions,{draggables:i,droppables:l}=a,c=i[e.critical.draggable.id],p=Q(n);p||y();const m=l[p],d=$n({impact:n,viewport:s,destination:m,draggables:i}),g=Fn({impact:d,draggable:c,droppable:m,draggables:i,viewport:s,afterCritical:e.afterCritical});return Ke({impact:d,clientSelection:g,state:e,dimensions:a,viewport:s})},wa=e=>({index:e.index,droppableId:e.droppableId}),zn=({draggable:e,home:t,draggables:r,viewport:n})=>{const s=it(t.axis,e.displaceBy),a=Le(t.descriptor.id,r),i=a.indexOf(e);i===-1&&y();const l=a.slice(i+1),c=l.reduce((g,u)=>(g[u.descriptor.id]=!0,g),{}),p={inVirtualList:t.descriptor.mode==="virtual",displacedBy:s,effected:c};return{impact:{displaced:rt({afterDragging:l,destination:t,displacedBy:s,last:null,viewport:n.frame,forceShouldAnimate:!1}),displacedBy:s,at:{type:"REORDER",destination:wa(e.descriptor)}},afterCritical:p}},Ia=(e,t)=>({draggables:e.draggables,droppables:lr(e.droppables,t)}),Da=({draggable:e,offset:t,initialWindowScroll:r})=>{const n=Nt(e.client,t),s=wt(n,r);return{...e,placeholder:{...e.placeholder,client:n},client:n,page:s}},ja=e=>{const t=e.frame;return t||y(),t},Sa=({additions:e,updatedDroppables:t,viewport:r})=>{const n=r.scroll.diff.value;return e.map(s=>{const a=s.descriptor.droppableId,i=t[a],c=ja(i).scroll.diff.value,p=z(n,c);return Da({draggable:s,offset:p,initialWindowScroll:r.scroll.initial})})},Ca=({state:e,published:t})=>{const r=t.modified.map(v=>{const S=e.dimensions.droppables[v.droppableId];return rr(S,v.scroll)}),n={...e.dimensions.droppables,...jn(r)},s=Sn(Sa({additions:t.additions,updatedDroppables:n,viewport:e.viewport})),a={...e.dimensions.draggables,...s};t.removals.forEach(v=>{delete a[v]});const i={droppables:n,draggables:a},l=Q(e.impact),c=l?i.droppables[l]:null,p=i.draggables[e.critical.draggable.id],m=i.droppables[e.critical.droppable.id],{impact:d,afterCritical:g}=zn({draggable:p,home:m,draggables:a,viewport:e.viewport}),u=c&&c.isCombineEnabled?e.impact:d,b=Gn({pageOffset:e.current.page.offset,draggable:i.draggables[e.critical.draggable.id],draggables:i.draggables,droppables:i.droppables,previousImpact:u,viewport:e.viewport,afterCritical:g}),x={...e,phase:"DRAGGING",impact:b,onLiftImpact:d,dimensions:i,afterCritical:g,forceShouldAnimate:!1};return e.phase==="COLLECTING"?x:{...x,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const Jt=e=>e.movementMode==="SNAP",$t=(e,t,r)=>{const n=Ia(e.dimensions,t);return!Jt(e)||r?Ke({state:e,dimensions:n}):Wn({state:e,dimensions:n})};function Ft(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const zr={phase:"IDLE",completed:null,shouldFlush:!1};var Aa=(e=zr,t)=>{if(t.type==="FLUSH")return{...zr,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&y();const{critical:r,clientSelection:n,viewport:s,dimensions:a,movementMode:i}=t.payload,l=a.draggables[r.draggable.id],c=a.droppables[r.droppable.id],p={selection:n,borderBoxCenter:l.client.borderBox.center,offset:W},m={client:p,page:{selection:z(p.selection,s.scroll.initial),borderBoxCenter:z(p.selection,s.scroll.initial),offset:z(p.selection,s.scroll.diff.value)}},d=Et(a.droppables).every(x=>!x.isFixedOnPage),{impact:g,afterCritical:u}=zn({draggable:l,home:c,draggables:a.draggables,viewport:s});return{phase:"DRAGGING",isDragging:!0,critical:r,movementMode:i,dimensions:a,initial:m,current:m,isWindowScrollAllowed:d,impact:g,afterCritical:u,onLiftImpact:g,viewport:s,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&y(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||y(),Ca({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;je(e)||y();const{client:r}=t.payload;return xe(r,e.current.client.selection)?e:Ke({state:e,clientSelection:r,impact:Jt(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return Ft(e);je(e)||y();const{id:r,newScroll:n}=t.payload,s=e.dimensions.droppables[r];if(!s)return e;const a=rr(s,n);return $t(e,a,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;je(e)||y();const{id:r,isEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||y(),s.isEnabled===n&&y();const a={...s,isEnabled:n};return $t(e,a,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;je(e)||y();const{id:r,isCombineEnabled:n}=t.payload,s=e.dimensions.droppables[r];s||y(),s.isCombineEnabled===n&&y();const a={...s,isCombineEnabled:n};return $t(e,a,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;je(e)||y(),e.isWindowScrollAllowed||y();const r=t.payload.newScroll;if(xe(e.viewport.scroll.current,r))return Ft(e);const n=Rn(e.viewport,r);return Jt(e)?Wn({state:e,viewport:n}):Ke({state:e,viewport:n})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!je(e))return e;const r=t.payload.maxScroll;if(xe(r,e.viewport.scroll.max))return e;const n={...e.viewport,scroll:{...e.viewport.scroll,max:r}};return{...e,viewport:n}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&y();const r=da({state:e,type:t.type});return r?Ke({state:e,impact:r.impact,clientSelection:r.clientSelection,scrollJumpRequest:r.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const r=t.payload.reason;return e.phase!=="COLLECTING"&&y(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:r}}if(t.type==="DROP_ANIMATE"){const{completed:r,dropDuration:n,newHomeClientOffset:s}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||y(),{phase:"DROP_ANIMATING",completed:r,dropDuration:n,newHomeClientOffset:s,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:r}=t.payload;return{phase:"IDLE",completed:r,shouldFlush:!1}}return e};function M(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Ea=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),ka=e=>({type:"LIFT",payload:e}),Pa=e=>({type:"INITIAL_PUBLISH",payload:e}),Ra=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Oa=()=>({type:"COLLECTION_STARTING",payload:null}),Ta=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Ba=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Ma=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),Hn=e=>({type:"MOVE",payload:e}),La=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),_a=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Ga=()=>({type:"MOVE_UP",payload:null}),$a=()=>({type:"MOVE_DOWN",payload:null}),Fa=()=>({type:"MOVE_RIGHT",payload:null}),Wa=()=>({type:"MOVE_LEFT",payload:null}),cr=()=>({type:"FLUSH",payload:null}),za=e=>({type:"DROP_ANIMATE",payload:e}),dr=e=>({type:"DROP_COMPLETE",payload:e}),Vn=e=>({type:"DROP",payload:e}),Ha=e=>({type:"DROP_PENDING",payload:e}),Un=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Va=e=>({getState:t,dispatch:r})=>n=>s=>{if(!M(s,"LIFT")){n(s);return}const{id:a,clientSelection:i,movementMode:l}=s.payload,c=t();c.phase==="DROP_ANIMATING"&&r(dr({completed:c.completed})),t().phase!=="IDLE"&&y(),r(cr()),r(Ea({draggableId:a,movementMode:l}));const m={draggableId:a,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:d,dimensions:g,viewport:u}=e.startPublishing(m);r(Pa({critical:d,dimensions:g,clientSelection:i,movementMode:l,viewport:u}))},Ua=e=>()=>t=>r=>{M(r,"INITIAL_PUBLISH")&&e.dragging(),M(r,"DROP_ANIMATE")&&e.dropping(r.payload.completed.result.reason),(M(r,"FLUSH")||M(r,"DROP_COMPLETE"))&&e.resting(),t(r)};const ur={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},nt={opacity:{drop:0,combining:.7},scale:{drop:.75}},qn={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},De=`${qn.outOfTheWay}s ${ur.outOfTheWay}`,Xe={fluid:`opacity ${De}`,snap:`transform ${De}, opacity ${De}`,drop:e=>{const t=`${e}s ${ur.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${De}`,placeholder:`height ${De}, width ${De}, margin ${De}`},Hr=e=>xe(e,W)?void 0:`translate(${e.x}px, ${e.y}px)`,Kt={moveTo:Hr,drop:(e,t)=>{const r=Hr(e);if(r)return t?`${r} scale(${nt.scale.drop})`:r}},{minDropTime:Xt,maxDropTime:Yn}=qn,qa=Yn-Xt,Vr=1500,Ya=.6;var Ja=({current:e,destination:t,reason:r})=>{const n=et(e,t);if(n<=0)return Xt;if(n>=Vr)return Yn;const s=n/Vr,a=Xt+qa*s,i=r==="CANCEL"?a*Ya:a;return Number(i.toFixed(2))},Ka=({impact:e,draggable:t,dimensions:r,viewport:n,afterCritical:s})=>{const{draggables:a,droppables:i}=r,l=Q(e),c=l?i[l]:null,p=i[t.descriptor.droppableId],m=Fn({impact:e,draggable:t,draggables:a,afterCritical:s,droppable:c||p,viewport:n});return X(m,t.client.borderBox.center)},Xa=({draggables:e,reason:t,lastImpact:r,home:n,viewport:s,onLiftImpact:a})=>!r.at||t!=="DROP"?{impact:$n({draggables:e,impact:a,destination:n,viewport:s,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:r.at.type==="REORDER"?{impact:r,didDropInsideDroppable:!0}:{impact:{...r,displaced:tt},didDropInsideDroppable:!0};const Qa=({getState:e,dispatch:t})=>r=>n=>{if(!M(n,"DROP")){r(n);return}const s=e(),a=n.payload.reason;if(s.phase==="COLLECTING"){t(Ha({reason:a}));return}if(s.phase==="IDLE")return;s.phase==="DROP_PENDING"&&s.isWaiting&&y(),s.phase==="DRAGGING"||s.phase==="DROP_PENDING"||y();const l=s.critical,c=s.dimensions,p=c.draggables[s.critical.draggable.id],{impact:m,didDropInsideDroppable:d}=Xa({reason:a,lastImpact:s.impact,afterCritical:s.afterCritical,onLiftImpact:s.onLiftImpact,home:s.dimensions.droppables[s.critical.droppable.id],viewport:s.viewport,draggables:s.dimensions.draggables}),g=d?nr(m):null,u=d?kt(m):null,b={index:l.draggable.index,droppableId:l.droppable.id},x={draggableId:p.descriptor.id,type:p.descriptor.type,source:b,reason:a,mode:s.movementMode,destination:g,combine:u},f=Ka({impact:m,draggable:p,dimensions:c,viewport:s.viewport,afterCritical:s.afterCritical}),v={critical:s.critical,afterCritical:s.afterCritical,result:x,impact:m};if(!(!xe(s.current.client.offset,f)||!!x.combine)){t(dr({completed:v}));return}const k=Ja({current:s.current.client.offset,destination:f,reason:a});t(za({newHomeClientOffset:f,dropDuration:k,completed:v}))};var Jn=()=>({x:window.pageXOffset,y:window.pageYOffset});function Za(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function ei({onWindowScroll:e}){function t(){e(Jn())}const r=Ze(t),n=Za(r);let s=be;function a(){return s!==be}function i(){a()&&y(),s=se(window,[n])}function l(){a()||y(),r.cancel(),s(),s=be}return{start:i,stop:l,isActive:a}}const ti=e=>M(e,"DROP_COMPLETE")||M(e,"DROP_ANIMATE")||M(e,"FLUSH"),ri=e=>{const t=ei({onWindowScroll:r=>{e.dispatch(La({newScroll:r}))}});return r=>n=>{!t.isActive()&&M(n,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&ti(n)&&t.stop(),r(n)}};var ni=e=>{let t=!1,r=!1;const n=setTimeout(()=>{r=!0}),s=a=>{t||r||(t=!0,e(a),clearTimeout(n))};return s.wasCalled=()=>t,s},si=()=>{const e=[],t=s=>{const a=e.findIndex(l=>l.timerId===s);a===-1&&y();const[i]=e.splice(a,1);i.callback()};return{add:s=>{const a=setTimeout(()=>t(a)),i={timerId:a,callback:s};e.push(i)},flush:()=>{if(!e.length)return;const s=[...e];e.length=0,s.forEach(a=>{clearTimeout(a.timerId),a.callback()})}}};const oi=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,ai=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,ii=(e,t)=>{if(e===t)return!0;const r=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,n=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return r&&n},Ve=(e,t)=>{t()},gt=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function Wt(e,t,r,n){if(!e){r(n(t));return}const s=ni(r);e(t,{announce:s}),s.wasCalled()||r(n(t))}var li=(e,t)=>{const r=si();let n=null;const s=(d,g)=>{n&&y(),Ve("onBeforeCapture",()=>{const u=e().onBeforeCapture;u&&u({draggableId:d,mode:g})})},a=(d,g)=>{n&&y(),Ve("onBeforeDragStart",()=>{const u=e().onBeforeDragStart;u&&u(gt(d,g))})},i=(d,g)=>{n&&y();const u=gt(d,g);n={mode:g,lastCritical:d,lastLocation:u.source,lastCombine:null},r.add(()=>{Ve("onDragStart",()=>Wt(e().onDragStart,u,t,xt.onDragStart))})},l=(d,g)=>{const u=nr(g),b=kt(g);n||y();const x=!ii(d,n.lastCritical);x&&(n.lastCritical=d);const f=!oi(n.lastLocation,u);f&&(n.lastLocation=u);const v=!ai(n.lastCombine,b);if(v&&(n.lastCombine=b),!x&&!f&&!v)return;const S={...gt(d,n.mode),combine:b,destination:u};r.add(()=>{Ve("onDragUpdate",()=>Wt(e().onDragUpdate,S,t,xt.onDragUpdate))})},c=()=>{n||y(),r.flush()},p=d=>{n||y(),n=null,Ve("onDragEnd",()=>Wt(e().onDragEnd,d,t,xt.onDragEnd))};return{beforeCapture:s,beforeStart:a,start:i,update:l,flush:c,drop:p,abort:()=>{if(!n)return;const d={...gt(n.lastCritical,n.mode),combine:null,destination:null,reason:"CANCEL"};p(d)}}},ci=(e,t)=>{const r=li(e,t);return n=>s=>a=>{if(M(a,"BEFORE_INITIAL_CAPTURE")){r.beforeCapture(a.payload.draggableId,a.payload.movementMode);return}if(M(a,"INITIAL_PUBLISH")){const l=a.payload.critical;r.beforeStart(l,a.payload.movementMode),s(a),r.start(l,a.payload.movementMode);return}if(M(a,"DROP_COMPLETE")){const l=a.payload.completed.result;r.flush(),s(a),r.drop(l);return}if(s(a),M(a,"FLUSH")){r.abort();return}const i=n.getState();i.phase==="DRAGGING"&&r.update(i.critical,i.impact)}};const di=e=>t=>r=>{if(!M(r,"DROP_ANIMATION_FINISHED")){t(r);return}const n=e.getState();n.phase!=="DROP_ANIMATING"&&y(),e.dispatch(dr({completed:n.completed}))},ui=e=>{let t=null,r=null;function n(){r&&(cancelAnimationFrame(r),r=null),t&&(t(),t=null)}return s=>a=>{if((M(a,"FLUSH")||M(a,"DROP_COMPLETE")||M(a,"DROP_ANIMATION_FINISHED"))&&n(),s(a),!M(a,"DROP_ANIMATE"))return;const i={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(Un())}};r=requestAnimationFrame(()=>{r=null,t=se(window,[i])})}};var pi=e=>()=>t=>r=>{(M(r,"DROP_COMPLETE")||M(r,"FLUSH")||M(r,"DROP_ANIMATE"))&&e.stopPublishing(),t(r)},gi=e=>{let t=!1;return()=>r=>n=>{if(M(n,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(n.payload.critical.draggable.id),r(n),e.tryRestoreFocusRecorded();return}if(r(n),!!t){if(M(n,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(M(n,"DROP_COMPLETE")){t=!1;const s=n.payload.completed.result;s.combine&&e.tryShiftRecord(s.draggableId,s.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const mi=e=>M(e,"DROP_COMPLETE")||M(e,"DROP_ANIMATE")||M(e,"FLUSH");var fi=e=>t=>r=>n=>{if(mi(n)){e.stop(),r(n);return}if(M(n,"INITIAL_PUBLISH")){r(n);const s=t.getState();s.phase!=="DRAGGING"&&y(),e.start(s);return}r(n),e.scroll(t.getState())};const bi=e=>t=>r=>{if(t(r),!M(r,"PUBLISH_WHILE_DRAGGING"))return;const n=e.getState();n.phase==="DROP_PENDING"&&(n.isWaiting||e.dispatch(Vn({reason:n.reason})))},xi=Fs;var hi=({dimensionMarshal:e,focusMarshal:t,styleMarshal:r,getResponders:n,announce:s,autoScroller:a})=>$s(Aa,xi(Ws(Ua(r),pi(e),Va(e),Qa,di,ui,bi,fi(a),ri,gi(t),ci(n,s))));const zt=()=>({additions:{},removals:{},modified:{}});function yi({registry:e,callbacks:t}){let r=zt(),n=null;const s=()=>{n||(t.collectionStarting(),n=requestAnimationFrame(()=>{n=null;const{additions:c,removals:p,modified:m}=r,d=Object.keys(c).map(b=>e.draggable.getById(b).getDimension(W)).sort((b,x)=>b.descriptor.index-x.descriptor.index),g=Object.keys(m).map(b=>{const f=e.droppable.getById(b).callbacks.getScrollWhileDragging();return{droppableId:b,scroll:f}}),u={additions:d,removals:Object.keys(p),modified:g};r=zt(),t.publish(u)}))};return{add:c=>{const p=c.descriptor.id;r.additions[p]=c,r.modified[c.descriptor.droppableId]=!0,r.removals[p]&&delete r.removals[p],s()},remove:c=>{const p=c.descriptor;r.removals[p.id]=!0,r.modified[p.droppableId]=!0,r.additions[p.id]&&delete r.additions[p.id],s()},stop:()=>{n&&(cancelAnimationFrame(n),n=null,r=zt())}}}var Kn=({scrollHeight:e,scrollWidth:t,height:r,width:n})=>{const s=X({x:t,y:e},{x:n,y:r});return{x:Math.max(0,s.x),y:Math.max(0,s.y)}},Xn=()=>{const e=document.documentElement;return e||y(),e},Qn=()=>{const e=Xn();return Kn({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},vi=()=>{const e=Jn(),t=Qn(),r=e.y,n=e.x,s=Xn(),a=s.clientWidth,i=s.clientHeight,l=n+a,c=r+i;return{frame:ce({top:r,left:n,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:W,displacement:W}}}},Ni=({critical:e,scrollOptions:t,registry:r})=>{const n=vi(),s=n.scroll.current,a=e.droppable,i=r.droppable.getAllByType(a.type).map(m=>m.callbacks.getDimensionAndWatchScroll(s,t)),l=r.draggable.getAllByType(e.draggable.type).map(m=>m.getDimension(s));return{dimensions:{draggables:Sn(l),droppables:jn(i)},critical:e,viewport:n}};function Ur(e,t,r){return!(r.descriptor.id===t.id||r.descriptor.type!==t.type||e.droppable.getById(r.descriptor.droppableId).descriptor.mode!=="virtual")}var wi=(e,t)=>{let r=null;const n=yi({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),s=(g,u)=>{e.droppable.exists(g)||y(),r&&t.updateDroppableIsEnabled({id:g,isEnabled:u})},a=(g,u)=>{r&&(e.droppable.exists(g)||y(),t.updateDroppableIsCombineEnabled({id:g,isCombineEnabled:u}))},i=(g,u)=>{r&&(e.droppable.exists(g)||y(),t.updateDroppableScroll({id:g,newScroll:u}))},l=(g,u)=>{r&&e.droppable.getById(g).callbacks.scroll(u)},c=()=>{if(!r)return;n.stop();const g=r.critical.droppable;e.droppable.getAllByType(g.type).forEach(u=>u.callbacks.dragStopped()),r.unsubscribe(),r=null},p=g=>{r||y();const u=r.critical.draggable;g.type==="ADDITION"&&Ur(e,u,g.value)&&n.add(g.value),g.type==="REMOVAL"&&Ur(e,u,g.value)&&n.remove(g.value)};return{updateDroppableIsEnabled:s,updateDroppableIsCombineEnabled:a,scrollDroppable:l,updateDroppableScroll:i,startPublishing:g=>{r&&y();const u=e.draggable.getById(g.draggableId),b=e.droppable.getById(u.descriptor.droppableId),x={draggable:u.descriptor,droppable:b.descriptor},f=e.subscribe(p);return r={critical:x,unsubscribe:f},Ni({critical:x,registry:e,scrollOptions:g.scrollOptions})},stopPublishing:c}},Zn=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",Ii=e=>{window.scrollBy(e.x,e.y)};const Di=F(e=>Et(e).filter(t=>!(!t.isEnabled||!t.frame))),ji=(e,t)=>Di(t).find(n=>(n.frame||y(),Mn(n.frame.pageMarginBox)(e)))||null;var Si=({center:e,destination:t,droppables:r})=>{if(t){const s=r[t];return s.frame?s:null}return ji(e,r)};const st={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var Ci=(e,t,r=()=>st)=>{const n=r(),s=e[t.size]*n.startFromPercentage,a=e[t.size]*n.maxScrollAtPercentage;return{startScrollingFrom:s,maxScrollValueAt:a}},es=({startOfRange:e,endOfRange:t,current:r})=>{const n=t-e;return n===0?0:(r-e)/n},pr=1,Ai=(e,t,r=()=>st)=>{const n=r();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return n.maxPixelScroll;if(e===t.startScrollingFrom)return pr;const a=1-es({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),i=n.maxPixelScroll*n.ease(a);return Math.ceil(i)},Ei=(e,t,r)=>{const n=r(),s=n.durationDampening.accelerateAt,a=n.durationDampening.stopDampeningAt,i=t,l=a,p=Date.now()-i;if(p>=a)return e;if(p<s)return pr;const m=es({startOfRange:s,endOfRange:l,current:p}),d=e*n.ease(m);return Math.ceil(d)},qr=({distanceToEdge:e,thresholds:t,dragStartTime:r,shouldUseTimeDampening:n,getAutoScrollerOptions:s})=>{const a=Ai(e,t,s);return a===0?0:n?Math.max(Ei(a,r,s),pr):a},Yr=({container:e,distanceToEdges:t,dragStartTime:r,axis:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=Ci(e,n,a);return t[n.end]<t[n.start]?qr({distanceToEdge:t[n.end],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a}):-1*qr({distanceToEdge:t[n.start],thresholds:i,dragStartTime:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a})},ki=({container:e,subject:t,proposedScroll:r})=>{const n=t.height>e.height,s=t.width>e.width;return!s&&!n?r:s&&n?null:{x:s?0:r.x,y:n?0:r.y}};const Pi=Dn(e=>e===0?0:e);var ts=({dragStartTime:e,container:t,subject:r,center:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i={top:n.y-t.top,right:t.right-n.x,bottom:t.bottom-n.y,left:n.x-t.left},l=Yr({container:t,distanceToEdges:i,dragStartTime:e,axis:sr,shouldUseTimeDampening:s,getAutoScrollerOptions:a}),c=Yr({container:t,distanceToEdges:i,dragStartTime:e,axis:En,shouldUseTimeDampening:s,getAutoScrollerOptions:a}),p=Pi({x:c,y:l});if(xe(p,W))return null;const m=ki({container:t,subject:r,proposedScroll:p});return m?xe(m,W)?null:m:null};const Ri=Dn(e=>e===0?0:e>0?1:-1),gr=(()=>{const e=(t,r)=>t<0?t:t>r?t-r:0;return({current:t,max:r,change:n})=>{const s=z(t,n),a={x:e(s.x,r.x),y:e(s.y,r.y)};return xe(a,W)?null:a}})(),rs=({max:e,current:t,change:r})=>{const n={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},s=Ri(r),a=gr({max:n,current:t,change:s});return!a||s.x!==0&&a.x===0||s.y!==0&&a.y===0},mr=(e,t)=>rs({current:e.scroll.current,max:e.scroll.max,change:t}),Oi=(e,t)=>{if(!mr(e,t))return null;const r=e.scroll.max,n=e.scroll.current;return gr({current:n,max:r,change:t})},fr=(e,t)=>{const r=e.frame;return r?rs({current:r.scroll.current,max:r.scroll.max,change:t}):!1},Ti=(e,t)=>{const r=e.frame;return!r||!fr(e,t)?null:gr({current:r.scroll.current,max:r.scroll.max,change:t})};var Bi=({viewport:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=ts({dragStartTime:n,container:e.frame,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a});return i&&mr(e,i)?i:null},Mi=({droppable:e,subject:t,center:r,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=e.frame;if(!i)return null;const l=ts({dragStartTime:n,container:i.pageMarginBox,subject:t,center:r,shouldUseTimeDampening:s,getAutoScrollerOptions:a});return l&&fr(e,l)?l:null},Jr=({state:e,dragStartTime:t,shouldUseTimeDampening:r,scrollWindow:n,scrollDroppable:s,getAutoScrollerOptions:a})=>{const i=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const d=e.viewport,g=Bi({dragStartTime:t,viewport:d,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:a});if(g){n(g);return}}const p=Si({center:i,destination:Q(e.impact),droppables:e.dimensions.droppables});if(!p)return;const m=Mi({dragStartTime:t,droppable:p,subject:c,center:i,shouldUseTimeDampening:r,getAutoScrollerOptions:a});m&&s(p.descriptor.id,m)},Li=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:r=()=>st})=>{const n=Ze(e),s=Ze(t);let a=null;const i=p=>{a||y();const{shouldUseTimeDampening:m,dragStartTime:d}=a;Jr({state:p,scrollWindow:n,scrollDroppable:s,dragStartTime:d,shouldUseTimeDampening:m,getAutoScrollerOptions:r})};return{start:p=>{a&&y();const m=Date.now();let d=!1;const g=()=>{d=!0};Jr({state:p,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:g,scrollDroppable:g,getAutoScrollerOptions:r}),a={dragStartTime:m,shouldUseTimeDampening:d},d&&i(p)},stop:()=>{a&&(n.cancel(),s.cancel(),a=null)},scroll:i}},_i=({move:e,scrollDroppable:t,scrollWindow:r})=>{const n=(l,c)=>{const p=z(l.current.client.selection,c);e({client:p})},s=(l,c)=>{if(!fr(l,c))return c;const p=Ti(l,c);if(!p)return t(l.descriptor.id,c),null;const m=X(c,p);return t(l.descriptor.id,m),X(c,m)},a=(l,c,p)=>{if(!l||!mr(c,p))return p;const m=Oi(c,p);if(!m)return r(p),null;const d=X(p,m);return r(d),X(p,d)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const p=Q(l.impact);p||y();const m=s(l.dimensions.droppables[p],c);if(!m)return;const d=l.viewport,g=a(l.isWindowScrollAllowed,d,m);g&&n(l,g)}},Gi=({scrollDroppable:e,scrollWindow:t,move:r,getAutoScrollerOptions:n})=>{const s=Li({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:n}),a=_i({move:r,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(n().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){s.scroll(c);return}c.scrollJumpRequest&&a(c)}},start:s.start,stop:s.stop}};const Te="data-rfd",Be=(()=>{const e=`${Te}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Qt=(()=>{const e=`${Te}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),$i=(()=>{const e=`${Te}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),Kr={contextId:`${Te}-scroll-container-context-id`},Fi=e=>t=>`[${t}="${e}"]`,Ue=(e,t)=>e.map(r=>{const n=r.styles[t];return n?`${r.selector} { ${n} }`:""}).join(" "),Wi="pointer-events: none;";var zi=e=>{const t=Fi(e),r=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Be.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:Wi,dropAnimating:l}}})(),n=(()=>{const l=`
      transition: ${Xe.outOfTheWay};
    `;return{selector:t(Qt.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),s={selector:t($i.contextId),styles:{always:"overflow-anchor: none;"}},i=[n,r,s,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:Ue(i,"always"),resting:Ue(i,"resting"),dragging:Ue(i,"dragging"),dropAnimating:Ue(i,"dropAnimating"),userCancel:Ue(i,"userCancel")}};const Z=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?h.useLayoutEffect:h.useEffect,Ht=()=>{const e=document.querySelector("head");return e||y(),e},Xr=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function Hi(e,t){const r=R(()=>zi(e),[e]),n=h.useRef(null),s=h.useRef(null),a=j(F(d=>{const g=s.current;g||y(),g.textContent=d}),[]),i=j(d=>{const g=n.current;g||y(),g.textContent=d},[]);Z(()=>{!n.current&&!s.current||y();const d=Xr(t),g=Xr(t);return n.current=d,s.current=g,d.setAttribute(`${Te}-always`,e),g.setAttribute(`${Te}-dynamic`,e),Ht().appendChild(d),Ht().appendChild(g),i(r.always),a(r.resting),()=>{const u=b=>{const x=b.current;x||y(),Ht().removeChild(x),b.current=null};u(n),u(s)}},[t,i,a,r.always,r.resting,e]);const l=j(()=>a(r.dragging),[a,r.dragging]),c=j(d=>{if(d==="DROP"){a(r.dropAnimating);return}a(r.userCancel)},[a,r.dropAnimating,r.userCancel]),p=j(()=>{s.current&&a(r.resting)},[a,r.resting]);return R(()=>({dragging:l,dropping:c,resting:p}),[l,c,p])}function ns(e,t){return Array.from(e.querySelectorAll(t))}var ss=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function Ot(e){return e instanceof ss(e).HTMLElement}function Vi(e,t){const r=`[${Be.contextId}="${e}"]`,n=ns(document,r);if(!n.length)return null;const s=n.find(a=>a.getAttribute(Be.draggableId)===t);return!s||!Ot(s)?null:s}function Ui(e){const t=h.useRef({}),r=h.useRef(null),n=h.useRef(null),s=h.useRef(!1),a=j(function(g,u){const b={id:g,focus:u};return t.current[g]=b,function(){const f=t.current;f[g]!==b&&delete f[g]}},[]),i=j(function(g){const u=Vi(e,g);u&&u!==document.activeElement&&u.focus()},[e]),l=j(function(g,u){r.current===g&&(r.current=u)},[]),c=j(function(){n.current||s.current&&(n.current=requestAnimationFrame(()=>{n.current=null;const g=r.current;g&&i(g)}))},[i]),p=j(function(g){r.current=null;const u=document.activeElement;u&&u.getAttribute(Be.draggableId)===g&&(r.current=g)},[]);return Z(()=>(s.current=!0,function(){s.current=!1;const g=n.current;g&&cancelAnimationFrame(g)}),[]),R(()=>({register:a,tryRecordFocus:p,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[a,p,c,l])}function qi(){const e={draggables:{},droppables:{}},t=[];function r(d){return t.push(d),function(){const u=t.indexOf(d);u!==-1&&t.splice(u,1)}}function n(d){t.length&&t.forEach(g=>g(d))}function s(d){return e.draggables[d]||null}function a(d){const g=s(d);return g||y(),g}const i={register:d=>{e.draggables[d.descriptor.id]=d,n({type:"ADDITION",value:d})},update:(d,g)=>{const u=e.draggables[g.descriptor.id];u&&u.uniqueId===d.uniqueId&&(delete e.draggables[g.descriptor.id],e.draggables[d.descriptor.id]=d)},unregister:d=>{const g=d.descriptor.id,u=s(g);u&&d.uniqueId===u.uniqueId&&(delete e.draggables[g],e.droppables[d.descriptor.droppableId]&&n({type:"REMOVAL",value:d}))},getById:a,findById:s,exists:d=>!!s(d),getAllByType:d=>Object.values(e.draggables).filter(g=>g.descriptor.type===d)};function l(d){return e.droppables[d]||null}function c(d){const g=l(d);return g||y(),g}const p={register:d=>{e.droppables[d.descriptor.id]=d},unregister:d=>{const g=l(d.descriptor.id);g&&d.uniqueId===g.uniqueId&&delete e.droppables[d.descriptor.id]},getById:c,findById:l,exists:d=>!!l(d),getAllByType:d=>Object.values(e.droppables).filter(g=>g.descriptor.type===d)};function m(){e.draggables={},e.droppables={},t.length=0}return{draggable:i,droppable:p,subscribe:r,clean:m}}function Yi(){const e=R(qi,[]);return h.useEffect(()=>function(){e.clean()},[e]),e}var br=L.createContext(null),Ct=()=>{const e=document.body;return e||y(),e};const Ji={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},Ki=e=>`rfd-announcement-${e}`;function Xi(e){const t=R(()=>Ki(e),[e]),r=h.useRef(null);return h.useEffect(function(){const a=document.createElement("div");return r.current=a,a.id=t,a.setAttribute("aria-live","assertive"),a.setAttribute("aria-atomic","true"),It(a.style,Ji),Ct().appendChild(a),function(){setTimeout(function(){const c=Ct();c.contains(a)&&c.removeChild(a),a===r.current&&(r.current=null)})}},[t]),j(s=>{const a=r.current;if(a){a.textContent=s;return}},[])}const Qi={separator:"::"};function xr(e,t=Qi){const r=L.useId();return R(()=>`${e}${t.separator}${r}`,[t.separator,e,r])}function Zi({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function el({contextId:e,text:t}){const r=xr("hidden-text",{separator:"-"}),n=R(()=>Zi({contextId:e,uniqueId:r}),[r,e]);return h.useEffect(function(){const a=document.createElement("div");return a.id=n,a.textContent=t,a.style.display="none",Ct().appendChild(a),function(){const l=Ct();l.contains(a)&&l.removeChild(a)}},[n,t]),n}var Tt=L.createContext(null);function os(e){const t=h.useRef(e);return h.useEffect(()=>{t.current=e}),t}function tl(){let e=null;function t(){return!!e}function r(i){return i===e}function n(i){e&&y();const l={abandon:i};return e=l,l}function s(){e||y(),e=null}function a(){e&&(e.abandon(),s())}return{isClaimed:t,isActive:r,claim:n,release:s,tryAbandon:a}}function ot(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const rl=9,nl=13,hr=27,as=32,sl=33,ol=34,al=35,il=36,ll=37,cl=38,dl=39,ul=40,pl={[nl]:!0,[rl]:!0};var is=e=>{pl[e.keyCode]&&e.preventDefault()};const Bt=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(n=>`on${n}`in document)||e})(),ls=0,Qr=5;function gl(e,t){return Math.abs(t.x-e.x)>=Qr||Math.abs(t.y-e.y)>=Qr}const Zr={type:"IDLE"};function ml({cancel:e,completed:t,getPhase:r,setPhase:n}){return[{eventName:"mousemove",fn:s=>{const{button:a,clientX:i,clientY:l}=s;if(a!==ls)return;const c={x:i,y:l},p=r();if(p.type==="DRAGGING"){s.preventDefault(),p.actions.move(c);return}p.type!=="PENDING"&&y();const m=p.point;if(!gl(m,c))return;s.preventDefault();const d=p.actions.fluidLift(c);n({type:"DRAGGING",actions:d})}},{eventName:"mouseup",fn:s=>{const a=r();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:s=>{r().type==="DRAGGING"&&s.preventDefault(),e()}},{eventName:"keydown",fn:s=>{if(r().type==="PENDING"){e();return}if(s.keyCode===hr){s.preventDefault(),e();return}is(s)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{r().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:s=>{const a=r();if(a.type==="IDLE"&&y(),a.actions.shouldRespectForcePress()){e();return}s.preventDefault()}},{eventName:Bt,fn:e}]}function fl(e){const t=h.useRef(Zr),r=h.useRef(be),n=R(()=>({eventName:"mousedown",fn:function(d){if(d.defaultPrevented||d.button!==ls||d.ctrlKey||d.metaKey||d.shiftKey||d.altKey)return;const g=e.findClosestDraggableId(d);if(!g)return;const u=e.tryGetLock(g,i,{sourceEvent:d});if(!u)return;d.preventDefault();const b={x:d.clientX,y:d.clientY};r.current(),p(u,b)}}),[e]),s=R(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const d=e.findClosestDraggableId(m);if(!d)return;const g=e.findOptionsForDraggable(d);g&&(g.shouldRespectForcePress||e.canGetLock(d)&&m.preventDefault())}}),[e]),a=j(function(){const d={passive:!1,capture:!0};r.current=se(window,[s,n],d)},[s,n]),i=j(()=>{t.current.type!=="IDLE"&&(t.current=Zr,r.current(),a())},[a]),l=j(()=>{const m=t.current;i(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[i]),c=j(function(){const d={capture:!0,passive:!1},g=ml({cancel:l,completed:i,getPhase:()=>t.current,setPhase:u=>{t.current=u}});r.current=se(window,g,d)},[l,i]),p=j(function(d,g){t.current.type!=="IDLE"&&y(),t.current={type:"PENDING",point:g,actions:d},c()},[c]);Z(function(){return a(),function(){r.current()}},[a])}function bl(){}const xl={[ol]:!0,[sl]:!0,[il]:!0,[al]:!0};function hl(e,t){function r(){t(),e.cancel()}function n(){t(),e.drop()}return[{eventName:"keydown",fn:s=>{if(s.keyCode===hr){s.preventDefault(),r();return}if(s.keyCode===as){s.preventDefault(),n();return}if(s.keyCode===ul){s.preventDefault(),e.moveDown();return}if(s.keyCode===cl){s.preventDefault(),e.moveUp();return}if(s.keyCode===dl){s.preventDefault(),e.moveRight();return}if(s.keyCode===ll){s.preventDefault(),e.moveLeft();return}if(xl[s.keyCode]){s.preventDefault();return}is(s)}},{eventName:"mousedown",fn:r},{eventName:"mouseup",fn:r},{eventName:"click",fn:r},{eventName:"touchstart",fn:r},{eventName:"resize",fn:r},{eventName:"wheel",fn:r,options:{passive:!0}},{eventName:Bt,fn:r}]}function yl(e){const t=h.useRef(bl),r=R(()=>({eventName:"keydown",fn:function(a){if(a.defaultPrevented||a.keyCode!==as)return;const i=e.findClosestDraggableId(a);if(!i)return;const l=e.tryGetLock(i,m,{sourceEvent:a});if(!l)return;a.preventDefault();let c=!0;const p=l.snapLift();t.current();function m(){c||y(),c=!1,t.current(),n()}t.current=se(window,hl(p,m),{capture:!0,passive:!1})}}),[e]),n=j(function(){const a={passive:!1,capture:!0};t.current=se(window,[r],a)},[r]);Z(function(){return n(),function(){t.current()}},[n])}const Vt={type:"IDLE"},vl=120,Nl=.15;function wl({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:r=>{r.preventDefault()}},{eventName:"keydown",fn:r=>{if(t().type!=="DRAGGING"){e();return}r.keyCode===hr&&r.preventDefault(),e()}},{eventName:Bt,fn:e}]}function Il({cancel:e,completed:t,getPhase:r}){return[{eventName:"touchmove",options:{capture:!1},fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}s.hasMoved=!0;const{clientX:a,clientY:i}=n.touches[0],l={x:a,y:i};n.preventDefault(),s.actions.move(l)}},{eventName:"touchend",fn:n=>{const s=r();if(s.type!=="DRAGGING"){e();return}n.preventDefault(),s.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:n=>{if(r().type!=="DRAGGING"){e();return}n.preventDefault(),e()}},{eventName:"touchforcechange",fn:n=>{const s=r();s.type==="IDLE"&&y();const a=n.touches[0];if(!a||!(a.force>=Nl))return;const l=s.actions.shouldRespectForcePress();if(s.type==="PENDING"){l&&e();return}if(l){if(s.hasMoved){n.preventDefault();return}e();return}n.preventDefault()}},{eventName:Bt,fn:e}]}function Dl(e){const t=h.useRef(Vt),r=h.useRef(be),n=j(function(){return t.current},[]),s=j(function(u){t.current=u},[]),a=R(()=>({eventName:"touchstart",fn:function(u){if(u.defaultPrevented)return;const b=e.findClosestDraggableId(u);if(!b)return;const x=e.tryGetLock(b,l,{sourceEvent:u});if(!x)return;const f=u.touches[0],{clientX:v,clientY:S}=f,k={x:v,y:S};r.current(),d(x,k)}}),[e]),i=j(function(){const u={capture:!0,passive:!1};r.current=se(window,[a],u)},[a]),l=j(()=>{const g=t.current;g.type!=="IDLE"&&(g.type==="PENDING"&&clearTimeout(g.longPressTimerId),s(Vt),r.current(),i())},[i,s]),c=j(()=>{const g=t.current;l(),g.type==="DRAGGING"&&g.actions.cancel({shouldBlockNextClick:!0}),g.type==="PENDING"&&g.actions.abort()},[l]),p=j(function(){const u={capture:!0,passive:!1},b={cancel:c,completed:l,getPhase:n},x=se(window,Il(b),u),f=se(window,wl(b),u);r.current=function(){x(),f()}},[c,n,l]),m=j(function(){const u=n();u.type!=="PENDING"&&y();const b=u.actions.fluidLift(u.point);s({type:"DRAGGING",actions:b,hasMoved:!1})},[n,s]),d=j(function(u,b){n().type!=="IDLE"&&y();const x=setTimeout(m,vl);s({type:"PENDING",point:b,actions:u,longPressTimerId:x}),p()},[p,n,s,m]);Z(function(){return i(),function(){r.current();const b=n();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),s(Vt))}},[n,i,s]),Z(function(){return se(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const jl=["input","button","textarea","select","option","optgroup","video","audio"];function cs(e,t){if(t==null)return!1;if(jl.includes(t.tagName.toLowerCase()))return!0;const n=t.getAttribute("contenteditable");return n==="true"||n===""?!0:t===e?!1:cs(e,t.parentElement)}function Sl(e,t){const r=t.target;return Ot(r)?cs(e,r):!1}var Cl=e=>ce(e.getBoundingClientRect()).center;function Al(e){return e instanceof ss(e).Element}const El=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(n=>n in Element.prototype)||e})();function ds(e,t){return e==null?null:e[El](t)?e:ds(e.parentElement,t)}function kl(e,t){return e.closest?e.closest(t):ds(e,t)}function Pl(e){return`[${Be.contextId}="${e}"]`}function Rl(e,t){const r=t.target;if(!Al(r))return null;const n=Pl(e),s=kl(r,n);return!s||!Ot(s)?null:s}function Ol(e,t){const r=Rl(e,t);return r?r.getAttribute(Be.draggableId):null}function Tl(e,t){const r=`[${Qt.contextId}="${e}"]`,s=ns(document,r).find(a=>a.getAttribute(Qt.id)===t);return!s||!Ot(s)?null:s}function Bl(e){e.preventDefault()}function mt({expected:e,phase:t,isLockActive:r,shouldWarn:n}){return!(!r()||e!==t)}function us({lockAPI:e,store:t,registry:r,draggableId:n}){if(e.isClaimed())return!1;const s=r.draggable.findById(n);return!(!s||!s.options.isEnabled||!Zn(t.getState(),n))}function Ml({lockAPI:e,contextId:t,store:r,registry:n,draggableId:s,forceSensorStop:a,sourceEvent:i}){if(!us({lockAPI:e,store:r,registry:n,draggableId:s}))return null;const c=n.draggable.getById(s),p=Tl(t,c.descriptor.id);if(!p||i&&!c.options.canDragInteractiveElements&&Sl(p,i))return null;const m=e.claim(a||be);let d="PRE_DRAG";function g(){return c.options.shouldRespectForcePress}function u(){return e.isActive(m)}function b(A,N){mt({expected:A,phase:d,isLockActive:u,shouldWarn:!0})&&r.dispatch(N())}const x=b.bind(null,"DRAGGING");function f(A){function N(){e.release(),d="COMPLETED"}d!=="PRE_DRAG"&&(N(),y()),r.dispatch(ka(A.liftActionArgs)),d="DRAGGING";function B(O,H={shouldBlockNextClick:!1}){if(A.cleanup(),H.shouldBlockNextClick){const T=se(window,[{eventName:"click",fn:Bl,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(T)}N(),r.dispatch(Vn({reason:O}))}return{isActive:()=>mt({expected:"DRAGGING",phase:d,isLockActive:u,shouldWarn:!1}),shouldRespectForcePress:g,drop:O=>B("DROP",O),cancel:O=>B("CANCEL",O),...A.actions}}function v(A){const N=Ze(O=>{x(()=>Hn({client:O}))});return{...f({liftActionArgs:{id:s,clientSelection:A,movementMode:"FLUID"},cleanup:()=>N.cancel(),actions:{move:N}}),move:N}}function S(){const A={moveUp:()=>x(Ga),moveRight:()=>x(Fa),moveDown:()=>x($a),moveLeft:()=>x(Wa)};return f({liftActionArgs:{id:s,clientSelection:Cl(p),movementMode:"SNAP"},cleanup:be,actions:A})}function k(){mt({expected:"PRE_DRAG",phase:d,isLockActive:u,shouldWarn:!0})&&e.release()}return{isActive:()=>mt({expected:"PRE_DRAG",phase:d,isLockActive:u,shouldWarn:!1}),shouldRespectForcePress:g,fluidLift:v,snapLift:S,abort:k}}const Ll=[fl,yl,Dl];function _l({contextId:e,store:t,registry:r,customSensors:n,enableDefaultSensors:s}){const a=[...s?Ll:[],...n||[]],i=h.useState(()=>tl())[0],l=j(function(f,v){ot(f)&&!ot(v)&&i.tryAbandon()},[i]);Z(function(){let f=t.getState();return t.subscribe(()=>{const S=t.getState();l(f,S),f=S})},[i,t,l]),Z(()=>i.tryAbandon,[i.tryAbandon]);const c=j(x=>us({lockAPI:i,registry:r,store:t,draggableId:x}),[i,r,t]),p=j((x,f,v)=>Ml({lockAPI:i,registry:r,contextId:e,store:t,draggableId:x,forceSensorStop:f||null,sourceEvent:v&&v.sourceEvent?v.sourceEvent:null}),[e,i,r,t]),m=j(x=>Ol(e,x),[e]),d=j(x=>{const f=r.draggable.findById(x);return f?f.options:null},[r.draggable]),g=j(function(){i.isClaimed()&&(i.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(cr()))},[i,t]),u=j(()=>i.isClaimed(),[i]),b=R(()=>({canGetLock:c,tryGetLock:p,findClosestDraggableId:m,findOptionsForDraggable:d,tryReleaseLock:g,isLockClaimed:u}),[c,p,m,d,g,u]);for(let x=0;x<a.length;x++)a[x](b)}const Gl=e=>({onBeforeCapture:t=>{const r=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};gn.flushSync(r)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),$l=e=>({...st,...e.autoScrollerOptions,durationDampening:{...st.durationDampening,...e.autoScrollerOptions}});function qe(e){return e.current||y(),e.current}function Fl(e){const{contextId:t,setCallbacks:r,sensors:n,nonce:s,dragHandleUsageInstructions:a}=e,i=h.useRef(null),l=os(e),c=j(()=>Gl(l.current),[l]),p=j(()=>$l(l.current),[l]),m=Xi(t),d=el({contextId:t,text:a}),g=Hi(t,s),u=j(T=>{qe(i).dispatch(T)},[]),b=R(()=>Cr({publishWhileDragging:Ra,updateDroppableScroll:Ta,updateDroppableIsEnabled:Ba,updateDroppableIsCombineEnabled:Ma,collectionStarting:Oa},u),[u]),x=Yi(),f=R(()=>wi(x,b),[x,b]),v=R(()=>Gi({scrollWindow:Ii,scrollDroppable:f.scrollDroppable,getAutoScrollerOptions:p,...Cr({move:Hn},u)}),[f.scrollDroppable,u,p]),S=Ui(t),k=R(()=>hi({announce:m,autoScroller:v,dimensionMarshal:f,focusMarshal:S,getResponders:c,styleMarshal:g}),[m,v,f,S,c,g]);i.current=k;const w=j(()=>{const T=qe(i);T.getState().phase!=="IDLE"&&T.dispatch(cr())},[]),A=j(()=>{const T=qe(i).getState();return T.phase==="DROP_ANIMATING"?!0:T.phase==="IDLE"?!1:T.isDragging},[]),N=R(()=>({isDragging:A,tryAbort:w}),[A,w]);r(N);const B=j(T=>Zn(qe(i).getState(),T),[]),O=j(()=>je(qe(i).getState()),[]),H=R(()=>({marshal:f,focus:S,contextId:t,canLift:B,isMovementAllowed:O,dragHandleUsageInstructionsId:d,registry:x}),[t,f,d,S,B,O,x]);return _l({contextId:t,store:k,registry:x,customSensors:n||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),h.useEffect(()=>w,[w]),L.createElement(Tt.Provider,{value:H},L.createElement(Gs,{context:br,store:k},e.children))}function Wl(){return L.useId()}function zl(e){const t=Wl(),r=e.dragHandleUsageInstructions||xt.dragHandleUsageInstructions;return L.createElement(yo,null,n=>L.createElement(Fl,{nonce:e.nonce,contextId:t,setCallbacks:n,dragHandleUsageInstructions:r,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const en={dragging:5e3,dropAnimating:4500},Hl=(e,t)=>t?Xe.drop(t.duration):e?Xe.snap:Xe.fluid,Vl=(e,t)=>{if(e)return t?nt.opacity.drop:nt.opacity.combining},Ul=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function ql(e){const r=e.dimension.client,{offset:n,combineWith:s,dropping:a}=e,i=!!s,l=Ul(e),c=!!a,p=c?Kt.drop(n,i):Kt.moveTo(n);return{position:"fixed",top:r.marginBox.top,left:r.marginBox.left,boxSizing:"border-box",width:r.borderBox.width,height:r.borderBox.height,transition:Hl(l,a),transform:p,opacity:Vl(i,c),zIndex:c?en.dropAnimating:en.dragging,pointerEvents:"none"}}function Yl(e){return{transform:Kt.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function Jl(e){return e.type==="DRAGGING"?ql(e):Yl(e)}function Kl(e,t,r=W){const n=window.getComputedStyle(t),s=t.getBoundingClientRect(),a=hn(s,n),i=wt(a,r),l={client:a,tagName:t.tagName.toLowerCase(),display:n.display},c={x:a.marginBox.width,y:a.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:a,page:i}}function Xl(e){const t=xr("draggable"),{descriptor:r,registry:n,getDraggableRef:s,canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}=e,c=R(()=>({canDragInteractiveElements:a,shouldRespectForcePress:i,isEnabled:l}),[a,l,i]),p=j(u=>{const b=s();return b||y(),Kl(r,b,u)},[r,s]),m=R(()=>({uniqueId:t,descriptor:r,options:c,getDimension:p}),[r,p,c,t]),d=h.useRef(m),g=h.useRef(!0);Z(()=>(n.draggable.register(d.current),()=>n.draggable.unregister(d.current)),[n.draggable]),Z(()=>{if(g.current){g.current=!1;return}const u=d.current;d.current=m,n.draggable.update(m,u)},[m,n.draggable])}var yr=L.createContext(null);function At(e){const t=h.useContext(e);return t||y(),t}function Ql(e){e.preventDefault()}const Zl=e=>{const t=h.useRef(null),r=j((N=null)=>{t.current=N},[]),n=j(()=>t.current,[]),{contextId:s,dragHandleUsageInstructionsId:a,registry:i}=At(Tt),{type:l,droppableId:c}=At(yr),p=R(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:m,draggableId:d,isEnabled:g,shouldRespectForcePress:u,canDragInteractiveElements:b,isClone:x,mapped:f,dropAnimationFinished:v}=e;if(!x){const N=R(()=>({descriptor:p,registry:i,getDraggableRef:n,canDragInteractiveElements:b,shouldRespectForcePress:u,isEnabled:g}),[p,i,n,b,u,g]);Xl(N)}const S=R(()=>g?{tabIndex:0,role:"button","aria-describedby":a,"data-rfd-drag-handle-draggable-id":d,"data-rfd-drag-handle-context-id":s,draggable:!1,onDragStart:Ql}:null,[s,a,d,g]),k=j(N=>{f.type==="DRAGGING"&&f.dropping&&N.propertyName==="transform"&&gn.flushSync(v)},[v,f]),w=R(()=>{const N=Jl(f),B=f.type==="DRAGGING"&&f.dropping?k:void 0;return{innerRef:r,draggableProps:{"data-rfd-draggable-context-id":s,"data-rfd-draggable-id":d,style:N,onTransitionEnd:B},dragHandleProps:S}},[s,S,d,f,k,r]),A=R(()=>({draggableId:p.id,type:p.type,source:{index:p.index,droppableId:p.droppableId}}),[p.droppableId,p.id,p.index,p.type]);return L.createElement(L.Fragment,null,m(w,f.snapshot,A))};var ps=(e,t)=>e===t,gs=e=>{const{combine:t,destination:r}=e;return r?r.droppableId:t?t.droppableId:null};const ec=e=>e.combine?e.combine.draggableId:null,tc=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function rc(){const e=F((s,a)=>({x:s,y:a})),t=F((s,a,i=null,l=null,c=null)=>({isDragging:!0,isClone:a,isDropAnimating:!!c,dropAnimation:c,mode:s,draggingOver:i,combineWith:l,combineTargetFor:null})),r=F((s,a,i,l,c=null,p=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:p,mode:a,offset:s,dimension:i,forceShouldAnimate:m,snapshot:t(a,l,c,p,null)}}));return(s,a)=>{if(ot(s)){if(s.critical.draggable.id!==a.draggableId)return null;const i=s.current.client.offset,l=s.dimensions.draggables[a.draggableId],c=Q(s.impact),p=tc(s.impact),m=s.forceShouldAnimate;return r(e(i.x,i.y),s.movementMode,l,a.isClone,c,p,m)}if(s.phase==="DROP_ANIMATING"){const i=s.completed;if(i.result.draggableId!==a.draggableId)return null;const l=a.isClone,c=s.dimensions.draggables[a.draggableId],p=i.result,m=p.mode,d=gs(p),g=ec(p),b={duration:s.dropDuration,curve:ur.drop,moveTo:s.newHomeClientOffset,opacity:g?nt.opacity.drop:null,scale:g?nt.scale.drop:null};return{mapped:{type:"DRAGGING",offset:s.newHomeClientOffset,dimension:c,dropping:b,draggingOver:d,combineWith:g,mode:m,forceShouldAnimate:null,snapshot:t(m,l,d,g,b)}}}return null}}function ms(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const nc={mapped:{type:"SECONDARY",offset:W,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:ms(null)}};function sc(){const e=F((i,l)=>({x:i,y:l})),t=F(ms),r=F((i,l=null,c)=>({mapped:{type:"SECONDARY",offset:i,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),n=i=>i?r(W,i,!0):null,s=(i,l,c,p)=>{const m=c.displaced.visible[i],d=!!(p.inVirtualList&&p.effected[i]),g=kt(c),u=g&&g.draggableId===i?l:null;if(!m){if(!d)return n(u);if(c.displaced.invisible[i])return null;const f=Me(p.displacedBy.point),v=e(f.x,f.y);return r(v,u,!0)}if(d)return n(u);const b=c.displacedBy.point,x=e(b.x,b.y);return r(x,u,m.shouldAnimate)};return(i,l)=>{if(ot(i))return i.critical.draggable.id===l.draggableId?null:s(l.draggableId,i.critical.draggable.id,i.impact,i.afterCritical);if(i.phase==="DROP_ANIMATING"){const c=i.completed;return c.result.draggableId===l.draggableId?null:s(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const oc=()=>{const e=rc(),t=sc();return(n,s)=>e(n,s)||t(n,s)||nc},ac={dropAnimationFinished:Un},ic=mn(oc,ac,null,{context:br,areStatePropsEqual:ps})(Zl);function fs(e){return At(yr).isUsingCloneFor===e.draggableId&&!e.isClone?null:L.createElement(ic,e)}function lc(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,r=!!e.disableInteractiveElementBlocking,n=!!e.shouldRespectForcePress;return L.createElement(fs,It({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:r,shouldRespectForcePress:n}))}const bs=e=>t=>e===t,cc=bs("scroll"),dc=bs("auto"),tn=(e,t)=>t(e.overflowX)||t(e.overflowY),uc=e=>{const t=window.getComputedStyle(e),r={overflowX:t.overflowX,overflowY:t.overflowY};return tn(r,cc)||tn(r,dc)},pc=()=>!1,xs=e=>e==null?null:e===document.body?pc()?e:null:e===document.documentElement?null:uc(e)?e:xs(e.parentElement);var Zt=e=>({x:e.scrollLeft,y:e.scrollTop});const hs=e=>e?window.getComputedStyle(e).position==="fixed"?!0:hs(e.parentElement):!1;var gc=e=>{const t=xs(e),r=hs(e);return{closestScrollable:t,isFixedOnPage:r}},mc=({descriptor:e,isEnabled:t,isCombineEnabled:r,isFixedOnPage:n,direction:s,client:a,page:i,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:g,client:u}=l,b=Kn({scrollHeight:g.scrollHeight,scrollWidth:g.scrollWidth,height:u.paddingBox.height,width:u.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:u,scrollSize:g,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:b,diff:{value:W,displacement:W}}}})(),p=s==="vertical"?sr:En,m=Oe({page:i,withPlaceholder:null,axis:p,frame:c});return{descriptor:e,isCombineEnabled:r,isFixedOnPage:n,axis:p,isEnabled:t,client:a,page:i,frame:c,subject:m}};const fc=(e,t)=>{const r=yn(e);if(!t||e!==t)return r;const n=r.paddingBox.top-t.scrollTop,s=r.paddingBox.left-t.scrollLeft,a=n+t.scrollHeight,i=s+t.scrollWidth,c=er({top:n,right:i,bottom:a,left:s},r.border);return tr({borderBox:c,margin:r.margin,border:r.border,padding:r.padding})};var bc=({ref:e,descriptor:t,env:r,windowScroll:n,direction:s,isDropDisabled:a,isCombineEnabled:i,shouldClipSubject:l})=>{const c=r.closestScrollable,p=fc(e,c),m=wt(p,n),d=(()=>{if(!c)return null;const u=yn(c),b={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:u,page:wt(u,n),scroll:Zt(c),scrollSize:b,shouldClipSubject:l}})();return mc({descriptor:t,isEnabled:!a,isCombineEnabled:i,isFixedOnPage:r.isFixedOnPage,direction:s,client:p,page:m,closest:d})};const xc={passive:!1},hc={passive:!0};var rn=e=>e.shouldPublishImmediately?xc:hc;const ft=e=>e&&e.env.closestScrollable||null;function yc(e){const t=h.useRef(null),r=At(Tt),n=xr("droppable"),{registry:s,marshal:a}=r,i=os(e),l=R(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=h.useRef(l),p=R(()=>F((w,A)=>{t.current||y();const N={x:w,y:A};a.updateDroppableScroll(l.id,N)}),[l.id,a]),m=j(()=>{const w=t.current;return!w||!w.env.closestScrollable?W:Zt(w.env.closestScrollable)},[]),d=j(()=>{const w=m();p(w.x,w.y)},[m,p]),g=R(()=>Ze(d),[d]),u=j(()=>{const w=t.current,A=ft(w);if(w&&A||y(),w.scrollOptions.shouldPublishImmediately){d();return}g()},[g,d]),b=j((w,A)=>{t.current&&y();const N=i.current,B=N.getDroppableRef();B||y();const O=gc(B),H={ref:B,descriptor:l,env:O,scrollOptions:A};t.current=H;const T=bc({ref:B,descriptor:l,env:O,windowScroll:w,direction:N.direction,isDropDisabled:N.isDropDisabled,isCombineEnabled:N.isCombineEnabled,shouldClipSubject:!N.ignoreContainerClipping}),E=O.closestScrollable;return E&&(E.setAttribute(Kr.contextId,r.contextId),E.addEventListener("scroll",u,rn(H.scrollOptions))),T},[r.contextId,l,u,i]),x=j(()=>{const w=t.current,A=ft(w);return w&&A||y(),Zt(A)},[]),f=j(()=>{const w=t.current;w||y();const A=ft(w);t.current=null,A&&(g.cancel(),A.removeAttribute(Kr.contextId),A.removeEventListener("scroll",u,rn(w.scrollOptions)))},[u,g]),v=j(w=>{const A=t.current;A||y();const N=ft(A);N||y(),N.scrollTop+=w.y,N.scrollLeft+=w.x},[]),S=R(()=>({getDimensionAndWatchScroll:b,getScrollWhileDragging:x,dragStopped:f,scroll:v}),[f,b,x,v]),k=R(()=>({uniqueId:n,descriptor:l,callbacks:S}),[S,l,n]);Z(()=>(c.current=k.descriptor,s.droppable.register(k),()=>{t.current&&f(),s.droppable.unregister(k)}),[S,l,f,k,a,s.droppable]),Z(()=>{t.current&&a.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,a]),Z(()=>{t.current&&a.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,a])}function Ut(){}const nn={width:0,height:0,margin:So},vc=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>e||r==="close"?nn:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},Nc=({isAnimatingOpenOnMount:e,placeholder:t,animate:r})=>{const n=vc({isAnimatingOpenOnMount:e,placeholder:t,animate:r});return{display:t.display,boxSizing:"border-box",width:n.width,height:n.height,marginTop:n.margin.top,marginRight:n.margin.right,marginBottom:n.margin.bottom,marginLeft:n.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:r!=="none"?Xe.placeholder:null}},wc=e=>{const t=h.useRef(null),r=j(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:n,onTransitionEnd:s,onClose:a,contextId:i}=e,[l,c]=h.useState(e.animate==="open");h.useEffect(()=>l?n!=="open"?(r(),c(!1),Ut):t.current?Ut:(t.current=setTimeout(()=>{t.current=null,c(!1)}),r):Ut,[n,l,r]);const p=j(d=>{d.propertyName==="height"&&(s(),n==="close"&&a())},[n,a,s]),m=Nc({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return L.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":i,onTransitionEnd:p,ref:e.innerRef})};var Ic=L.memo(wc);class Dc extends L.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,r){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:r.isVisible?{isVisible:!0,data:r.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const jc=e=>{const t=h.useContext(Tt);t||y();const{contextId:r,isMovementAllowed:n}=t,s=h.useRef(null),a=h.useRef(null),{children:i,droppableId:l,type:c,mode:p,direction:m,ignoreContainerClipping:d,isDropDisabled:g,isCombineEnabled:u,snapshot:b,useClone:x,updateViewportMaxScroll:f,getContainerForClone:v}=e,S=j(()=>s.current,[]),k=j((E=null)=>{s.current=E},[]);j(()=>a.current,[]);const w=j((E=null)=>{a.current=E},[]),A=j(()=>{n()&&f({maxScroll:Qn()})},[n,f]);yc({droppableId:l,type:c,mode:p,direction:m,isDropDisabled:g,isCombineEnabled:u,ignoreContainerClipping:d,getDroppableRef:S});const N=R(()=>L.createElement(Dc,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:E,data:G,animate:ue})=>L.createElement(Ic,{placeholder:G,onClose:E,innerRef:w,animate:ue,contextId:r,onTransitionEnd:A})),[r,A,e.placeholder,e.shouldAnimatePlaceholder,w]),B=R(()=>({innerRef:k,placeholder:N,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":r}}),[r,l,N,k]),O=x?x.dragging.draggableId:null,H=R(()=>({droppableId:l,type:c,isUsingCloneFor:O}),[l,O,c]);function T(){if(!x)return null;const{dragging:E,render:G}=x,ue=L.createElement(fs,{draggableId:E.draggableId,index:E.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(Y,Ge)=>G(Y,Ge,E));return Ls.createPortal(ue,v())}return L.createElement(yr.Provider,{value:H},i(B,b),T())};function Sc(){return document.body||y(),document.body}const sn={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:Sc},ys=e=>{let t={...e},r;for(r in sn)e[r]===void 0&&(t={...t,[r]:sn[r]});return t},qt=(e,t)=>e===t.droppable.type,on=(e,t)=>t.draggables[e.draggable.id],Cc=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},r=F(a=>({draggableId:a.id,type:a.type,source:{index:a.index,droppableId:a.droppableId}})),n=F((a,i,l,c,p,m)=>{const d=p.descriptor.id;if(p.descriptor.droppableId===a){const b=m?{render:m,dragging:r(p.descriptor)}:null,x={isDraggingOver:l,draggingOverWith:l?d:null,draggingFromThisWith:d,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!1,snapshot:x,useClone:b}}if(!i)return t;if(!c)return e;const u={isDraggingOver:l,draggingOverWith:d,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:p.placeholder,shouldAnimatePlaceholder:!0,snapshot:u,useClone:null}});return(a,i)=>{const l=ys(i),c=l.droppableId,p=l.type,m=!l.isDropDisabled,d=l.renderClone;if(ot(a)){const g=a.critical;if(!qt(p,g))return t;const u=on(g,a.dimensions),b=Q(a.impact)===c;return n(c,m,b,b,u,d)}if(a.phase==="DROP_ANIMATING"){const g=a.completed;if(!qt(p,g.critical))return t;const u=on(g.critical,a.dimensions);return n(c,m,gs(g.result)===c,Q(g.impact)===c,u,d)}if(a.phase==="IDLE"&&a.completed&&!a.shouldFlush){const g=a.completed;if(!qt(p,g.critical))return t;const u=Q(g.impact)===c,b=!!(g.impact.at&&g.impact.at.type==="COMBINE"),x=g.critical.droppable.id===c;return u?b?e:t:x?e:t}return t}},Ac={updateViewportMaxScroll:_a},Ec=mn(Cc,Ac,(e,t,r)=>({...ys(r),...e,...t}),{context:br,areStatePropsEqual:ps})(jc),kc=({cases:e,statuses:t,onUpdateStatus:r})=>{const n=dn(),s=i=>{const{destination:l,source:c,draggableId:p}=i;if(!l||l.droppableId===c.droppableId&&l.index===c.index)return;const m=l.droppableId;console.log(`Moving ${p} to ${m}`),r(p,m)},a=t.reduce((i,l)=>(i[l]=e.filter(c=>c.status===l),i),{});return o.jsx(zl,{onDragEnd:s,children:o.jsx("div",{className:"flex overflow-x-auto pb-4 gap-4 h-[calc(100vh-200px)] items-start",children:t.map(i=>{var l;return o.jsxs("div",{className:"min-w-[280px] w-[300px] flex flex-col h-full bg-gray-50/50 dark:bg-gray-800/50 rounded-xl border border-gray-100 dark:border-gray-700 backdrop-blur-sm",children:[o.jsxs("div",{className:"p-3 font-bold text-gray-700 dark:text-gray-200 flex justify-between items-center bg-white/50 dark:bg-gray-900/50 rounded-t-xl border-b border-gray-100 dark:border-gray-700 sticky top-0 z-10",children:[o.jsx("span",{children:i}),o.jsx("span",{className:"bg-gray-200 dark:bg-gray-700 text-xs px-2 py-0.5 rounded-full text-gray-600 dark:text-gray-300",children:((l=a[i])==null?void 0:l.length)||0})]}),o.jsx(Ec,{droppableId:i,children:(c,p)=>{var m;return o.jsxs("div",{...c.droppableProps,ref:c.innerRef,className:`flex-1 p-2 overflow-y-auto scrollbar-hide transition-colors ${p.isDraggingOver?"bg-blue-50/50 dark:bg-blue-900/10":""}`,children:[(m=a[i])==null?void 0:m.map((d,g)=>o.jsx(lc,{draggableId:d.caseId,index:g,children:(u,b)=>o.jsx("div",{ref:u.innerRef,...u.draggableProps,...u.dragHandleProps,style:{...u.draggableProps.style},className:"mb-3",onClick:()=>n(`/case/${d.caseId}`),children:o.jsxs(bt.div,{initial:!1,animate:b.isDragging?{scale:1.05,rotate:2,boxShadow:"0px 10px 20px rgba(0,0,0,0.1)"}:{scale:1,rotate:0,boxShadow:"0px 2px 5px rgba(0,0,0,0.05)"},className:`bg-white dark:bg-gray-800 p-3 rounded-lg border border-gray-100 dark:border-gray-700 hover:border-blue-300 dark:hover:border-blue-500 transition-colors group cursor-grab active:cursor-grabbing ${d.isNew?"ring-2 ring-red-500/20":""}`,children:[o.jsxs("div",{className:"flex justify-between items-start mb-2",children:[o.jsx("span",{className:"font-bold text-gray-800 dark:text-gray-100",children:d.customerName}),d.isNew&&o.jsx("span",{className:"text-[10px] bg-red-100 text-red-600 px-1.5 rounded",children:"NEW"})]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-500 dark:text-gray-400 mb-1",children:[o.jsx(Ye,{size:12,className:"mr-1"})," ",d.phone]}),o.jsxs("div",{className:"flex items-center text-xs text-gray-400 dark:text-gray-500 justify-between mt-2 pt-2 border-t border-gray-50 dark:border-gray-700",children:[o.jsx("span",{children:d.caseType}),o.jsx("span",{children:d.managerName||"-"})]}),d.secondaryStatus&&o.jsx("div",{className:"mt-2 text-[10px] bg-gray-50 dark:bg-gray-900 text-gray-600 dark:text-gray-400 px-2 py-1 rounded text-center truncate",children:d.secondaryStatus})]})})},d.caseId)),c.placeholder]})}})]},i)})})})};function Pc({isOpen:e,onClose:t,allStatuses:r,hiddenStatuses:n,onToggleStatus:s}){if(!e)return null;const a=()=>{r.forEach(l=>{n.includes(l)&&s(l)})},i=()=>{r.forEach(l=>{n.includes(l)||s(l)})};return o.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm p-4 animate-fade-in",children:o.jsxs("div",{className:"bg-white dark:bg-gray-800 w-full max-w-md rounded-2xl shadow-xl border border-gray-100 dark:border-gray-700 overflow-hidden flex flex-col max-h-[90vh]",children:[o.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50",children:[o.jsxs("h3",{className:"font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[o.jsx(oo,{className:"text-gray-500",size:20})," "]}),o.jsx("button",{onClick:t,className:"p-2 hover:bg-gray-200 dark:hover:bg-gray-700 rounded-full transition-colors",children:o.jsx(ht,{size:20,className:"text-gray-500"})})]}),o.jsxs("div",{className:"p-4 bg-blue-50 dark:bg-blue-900/20 text-xs text-blue-800 dark:text-blue-300",children:[o.jsxs("p",{children:["    ",o.jsx("b",{children:"' '"}),"  ."]}),o.jsx("p",{className:"mt-1 opacity-75",children:"(,       .)"})]}),o.jsxs("div",{className:"flex-1 overflow-y-auto p-4 custom-scrollbar",children:[o.jsxs("div",{className:"flex gap-2 mb-4",children:[o.jsx("button",{onClick:a,className:"flex-1 py-2 text-xs font-bold bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:" "}),o.jsx("button",{onClick:i,className:"flex-1 py-2 text-xs font-bold bg-gray-100 hover:bg-gray-200 dark:bg-gray-700 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded-lg transition-colors",children:" "})]}),o.jsx("div",{className:"grid grid-cols-1 gap-2",children:r.map(l=>{const c=n.includes(l),p=!c;return o.jsxs("label",{className:`flex items-center justify-between p-3 rounded-lg border cursor-pointer transition-all ${p?"bg-white border-blue-200 shadow-sm ring-1 ring-blue-100 dark:bg-gray-700 dark:border-blue-500/50":"bg-gray-50 border-gray-100 text-gray-400 dark:bg-gray-800 dark:border-gray-700"}`,children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:`w-5 h-5 rounded flex items-center justify-center border transition-colors ${p?"bg-blue-500 border-blue-600 text-white":"bg-white border-gray-300 dark:bg-gray-800 dark:border-gray-600"}`,children:p&&o.jsx(Qe,{size:14,strokeWidth:3})}),o.jsx("span",{className:`font-medium ${p?"text-gray-800 dark:text-white":"text-gray-400"}`,children:l})]}),o.jsx("input",{type:"checkbox",className:"hidden",checked:p,onChange:()=>s(l)}),c&&o.jsx("span",{className:"text-xs text-red-400 font-bold",children:""})]},l)})})]}),o.jsx("div",{className:"p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50/50 dark:bg-gray-900/50 flex justify-end",children:o.jsx("button",{onClick:t,className:"px-6 py-2.5 bg-blue-600 hover:bg-blue-700 text-white font-bold rounded-xl shadow-lg shadow-blue-500/20 transition-all active:scale-95",children:""})})]})})}function Rc({isOpen:e,onClose:t,onSuccess:r,partners:n,inboundPaths:s}){var ae;const{showToast:a}=un(),[i,l]=h.useState("excel"),[c,p]=h.useState(!1),[m,d]=h.useState([]),[g,u]=h.useState([]);h.useRef(null);const[b,x]=h.useState(null),[f,v]=h.useState(null),[S,k]=h.useState(((ae=n==null?void 0:n[0])==null?void 0:ae.partnerId)||"");h.useRef(null);const[w,A]=h.useState(()=>{var _;const D=sessionStorage.getItem("lm_manual_draft"),P={customerName:"",phone:"",partnerId:((_=n==null?void 0:n[0])==null?void 0:_.partnerId)||"",inboundPath:(s==null?void 0:s[0])||"",caseType:"",preInfo:""};if(D)try{return{...P,...JSON.parse(D)}}catch{return P}return P}),[N,B]=h.useState(void 0);if(L.useEffect(()=>{(w.customerName||w.phone||w.preInfo)&&sessionStorage.setItem("lm_manual_draft",JSON.stringify(w))},[w]),L.useEffect(()=>{e&&pn().then(d)},[e]),L.useEffect(()=>{n&&n.length>0&&!S&&(k(n[0].partnerId),A(D=>({...D,partnerId:n[0].partnerId}))),n&&n.length>0&&!w.partnerId&&A(D=>({...D,partnerId:n[0].partnerId})),s&&s.length>0&&!w.inboundPath&&A(D=>({...D,inboundPath:s[0]}))},[n,s]),!e)return null;if(!n||!Array.isArray(n)||!s||!Array.isArray(s))return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl p-8 flex flex-col items-center gap-4",children:[o.jsx(ut,{className:"animate-spin text-blue-600",size:32}),o.jsx("p",{className:"text-gray-600 font-medium",children:"   ..."}),o.jsx("button",{onClick:t,className:"text-sm text-gray-400 hover:text-gray-600 underline",children:""})]})});const O=()=>{const D=pt.json_to_sheet([{caseType:"",inboundPath:"",phone:"010-1234-5678",customerName:"",preInfo1:" 2,000~4,000",preInfo2:"9 30",preInfo3:""},{caseType:"",inboundPath:"",phone:"010-9876-5432",customerName:"",preInfo1:"",preInfo2:" 1",preInfo3:""}]),P=pt.book_new();pt.book_append_sheet(P,D,"CaseTemplate"),Hs(P,"__.xlsx")},H=D=>{var V;const P=(V=D.target.files)==null?void 0:V[0];if(!P)return;const _=new FileReader;_.onload=$e=>{var ie;try{const ve=(ie=$e.target)==null?void 0:ie.result,ee=Vs(ve,{type:"array"}),Ne=ee.SheetNames[0],de=ee.Sheets[Ne],ge=pt.sheet_to_json(de).map($=>{const Ce=String($.phone||$.||""),me=String($.customerName||$.||""),U=String($.caseType||$.||""),Ae=String($.inboundPath||$.||""),we=[],Ee=$.preInfo||$.;Ee&&String(Ee).trim()&&we.push(String(Ee).trim());for(let ke=1;ke<=10;ke++){const Fe=$[`preInfo${ke}`]||$[`${ke}`];Fe&&String(Fe).trim()&&we.push(String(Fe).trim())}const Mt=we.join(`
`),lt=Nr(Ce),Lt=Ar(lt,m);return{customerName:me,phone:lt,caseType:U,inboundPath:Ae,preInfo:Mt,isNew:!0,isViewed:!1,managerName:localStorage.getItem("managerName")||"",duplicateInfo:Lt}});u(ge)}catch(ve){console.error(ve),D.target&&(D.target.value=""),a(`   : ${ve.message}`,"error")}},_.readAsArrayBuffer(P)},T=async()=>{if(g.length===0)return;const D=g.filter(_=>!_.duplicateInfo),P=g.length-D.length;if(D.length===0){a("    .","error");return}p(!0);try{await Ds(D);let _=`${D.length} .`;P>0&&(_+=` ( ${P} )`),a(_),r(),t()}catch{a("    .","error")}finally{p(!1)}},E=async D=>{var _;const P=(_=D.target.files)==null?void 0:_[0];P&&(x(P),v(null))},G=async()=>{var D,P,_;if(b){p(!0);try{const V=await Us(b),$e=b.type||"image/png",ie="AIzaSyAcY0S1fvge0FtV_GsmEo5u15vdsau4sBU",ee=new qs(ie).getGenerativeModel({model:"gemini-flash-latest"}),Ne=n.find(U=>U.partnerId===S),de=(Ne==null?void 0:Ne.ocrPromptTemplate)||`
        Extract the following information from the provided document image/pdf.
        Return ONLY a raw JSON object (no markdown, no backticks).
        Fields:
        - customerName: (string) Name of the client
        - phone: (string) Phone number
        - summary: (string) specific details found in the doc (debt amount, job, etc)

        If a field is not found, use empty string.
      `;let te=0;const ge=3;let $="";for(;te<ge;)try{$=(await ee.generateContent([{inlineData:{mimeType:$e,data:V}},de])).response.text();break}catch(U){if(te++,console.warn(`OCR Attempt ${te} failed:`,U),((D=U.message)!=null&&D.includes("429")||(P=U.message)!=null&&P.includes("503"))&&te<ge){const Ae=Math.pow(2,te)*1e3+Math.random()*500;await new Promise(we=>setTimeout(we,Ae));continue}throw U}const Ce=$.replace(/```json/g,"").replace(/```/g,"").trim(),me=JSON.parse(Ce);v({customerName:me.customerName,phone:me.phone,preInfo:me.summary,isNew:!0,isViewed:!1,caseType:"",inboundPath:"OCR",partnerId:S,managerName:localStorage.getItem("managerName")||""})}catch(V){console.error(V),(_=V.message)!=null&&_.includes("API Key")?a("Google API Key  .","error"):a("  .   .","error")}finally{p(!1)}}},ue=async()=>{if(f){p(!0);try{await wr(f),a(" ."),r(),t()}catch{a(" ","error")}finally{p(!1)}}},Y=(D,P)=>{if(D==="phone"){P=Nr(P);const _=Ar(P,m);B(_)}A(_=>({..._,[D]:P}))},Ge=async()=>{var D;if(!w.customerName||!w.phone){a("  .","error");return}p(!0);try{await wr({...w,isNew:!0,isViewed:!1}),a(" ."),sessionStorage.removeItem("lm_manual_draft"),A({customerName:"",phone:"",partnerId:((D=n==null?void 0:n[0])==null?void 0:D.partnerId)||"",inboundPath:(s==null?void 0:s[0])||"",caseType:"",preInfo:""}),r(),t()}catch{a(" ","error")}finally{p(!1)}};return o.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4 backdrop-blur-sm",children:o.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] overflow-hidden flex flex-col",children:[o.jsxs("div",{className:"p-4 border-b flex justify-between items-center bg-gray-50",children:[o.jsxs("h2",{className:"text-lg font-bold text-gray-800 flex items-center gap-2",children:[o.jsx(vt,{size:20,className:"text-blue-600"})," / "]}),o.jsx("button",{onClick:t,className:"text-gray-400 hover:text-gray-600 transition-colors",children:o.jsx(ht,{size:24})})]}),o.jsxs("div",{className:"flex border-b",children:[o.jsx("button",{onClick:()=>l("excel"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${i==="excel"?"border-blue-600 text-blue-600 bg-blue-50/50":"border-transparent text-gray-500 hover:bg-gray-50"}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(Js,{size:16}),"   "]})}),o.jsx("button",{onClick:()=>l("ocr"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${i==="ocr"?"border-pink-600 text-pink-600 bg-pink-50/50":"border-transparent text-gray-500 hover:bg-gray-50"}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(Rr,{size:16})," /PDF  (AI)"]})}),o.jsx("button",{onClick:()=>l("manual"),className:`flex-1 py-3 text-sm font-medium border-b-2 transition-colors ${i==="manual"?"border-green-600 text-green-600 bg-green-50/50":"border-transparent text-gray-500 hover:bg-gray-50"}`,children:o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx(go,{size:16}),"   "]})})]}),o.jsxs("div",{className:"p-6 overflow-y-auto flex-1",children:[i==="excel"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg text-sm text-blue-800 border border-blue-100 dark:bg-blue-900/20 dark:text-blue-200 dark:border-blue-800",children:[o.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[o.jsx(zs,{size:16}),"  "]}),o.jsxs("ol",{className:"list-decimal list-inside space-y-1 ml-1 opacity-90",children:[o.jsx("li",{children:"  ."}),o.jsx("li",{children:"    . (  )"}),o.jsx("li",{children:"       ."}),o.jsx("li",{children:"[ ]    ."})]})]}),o.jsxs("div",{className:"flex gap-4",children:[o.jsxs("button",{onClick:O,className:"flex-1 py-3 border border-gray-300 rounded-lg flex items-center justify-center gap-2 text-gray-700 hover:bg-gray-50 font-medium transition-colors",children:[o.jsx(Xs,{size:18}),"  "]}),o.jsxs("div",{className:"flex-1 relative",children:[o.jsx("input",{type:"file",accept:".xlsx, .xls",onChange:H,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),o.jsxs("button",{className:"w-full h-full py-3 bg-blue-600 text-white rounded-lg flex items-center justify-center gap-2 hover:bg-blue-700 font-bold shadow-md transition-colors",children:[o.jsx(vt,{size:18}),"   "]})]})]}),g.length>0&&o.jsxs("div",{className:"border rounded-lg overflow-hidden",children:[o.jsxs("div",{className:"bg-gray-100 px-4 py-2 text-sm font-bold text-gray-600 border-b flex justify-between",children:[o.jsxs("span",{children:[" (",g.length,")"]}),o.jsx("button",{onClick:()=>u([]),className:"text-red-500 text-xs hover:underline",children:""})]}),o.jsx("div",{className:"max-h-48 overflow-y-auto",children:o.jsxs("table",{className:"w-full text-sm text-left",children:[o.jsx("thead",{className:"bg-gray-50 sticky top-0",children:o.jsxs("tr",{children:[o.jsx("th",{className:"p-2",children:""}),o.jsx("th",{className:"p-2",children:""}),o.jsx("th",{className:"p-2",children:""})]})}),o.jsx("tbody",{className:"divide-y",children:g.map((D,P)=>o.jsxs("tr",{className:D.duplicateInfo?"bg-red-50":"",children:[o.jsxs("td",{className:"p-2",children:[D.customerName,D.duplicateInfo&&o.jsx("span",{className:"text-red-600 text-xs ml-1 font-bold",children:"()"})]}),o.jsx("td",{className:"p-2 text-gray-500",children:o.jsxs("div",{className:"flex flex-col",children:[o.jsx("span",{children:D.phone}),D.duplicateInfo&&o.jsxs("span",{className:"text-[10px] text-red-500",children:[": ",D.duplicateInfo.managerName," (",D.duplicateInfo.status,")"]})]})}),o.jsx("td",{className:"p-2 text-xs",children:D.caseType})]},P))})]})})]}),g.length>0&&o.jsxs("button",{onClick:T,disabled:c,className:"w-full py-3 bg-green-600 text-white rounded-lg font-bold text-lg hover:bg-green-700 shadow-md flex items-center justify-center gap-2 disabled:opacity-50",children:[c?o.jsx(ut,{className:"animate-spin"}):o.jsx(Qe,{size:20}),g.length,"  "]})]}),i==="ocr"&&o.jsxs("div",{className:"space-y-6",children:[o.jsxs("div",{className:"bg-pink-50 p-4 rounded-lg text-sm text-pink-800 border border-pink-100",children:[o.jsxs("h4",{className:"font-bold mb-2 flex items-center gap-2",children:[o.jsx(yt,{size:16})," AI  "]}),o.jsx("p",{className:"opacity-90",children:"   PDF  , Gemini AI    ."})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"  (OCR )"}),o.jsx("select",{className:"w-full p-2 border rounded-md text-sm",value:S,onChange:D=>k(D.target.value),children:n.map(D=>o.jsx("option",{value:D.partnerId,children:D.name},D.partnerId))})]}),o.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-xl p-8 text-center transition-colors hover:border-pink-400 hover:bg-pink-50 group cursor-pointer relative",children:[o.jsx("input",{type:"file",accept:"image/*, application/pdf",onChange:E,className:"absolute inset-0 w-full h-full opacity-0 cursor-pointer"}),o.jsxs("div",{className:"flex flex-col items-center gap-3 text-gray-500 group-hover:text-pink-600",children:[o.jsx("div",{className:"w-12 h-12 rounded-full bg-gray-100 flex items-center justify-center group-hover:bg-pink-100 transition-colors",children:o.jsx(Rr,{size:24})}),o.jsx("p",{className:"font-medium text-lg",children:"   "}),o.jsx("p",{className:"text-xs text-gray-400",children:" : JPG, PNG, PDF"})]})]}),b&&o.jsxs("div",{className:"flex items-center justify-between bg-white border p-3 rounded-lg shadow-sm",children:[o.jsx("span",{className:"text-sm font-medium truncat max-w-[200px]",children:b.name}),o.jsxs("div",{className:"flex gap-2",children:[o.jsxs("button",{onClick:G,disabled:c,className:"px-4 py-1.5 bg-pink-600 text-white rounded text-sm font-bold hover:bg-pink-700 disabled:opacity-50 flex items-center gap-2",children:[c?o.jsx(ut,{size:14,className:"animate-spin"}):o.jsx(yt,{size:14})," "]}),o.jsx("button",{onClick:()=>{x(null),v(null)},className:"p-1.5 text-gray-400 hover:bg-gray-100 rounded",children:o.jsx(ht,{size:16})})]})]}),f&&o.jsxs("div",{className:"bg-white border rounded-lg p-4 space-y-3 shadow-sm animate-in slide-in-from-bottom-2",children:[o.jsx("h4",{className:"font-bold text-gray-800 border-b pb-2",children:"  "}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:""}),o.jsx("input",{className:"w-full p-2 border rounded text-sm font-bold text-gray-800 bg-gray-50",value:f.customerName,onChange:D=>v({...f,customerName:D.target.value})})]}),o.jsxs("div",{children:[o.jsx("label",{className:"text-xs text-gray-500",children:""}),o.jsx("input",{className:"w-full p-2 border rounded text-sm font-bold text-gray-800 bg-gray-50",value:f.phone,onChange:D=>v({...f,phone:D.target.value})})]}),o.jsxs("div",{className:"col-span-2",children:[o.jsx("label",{className:"text-xs text-gray-500",children:"  ()"}),o.jsx("textarea",{className:"w-full p-2 border rounded text-sm bg-gray-50 h-20",value:f.preInfo,onChange:D=>v({...f,preInfo:D.target.value})})]})]}),o.jsxs("button",{onClick:ue,disabled:c,className:"w-full py-3 bg-pink-600 text-white rounded-lg font-bold hover:bg-pink-700 shadow-md flex items-center justify-center gap-2",children:[o.jsx(Qe,{size:18}),"   "]})]})]}),i==="manual"&&o.jsxs("div",{className:"space-y-5",children:[o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),o.jsx("select",{className:"w-full p-2 border rounded-md text-sm",value:w.partnerId,onChange:D=>Y("partnerId",D.target.value),children:n.map(D=>o.jsx("option",{value:D.partnerId,children:D.name},D.partnerId))})]}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:""}),o.jsx("select",{className:"w-full p-2 border rounded-md text-sm",value:w.inboundPath,onChange:D=>Y("inboundPath",D.target.value),children:s.map(D=>o.jsx("option",{value:D,children:D},D))})]})]}),o.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:" ",value:w.customerName,onChange:D=>Y("customerName",D.target.value)})]}),o.jsxs("div",{children:[o.jsxs("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:[" ",o.jsx("span",{className:"text-red-500",children:"*"})]}),o.jsx("input",{className:"w-full p-2 border rounded-md text-sm focus:ring-2 focus:ring-green-500 outline-none",placeholder:"010-0000-0000",value:w.phone,onChange:D=>Y("phone",D.target.value)})]})]}),N&&o.jsx("div",{className:"mb-2 animate-pulse",children:o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 text-sm flex flex-col gap-1",children:[o.jsxs("div",{className:"flex items-center gap-2 text-red-700 font-bold",children:[o.jsx("span",{className:"text-lg",children:""}),"   !"]}),o.jsxs("div",{className:"text-gray-600 pl-7 text-xs",children:[o.jsxs("p",{children:[" : ",o.jsx("b",{children:N.customerName})]}),o.jsxs("p",{children:[": ",o.jsx("b",{children:N.managerName})]}),o.jsxs("p",{children:[" : ",o.jsx("span",{className:"font-medium text-red-600",children:N.status})]})]})]})}),o.jsxs("div",{children:[o.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1",children:"  ()"}),o.jsx("textarea",{className:"w-full p-2 border rounded-md text-sm h-24 focus:ring-2 focus:ring-green-500 outline-none",placeholder:"    ...",value:w.preInfo,onChange:D=>Y("preInfo",D.target.value)})]}),o.jsxs("button",{onClick:Ge,disabled:c,className:"w-full py-3 bg-green-600 text-white rounded-lg font-bold text-lg hover:bg-green-700 shadow-md flex items-center justify-center gap-2 mt-4",children:[c?o.jsx(ut,{className:"animate-spin"}):o.jsx(Qs,{size:20})," "]})]})]})]})})}const Oc=({totalItems:e,newCaseCount:t,showNewOnly:r,setShowNewOnly:n,overdueMissedCallCount:s,showOverdueMissedOnly:a,setShowOverdueMissedOnly:i,missedCallInterval:l,updateAvailable:c,newLeadsCount:p,onManualRefresh:m,onResetPage:d})=>o.jsxs("div",{className:"space-y-4",children:[t>0&&o.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 flex items-center justify-between animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-red-100 p-2 rounded-full",children:o.jsx(yt,{className:"text-red-600",size:20})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-red-800",children:["   ",t," !"]}),o.jsxs("p",{className:"text-sm text-red-600",children:["   ",o.jsx("br",{className:"block md:hidden"}),"  ."]})]})]}),o.jsxs("button",{onClick:()=>{n(!0),d()},className:"px-4 py-2 bg-red-600 text-white text-sm font-bold rounded-lg hover:bg-red-700 transition-colors shadow-sm whitespace-nowrap md:whitespace-normal",children:[o.jsx("span",{className:"hidden md:inline",children:""}),o.jsxs("span",{className:"md:hidden flex flex-col items-center leading-tight",children:[o.jsx("span",{children:""}),o.jsx("span",{children:""})]})]}),r&&o.jsx("button",{onClick:()=>{n(!1),d()},className:"absolute top-2 right-2 text-red-400 hover:text-red-600",children:o.jsx(ht,{size:16})})]}),s>0&&!a&&o.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4 flex items-center justify-between animate-fade-in",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("div",{className:"bg-orange-100 p-2 rounded-full",children:o.jsx(Ye,{className:"text-orange-600",size:20})}),o.jsxs("div",{children:[o.jsxs("h3",{className:"font-bold text-orange-800",children:["  ",s,""]}),o.jsxs("p",{className:"text-sm text-orange-600",children:["   ",l," ."]})]})]}),o.jsx("button",{onClick:()=>{i(!0),n(!1),d()},className:"px-4 py-2 bg-orange-600 text-white text-sm font-bold rounded-lg hover:bg-orange-700 transition-colors shadow-sm whitespace-nowrap",children:""})]}),c&&o.jsxs("div",{className:"flex items-center justify-between bg-blue-50 border border-blue-200 p-3 rounded-lg animate-fade-in shadow-sm cursor-pointer hover:bg-blue-100 transition-colors",onClick:m,children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("div",{className:"bg-blue-100 p-1.5 rounded-full",children:o.jsx(bn,{className:"text-blue-600 animate-bounce",size:16})}),o.jsx("span",{className:"text-sm font-bold text-blue-800",children:p>0?`   ${p} ( )`:"  . ( )"})]}),o.jsx("button",{className:"px-3 py-1.5 bg-blue-600 hover:bg-blue-700 text-white text-xs font-bold rounded shadow-sm transition-colors",children:""})]}),o.jsxs("div",{className:"flex justify-between items-center",children:[o.jsxs("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white flex items-center gap-2",children:[" ",r&&o.jsxs("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded-full border border-red-200 cursor-pointer hover:bg-red-200",onClick:()=>{n(!1),d()},children:[":    ",o.jsx("span",{className:"ml-1 font-bold",children:""})]}),a&&o.jsxs("span",{className:"text-xs bg-orange-100 text-orange-600 px-2 py-0.5 rounded-full border border-orange-200 cursor-pointer hover:bg-orange-200",onClick:()=>{i(!1),d()},children:[":   ",o.jsx("span",{className:"ml-1 font-bold",children:""})]})]}),o.jsxs("span",{className:"text-sm text-gray-500 dark:text-gray-400 font-medium",children:[" ",e,""]})]})]}),Tc=({search:e,setSearch:t,dateFilterStart:r,setDateFilterStart:n,dateFilterEnd:s,setDateFilterEnd:a,partnerFilter:i,setPartnerFilter:l,inboundPathFilter:c,setInboundPathFilter:p,statusFilters:m,setStatusFilters:d,sortOrder:g,setSortOrder:u,layoutMode:b,setLayoutMode:x,viewMode:f,setViewMode:v,partners:S,inboundPaths:k,statuses:w,onOpenImportModal:A,onOpenStatusVisibilityModal:N,onResetPage:B})=>{const[O,H]=L.useState(!1),T=E=>G=>{E(G.target.value),B()};return o.jsxs("div",{className:"flex flex-col xl:flex-row justify-start items-start xl:items-center gap-2 bg-white dark:bg-gray-800 p-4 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700",children:[o.jsxs("div",{className:"flex w-full xl:w-auto gap-2",children:[o.jsxs("div",{className:"relative flex-1",children:[o.jsx(Ks,{className:"absolute left-3 top-2.5 text-gray-400",size:18}),o.jsx("input",{type:"text",placeholder:"   ",className:"pl-10 pr-4 py-2 border rounded-lg text-sm w-full xl:w-56 focus:outline-none focus:ring-2 focus:ring-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:text-white dark:placeholder-gray-400",value:e,onChange:T(t)})]}),o.jsx("button",{type:"button",onClick:E=>{E.preventDefault(),A()},className:"xl:hidden flex items-center justify-center p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm shrink-0",children:o.jsx(vt,{size:18})})]}),o.jsxs("div",{className:"flex flex-wrap gap-1 w-full xl:w-auto items-center",children:[o.jsxs("div",{className:"flex items-center bg-gray-50 border rounded-lg p-1 dark:bg-gray-700 dark:border-gray-600",children:[o.jsx("input",{type:"date",className:"bg-transparent text-sm p-1 outline-none text-gray-600 dark:text-white",value:r,onChange:T(n)}),o.jsx("span",{className:"text-gray-400 mx-1",children:"~"}),o.jsx("input",{type:"date",className:"bg-transparent text-sm p-1 outline-none text-gray-600 dark:text-white",value:s,onChange:T(a)})]}),o.jsxs("div",{className:"relative flex-1 min-w-[100px]",children:[o.jsx(Zs,{className:"absolute left-2.5 top-2.5 text-gray-400",size:16}),o.jsxs("select",{className:"w-full border p-2 pl-8 rounded-lg text-sm bg-white appearance-none",value:i,onChange:T(l),children:[o.jsx("option",{value:"",children:" "}),S.map(E=>o.jsx("option",{value:E.partnerId,children:E.name},E.partnerId))]})]}),o.jsxs("div",{className:"relative flex-1 min-w-[100px]",children:[o.jsx(eo,{className:"absolute left-2.5 top-2.5 text-gray-400",size:16}),o.jsxs("select",{className:"w-full border p-2 pl-8 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white appearance-none",value:c,onChange:T(p),children:[o.jsx("option",{value:"",children:" "}),k.map(E=>o.jsx("option",{value:E,children:E},E))]})]}),o.jsxs("div",{className:"flex flex-wrap w-full xl:w-auto gap-1",children:[o.jsxs("div",{className:"flex flex-1 xl:contents min-w-[200px] gap-1",children:[o.jsxs("div",{className:"relative flex-1 min-w-[100px]",children:[o.jsxs("button",{type:"button",onClick:()=>H(!O),className:"w-full border p-2 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white text-left flex items-center justify-between",children:[o.jsx("span",{className:"truncate",children:m.length===0?" ":m.length===1?m[0]:`${m[0]}  ${m.length-1}`}),o.jsx(xn,{size:16,className:`ml-1 transition-transform ${O?"rotate-180":""}`})]}),O&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"fixed inset-0 z-40",onClick:()=>H(!1)}),o.jsxs("div",{className:"absolute top-full left-0 mt-1 w-full min-w-[160px] bg-white dark:bg-gray-700 border dark:border-gray-600 rounded-lg shadow-lg z-50 max-h-60 overflow-y-auto",children:[o.jsxs("button",{type:"button",onClick:()=>{d([]),B()},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center gap-2 ${m.length===0?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300":""}`,children:[m.length===0&&o.jsx(Qe,{size:14}),o.jsx("span",{className:m.length===0?"font-medium":"",children:" "})]}),o.jsx("div",{className:"border-t dark:border-gray-600"}),w.map(E=>o.jsxs("button",{type:"button",onClick:()=>{d(G=>G.includes(E)?G.filter(ue=>ue!==E):[...G,E]),B()},className:`w-full px-3 py-2 text-left text-sm hover:bg-gray-100 dark:hover:bg-gray-600 flex items-center gap-2 ${m.includes(E)?"bg-blue-50 dark:bg-blue-900 text-blue-700 dark:text-blue-300":""}`,children:[o.jsx("div",{className:`w-4 h-4 border rounded flex items-center justify-center ${m.includes(E)?"bg-blue-500 border-blue-500 text-white":"border-gray-300"}`,children:m.includes(E)&&o.jsx(Qe,{size:12})}),o.jsx("span",{children:E})]},E)),m.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("div",{className:"border-t dark:border-gray-600"}),o.jsx("button",{type:"button",onClick:()=>{d([]),B(),H(!1)},className:"w-full px-3 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900",children:"  "})]})]})]})]}),o.jsx("button",{onClick:N,className:"p-2 bg-white dark:bg-gray-700 text-gray-500 dark:text-gray-300 border border-gray-200 dark:border-gray-600 rounded-lg hover:bg-gray-50 dark:hover:bg-gray-600 transition-colors shadow-sm",title:"  ",children:o.jsx(js,{size:18})})]}),o.jsxs("div",{className:"flex flex-1 xl:contents min-w-[200px] gap-1 mt-1 xl:mt-0",children:[o.jsxs("div",{className:"relative flex-1 min-w-[120px]",children:[o.jsx(bn,{className:"absolute left-2.5 top-2.5 text-gray-400",size:16}),o.jsxs("select",{className:"w-full border p-2 pl-8 rounded-lg text-sm bg-white dark:bg-gray-700 dark:border-gray-600 dark:text-white appearance-none text-ellipsis",value:g,onChange:E=>u(E.target.value),children:[o.jsx("option",{value:"createdAt_desc",children:" "}),o.jsx("option",{value:"createdAt_asc",children:" "}),o.jsx("option",{value:"updatedAt_desc",children:" "}),o.jsx("option",{value:"updatedAt_asc",children:" "}),o.jsx("option",{value:"lastConsultation_desc",children:" "}),o.jsx("option",{value:"lastConsultation_asc",children:" "}),o.jsx("option",{value:"inboundPath_asc",children:""})]})]}),o.jsx("button",{type:"button",onClick:E=>{E.preventDefault(),A()},className:"hidden xl:flex items-center justify-center p-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors shadow-sm shrink-0",children:o.jsx(vt,{size:18})}),o.jsxs("div",{className:"bg-gray-100 dark:bg-gray-700 p-1 rounded-lg flex items-center gap-1",children:[o.jsx("button",{onClick:()=>x("list"),className:`p-1.5 rounded-md transition-all ${b==="list"?"bg-white dark:bg-gray-600 shadow-sm text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:" ",children:o.jsx(uo,{size:16})}),o.jsx("button",{onClick:()=>x("kanban"),className:`p-1.5 rounded-md transition-all ${b==="kanban"?"bg-white dark:bg-gray-600 shadow-sm text-blue-600":"text-gray-400 hover:text-gray-600"}`,title:"  ",children:o.jsx(lo,{size:16})})]}),o.jsx("button",{onClick:()=>v(f==="active"?"trash":"active"),className:`flex items-center justify-center p-2 rounded-lg transition-colors shadow-sm shrink-0 ${f==="trash"?"bg-red-600 text-white hover:bg-red-700":"bg-white border text-gray-600 hover:bg-gray-50"}`,title:f==="active"?" ":" ",children:f==="trash"?o.jsx(fn,{size:18}):o.jsx(Je,{size:18})})]})]})]}),f==="trash"&&o.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 mb-4 rounded-r-lg",children:o.jsxs("div",{className:"flex items-center",children:[o.jsx("div",{className:"flex-shrink-0",children:o.jsx(Je,{className:"h-5 w-5 text-red-500"})}),o.jsxs("div",{className:"ml-3",children:[o.jsx("p",{className:"text-sm text-red-700 font-bold",children:" ."}),o.jsx("p",{className:"text-xs text-red-600 mt-1",children:"  30    .     ."})]})]})})]})};function Re({trigger:e,content:t,delay:r=1e3,className:n="",mobileAlign:s="left",desktopAlign:a="center"}){const[i,l]=h.useState(!1),c=h.useRef(null),p=h.useRef(null),m=h.useRef(null),d=()=>{p.current&&(clearTimeout(p.current),p.current=null),!i&&(c.current||(c.current=setTimeout(()=>{l(!0)},r)))},g=()=>{c.current&&(clearTimeout(c.current),c.current=null),p.current=setTimeout(()=>{l(!1)},300)};h.useEffect(()=>()=>{c.current&&clearTimeout(c.current),p.current&&clearTimeout(p.current)},[]);const u=()=>{const f=s==="right"?"right-0":"left-0";let v="";return a==="center"?v="md:left-1/2 md:-translate-x-1/2 md:right-auto":a==="right"?v="md:right-0 md:left-auto md:translate-x-0":v="md:left-0 md:translate-x-0",`${f} ${v}`},b=()=>{const f=s==="right"?"right-4":"left-4";let v="";return a==="center"?v="md:left-1/2 md:-translate-x-1/2 md:right-auto":a==="right"?v="md:right-4 md:left-auto md:translate-x-0":v="md:left-4 md:translate-x-0",`${f} ${v}`},x=f=>{f.stopPropagation(),!(m.current&&m.current.contains(f.target))&&(c.current&&(clearTimeout(c.current),c.current=null),l(v=>!v))};return h.useEffect(()=>{const f=v=>{i&&l(!1)};return i&&document.addEventListener("click",f),()=>{document.removeEventListener("click",f)}},[i]),o.jsxs("div",{className:`relative inline-block ${n}`,onMouseEnter:d,onMouseLeave:g,onClick:x,children:[e,i&&o.jsx("div",{ref:m,onMouseEnter:d,onMouseLeave:g,className:`absolute z-50 mt-2 w-64 max-w-[calc(100vw-2rem)] p-3 bg-gray-900/90 text-white text-xs rounded-lg shadow-xl backdrop-blur-sm animate-fade-in border border-gray-700 pointer-events-auto ${u()}`,children:o.jsxs("div",{className:"relative",children:[o.jsx("div",{className:`absolute -top-[18px] border-8 border-transparent border-b-gray-900/90 ${b()}`}),t]})})]})}const an={:"text-red-400",:"text-red-400",:"text-orange-400",:"text-green-400",:"text-blue-400",:"text-yellow-400",:"text-cyan-400",:"text-indigo-400",:"text-emerald-400",:"text-emerald-400"},ln=({caseId:e})=>{const[t,r]=h.useState(null),[n,s]=h.useState([]);return h.useEffect(()=>{Ss(e).then(r),pn().then(a=>{const i=a.find(l=>l.caseId===e);if(i!=null&&i.specialMemo){const l=i.specialMemo.filter(c=>c.content.startsWith("[2  ]")).map(c=>{var m;const p=c.content.match(/\[2  \] (.+?)  (.+?)(\n|$)/);return{date:c.createdAt,from:(p==null?void 0:p[1])||"",to:(p==null?void 0:p[2])||"",memo:c.content.includes(":")?(m=c.content.split(":")[1])==null?void 0:m.trim():void 0}});s(l)}})},[e]),t?t.length===0&&n.length===0?o.jsx("span",{children:" ."}):o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto custom-scrollbar",children:[t.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-bold text-blue-300 border-b border-gray-600 pb-1 sticky top-0 bg-gray-900/90",children:"1   "}),t.map((a,i)=>o.jsxs("div",{className:"text-[11px] border-b border-gray-700 last:border-0 pb-1 mb-1",children:[o.jsxs("div",{className:"flex justify-between text-gray-400 mb-0.5",children:[o.jsxs("span",{children:[a.fromStatus||"","  ",o.jsx("span",{className:"text-blue-300",children:a.toStatus})]}),o.jsx("span",{className:"text-[10px]",children:a.changedAt.split("T")[0]})]}),a.memo&&o.jsx("div",{className:"text-gray-300 pl-1 border-l-2 border-gray-600",children:a.memo})]},i))]}),n.length>0&&o.jsxs(o.Fragment,{children:[o.jsx("p",{className:"font-bold text-purple-300 border-b border-gray-600 pb-1 mt-2",children:"2   "}),n.map((a,i)=>o.jsxs("div",{className:"text-[11px] border-b border-gray-700 last:border-0 pb-1 mb-1",children:[o.jsxs("div",{className:"flex justify-between text-gray-400 mb-0.5",children:[o.jsxs("span",{children:[o.jsx("span",{className:an[a.from]||"text-gray-300",children:a.from}),"  ",o.jsx("span",{className:an[a.to]||"text-purple-300",children:a.to})]}),o.jsx("span",{className:"text-[10px]",children:a.date.split("T")[0]})]}),a.memo&&o.jsx("div",{className:"text-gray-300 pl-1 border-l-2 border-purple-600",children:a.memo})]},i))]})]}):o.jsx("span",{children:"..."})},cn=e=>{if(!e||e.length===0)return null;const t=new Date,r=e.map(n=>({...n,dateObj:Ys(n.datetime)})).filter(n=>n.dateObj&&n.dateObj>=t).sort((n,s)=>n.dateObj.getTime()-s.dateObj.getTime());return r.length>0?r[0]:null},Bc=e=>{var r;return!e.specialMemo||!Array.isArray(e.specialMemo)||e.specialMemo.length===0?e.updatedAt:((r=[...e.specialMemo].sort((n,s)=>String(s.createdAt||"").localeCompare(String(n.createdAt||"")))[0])==null?void 0:r.createdAt)||e.updatedAt},Mc=({cases:e,partners:t,viewMode:r,missedCallStatus:n,missedCallInterval:s,statuses:a,onDelete:i,onRestore:l,onMissedCall:c,onStatusChange:p})=>{const[m,d]=h.useState(null),g=L.useRef(null);return h.useEffect(()=>{const u=b=>{g.current&&!g.current.contains(b.target)&&d(null)};return m&&document.addEventListener("mousedown",u),()=>document.removeEventListener("mousedown",u)},[m]),e.length===0?o.jsx("div",{className:"p-8 text-center text-gray-400 flex-1 flex items-center justify-center",children:"  ."}):o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-sm border border-gray-100 dark:border-gray-700 min-h-[500px] flex flex-col",children:[o.jsx("div",{className:"md:hidden space-y-4 p-4",children:e.map((u,b)=>{const x=t.find(f=>f.partnerId===u.partnerId);return Er(u,x),o.jsxs("div",{className:"bg-gray-50 dark:bg-gray-700/50 p-4 rounded-lg flex flex-col gap-2 relative",children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsxs("div",{className:"flex items-center gap-2 relative",children:[o.jsxs("div",{className:"relative",ref:m===`mobile_${u.caseId}`?g:null,children:[o.jsx(Re,{trigger:o.jsx("button",{className:`px-2 py-0.5 rounded text-xs font-bold ${u.status===""||u.status===""?"bg-red-100 text-red-700":ze[u.status]||"bg-blue-100 text-blue-700"}`,onTouchStart:f=>{const v=setTimeout(()=>{d(`mobile_${u.caseId}`)},500);f.target._longPressTimer=v},onTouchEnd:f=>{f.target._longPressTimer&&clearTimeout(f.target._longPressTimer)},onTouchMove:f=>{f.target._longPressTimer&&clearTimeout(f.target._longPressTimer)},children:u.status}),content:o.jsx(ln,{caseId:u.caseId})}),o.jsx(kr,{children:m===`mobile_${u.caseId}`&&o.jsxs(bt.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15},className:"absolute z-50 top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 min-w-[140px] max-h-[250px] overflow-y-auto",children:[o.jsxs("div",{className:"px-2 py-1 text-[10px] text-gray-400 border-b border-gray-100 dark:border-gray-700 flex justify-between items-center",children:[o.jsx("span",{children:" "}),o.jsx("button",{onClick:()=>d(null),className:"text-gray-500 hover:text-gray-700",children:""})]}),a.map(f=>{var v;return o.jsxs("button",{onClick:S=>{S.stopPropagation(),f!==u.status&&p(u.caseId,f,u.status),d(null)},className:`w-full text-left px-3 py-2 text-sm hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2 ${f===u.status?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${((v=ze[f])==null?void 0:v.split(" ")[0])||"bg-gray-300"}`}),f,f===u.status&&o.jsx("span",{className:"ml-auto text-blue-500",children:""})]},f)})]})})]}),u.isNew&&o.jsx("span",{className:"text-[10px] bg-red-500 text-white px-1.5 py-0.5 rounded-full animate-pulse",children:"NEW"})]}),o.jsx("span",{className:"text-xs text-gray-400",children:Pe(u.createdAt,"MM-dd")})]}),o.jsxs("div",{className:"flex justify-between items-center mt-1",children:[o.jsx(Ir,{to:u.isNew?`/new?leadId=${u.caseId}`:`/case/${u.caseId}`,className:"font-bold text-lg text-gray-800 dark:text-gray-200",children:u.customerName}),o.jsxs("div",{className:"flex flex-col items-end gap-1",children:[o.jsx("span",{className:"text-sm font-medium text-gray-600 dark:text-gray-400",children:u.phone}),u.status===n&&o.jsxs("div",{className:"flex items-center gap-1.5",children:[o.jsxs("button",{onClick:f=>c(f,u),className:`flex items-center gap-1 px-2 py-1 rounded text-xs font-bold border transition-all shadow-sm ${u.lastMissedCallAt&&new Date().getTime()-new Date(u.lastMissedCallAt).getTime()>s*24*60*60*1e3?"bg-red-50 border-red-200 text-red-600 animate-pulse ring-1 ring-red-100":"bg-white border-orange-200 text-orange-600 hover:bg-orange-50"}`,children:[o.jsx(Or,{size:12}),o.jsxs("span",{children:[" +",u.missedCallCount||0]})]}),o.jsx("span",{className:"text-[10px] text-gray-500 font-mono",children:Pe(u.lastMissedCallAt,"MM.dd HH:mm")})]})]})]}),(()=>{var v,S,k;const f=cn(u.reminders);return f?o.jsx("div",{className:"mt-1",children:o.jsx(Re,{mobileAlign:"left",trigger:o.jsxs("div",{className:"flex items-center gap-1.5 p-1 px-2 bg-yellow-50 dark:bg-yellow-900/30 rounded border border-yellow-100 dark:border-yellow-900/50 w-fit",children:[(()=>{const w=f.type||"";return w===""?o.jsx(Ye,{size:12,className:"text-blue-600"}):w===""?o.jsx(Dr,{size:12,className:"text-green-600"}):w===""?o.jsx(jr,{size:12,className:"text-purple-600"}):o.jsx(Sr,{size:12,className:"text-gray-600"})})(),o.jsx("span",{className:"text-xs font-bold text-yellow-800 dark:text-yellow-300",children:f.datetime}),(((v=u.reminders)==null?void 0:v.length)||0)>1&&o.jsxs("span",{className:"text-[10px] text-gray-500 bg-white dark:bg-gray-800 px-1 rounded-full border border-gray-200 dark:border-gray-600",children:["+",(((S=u.reminders)==null?void 0:S.length)||0)-1]})]}),content:o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[o.jsx("p",{className:"font-bold text-gray-200 border-b border-gray-600 pb-1 sticky top-0 bg-gray-900/90",children:" "}),(k=u.reminders)==null?void 0:k.map((w,A)=>o.jsxs("div",{className:"text-[11px] border-b border-gray-700 last:border-0 pb-1.5 mb-1.5",children:[o.jsx("p",{className:"text-gray-300 font-medium",children:w.datetime}),w.content&&o.jsx("p",{className:"text-gray-400 mt-0.5 pl-1 border-l-2 border-gray-600",children:w.content})]},A))]})})}):null})(),o.jsxs("div",{className:"flex justify-between items-end mt-2 pt-2 border-t border-gray-200 dark:border-gray-600",children:[o.jsxs("div",{className:"flex flex-col text-xs text-gray-500",children:[o.jsxs("span",{children:[u.caseType," | ",u.inboundPath]}),o.jsx("span",{children:x==null?void 0:x.name})]}),o.jsxs("div",{className:"flex gap-2",children:[o.jsx("a",{href:`tel:${u.phone}`,className:"p-2 bg-green-100 text-green-600 rounded-full",children:o.jsx(Ye,{size:16})}),o.jsx(Re,{mobileAlign:"right",trigger:o.jsx("button",{className:"p-2 bg-blue-100 text-blue-600 rounded-full",children:o.jsx(Pr,{size:16})}),content:o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[o.jsx("p",{className:"font-bold text-gray-300 border-b border-gray-600 pb-1",children:"  "}),u.specialMemo&&Array.isArray(u.specialMemo)&&u.specialMemo.filter(f=>!f.content.startsWith("[]")).length>0?u.specialMemo.filter(f=>!f.content.startsWith("[]")).slice(0,5).map((f,v)=>o.jsxs("div",{className:"text-[11px] leading-relaxed border-b border-gray-700 last:border-0 pb-1",children:[o.jsxs("span",{className:"text-blue-300 mr-1",children:["[",f.createdAt.split("T")[0],"]"]}),f.content]},v)):o.jsx("span",{className:"text-gray-500 italic",children:"  "})]})}),o.jsx("button",{onClick:f=>i(u.caseId,f),className:"p-2 bg-red-100 text-red-600 rounded-full hover:bg-red-200 transition-colors",title:" ",children:o.jsx(Je,{size:16})})]})]})]},u.caseId)})}),o.jsx("div",{className:"hidden md:block flex-1",children:o.jsxs("table",{className:"w-full text-sm text-left text-gray-600 dark:text-gray-300 table-fixed",children:[o.jsx("thead",{className:"bg-gray-50 dark:bg-gray-700/50 text-gray-700 dark:text-gray-300 uppercase font-medium text-xs",children:o.jsxs("tr",{children:[o.jsx("th",{className:"px-4 py-3 w-[15%]",children:"//"}),o.jsx("th",{className:"px-4 py-3 w-[12%]",children:""}),o.jsx("th",{className:"px-4 py-3 w-[13%]",children:""}),o.jsx("th",{className:"px-4 py-3 w-[10%]",children:""}),o.jsx("th",{className:"px-4 py-3 w-[10%]",children:""}),o.jsx("th",{className:"px-4 py-3 w-[10%]",children:""}),o.jsx("th",{className:"px-4 py-3 w-[20%]",children:""}),o.jsx("th",{className:"px-4 py-3 w-[10%] text-center",children:""})]})}),o.jsx("tbody",{children:e.map((u,b)=>{var k,w,A;const x=t.find(N=>N.partnerId===u.partnerId),f=Er(u,x),v=Bc(u),S=cn(u.reminders);return o.jsxs(bt.tr,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},transition:{delay:b*.05},className:"border-b border-gray-50 dark:border-gray-700 hover:bg-white/60 dark:hover:bg-gray-700/60 transition-colors",children:[o.jsx("td",{className:"px-4 py-3",children:o.jsxs("div",{className:"flex flex-col gap-1",children:[o.jsx("span",{className:"text-xs font-bold text-indigo-700 dark:text-indigo-400",children:u.caseType}),o.jsx("span",{className:"text-[10px] text-gray-500 dark:text-gray-400",children:u.inboundPath}),o.jsx("span",{className:"text-[10px] text-gray-400 dark:text-gray-500",children:x==null?void 0:x.name})]})}),o.jsxs("td",{className:"px-4 py-3",children:[o.jsxs(Ir,{to:u.isNew?`/new?leadId=${u.caseId}`:`/case/${u.caseId}`,className:"font-medium text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1",children:[o.jsx("span",{className:"truncate max-w-[90px] inline-block align-bottom",title:u.customerName,children:u.customerName}),u.isNew&&o.jsx("span",{className:"text-[10px] bg-red-500 text-white px-1.5 py-0.5 rounded-full animate-pulse flex-shrink-0",children:"NEW"})]}),o.jsx("div",{className:"ml-1 inline-block",children:o.jsx(Re,{trigger:o.jsx(Pr,{size:14,className:"text-gray-300 hover:text-blue-500 transition-colors"}),content:o.jsxs("div",{className:"space-y-2",children:[o.jsx("p",{className:"font-bold text-gray-300 border-b border-gray-600 pb-1",children:"  "}),u.specialMemo&&Array.isArray(u.specialMemo)&&u.specialMemo.filter(N=>!N.content.startsWith("[]")).length>0?u.specialMemo.filter(N=>!N.content.startsWith("[]")).slice(0,3).map((N,B)=>o.jsxs("div",{className:"text-[11px] leading-relaxed",children:[o.jsxs("span",{className:"text-blue-300 mr-1",children:["[",N.createdAt.split("T")[0],"]"]}),N.content]},B)):o.jsx("span",{className:"text-gray-500 italic",children:" "})]})})}),f.length>0&&o.jsx("span",{className:"ml-2 text-red-500 text-xs",children:""})]}),o.jsx("td",{className:`px-4 py-3 font-medium ${u.status===""||u.status===""?"text-red-600 dark:text-red-400":""}`,children:u.phone}),o.jsxs("td",{className:"px-4 py-3 relative",children:[o.jsxs("div",{className:"relative",ref:m===u.caseId?g:null,children:[o.jsx(Re,{trigger:o.jsxs("button",{onClick:N=>{N.stopPropagation(),d(m===u.caseId?null:u.caseId)},className:"flex items-center gap-1 group",children:[u.status===" "&&u.secondaryStatus?o.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded text-xs whitespace-nowrap bg-gradient-to-r from-green-50 to-purple-50 border border-purple-200",children:[o.jsx("span",{className:"text-green-700 font-medium",children:""}),o.jsx("span",{className:"text-gray-400 mx-0.5",children:""}),o.jsx("span",{className:`font-medium ${u.secondaryStatus===""||u.secondaryStatus===""?"text-red-600":u.secondaryStatus===""?"text-orange-600":u.secondaryStatus===""?"text-green-600":u.secondaryStatus===""?"text-blue-600":u.secondaryStatus===""?"text-yellow-600":u.secondaryStatus===""?"text-cyan-600":u.secondaryStatus===""?"text-indigo-600":u.secondaryStatus===""||u.secondaryStatus===""?"text-emerald-600":"text-purple-700"}`,children:u.secondaryStatus})]}):o.jsx("span",{className:`px-2 py-1 rounded text-xs whitespace-nowrap ${ze[u.status]?ze[u.status].replace("bg-blue-50","bg-blue-100"):"bg-gray-100 dark:bg-gray-700"} ${u.status===""||u.status===""?"text-red-700 bg-red-100":""} ${u.status===" "?"bg-green-100 text-green-700":""}`,children:u.status===" "?" ":u.status}),o.jsx(xn,{size:12,className:"text-gray-400 group-hover:text-gray-600 transition-colors"})]}),content:o.jsx(ln,{caseId:u.caseId})}),o.jsx(kr,{children:m===u.caseId&&o.jsxs(bt.div,{initial:{opacity:0,y:-5},animate:{opacity:1,y:0},exit:{opacity:0,y:-5},transition:{duration:.15},className:"absolute z-50 top-full left-0 mt-1 bg-white dark:bg-gray-800 border border-gray-200 dark:border-gray-600 rounded-lg shadow-lg py-1 min-w-[140px] max-h-[300px] overflow-y-auto",children:[o.jsx("div",{className:"px-2 py-1 text-[10px] text-gray-400 border-b border-gray-100 dark:border-gray-700",children:" "}),a.map(N=>{var B;return o.jsxs("button",{onClick:O=>{O.stopPropagation(),N!==u.status&&p(u.caseId,N,u.status),d(null)},className:`w-full text-left px-3 py-1.5 text-xs hover:bg-gray-50 dark:hover:bg-gray-700 transition-colors flex items-center gap-2 ${N===u.status?"bg-blue-50 dark:bg-blue-900/30 text-blue-700 dark:text-blue-300 font-medium":"text-gray-700 dark:text-gray-300"}`,children:[o.jsx("span",{className:`w-2 h-2 rounded-full ${((B=ze[N])==null?void 0:B.split(" ")[0])||"bg-gray-300"}`}),N,N===u.status&&o.jsx("span",{className:"ml-auto text-blue-500",children:""})]},N)})]})})]}),u.status===n&&o.jsxs("div",{className:"mt-1 flex items-center gap-1",children:[o.jsxs("button",{onClick:N=>c(N,u),className:`flex items-center gap-1 px-2 py-0.5 rounded text-[10px] font-bold border transition-all ${u.lastMissedCallAt&&new Date().getTime()-new Date(u.lastMissedCallAt).getTime()>s*24*60*60*1e3?"bg-red-50 border-red-200 text-red-600 animate-pulse":"bg-white border-orange-200 text-orange-600 hover:bg-orange-50"}`,title:` : ${Pe(u.lastMissedCallAt,"yyyy-MM-dd HH:mm","")}`,children:[o.jsx(Or,{size:10}),o.jsxs("span",{children:["+",u.missedCallCount||0]})]}),o.jsx("span",{className:"text-[10px] text-gray-500 tracking-tight",children:Pe(u.lastMissedCallAt,"MM.dd HH:mm")})]})]}),o.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:Pe(u.createdAt,"yyyy-MM-dd")}),o.jsx("td",{className:"px-4 py-3 text-xs text-gray-500",children:Pe(v,"yyyy-MM-dd")}),o.jsx("td",{className:"px-4 py-3 text-xs",children:S?o.jsx(Re,{trigger:o.jsxs("div",{className:"flex items-center gap-1.5 cursor-help",children:[(()=>{const N=S.type||"";return N===""?o.jsx(Ye,{size:14,className:"text-blue-600"}):N===""?o.jsx(Dr,{size:14,className:"text-green-600"}):N===""?o.jsx(jr,{size:14,className:"text-purple-600"}):o.jsx(Sr,{size:14,className:"text-gray-600"})})(),o.jsx("span",{className:"text-gray-700 dark:text-gray-300 font-medium",children:S.datetime}),(((k=u.reminders)==null?void 0:k.length)||0)>1&&o.jsxs("span",{className:"text-[10px] text-gray-400 bg-gray-100 dark:bg-gray-700 px-1 rounded-sm",children:["+",(((w=u.reminders)==null?void 0:w.length)||0)-1]})]}),content:o.jsxs("div",{className:"space-y-2 max-h-60 overflow-y-auto",children:[o.jsx("p",{className:"font-bold text-gray-200 border-b border-gray-600 pb-1 sticky top-0 bg-gray-900/90",children:" "}),(A=u.reminders)==null?void 0:A.map((N,B)=>o.jsxs("div",{className:"text-[11px] border-b border-gray-700 last:border-0 pb-1.5 mb-1.5",children:[o.jsx("p",{className:"text-gray-300 font-medium",children:N.datetime}),N.content&&o.jsx("p",{className:"text-gray-400 mt-0.5 pl-1 border-l-2 border-gray-600",children:N.content})]},B))]})}):"-"}),o.jsx("td",{className:"px-4 py-3 text-center",children:r==="trash"?o.jsxs("div",{className:"flex items-center justify-center gap-2",children:[o.jsx("button",{onClick:N=>l(u.caseId,N),className:"text-green-500 hover:text-green-700 p-1.5 rounded hover:bg-green-50",title:"",children:o.jsx(yt,{size:16})}),o.jsx("button",{onClick:N=>i(u.caseId,N),className:"text-red-500 hover:text-red-700 p-1.5 rounded hover:bg-red-50",title:" ",children:o.jsx(Je,{size:16})})]}):o.jsx("button",{onClick:N=>i(u.caseId,N),className:"text-gray-300 hover:text-red-500 p-2 rounded transition-colors hover:bg-red-50 dark:hover:bg-red-900/20",title:"",children:o.jsx(Je,{size:16})})})]},`${u.caseId}_${b}`)})})]})})]})},Lc=({currentPage:e,totalPages:t,onPageChange:r})=>t<=0?null:o.jsxs("div",{className:"flex items-center justify-between p-4 border-t border-gray-100 dark:border-gray-700 bg-gray-50 dark:bg-gray-700/30",children:[o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:()=>r(e-1),disabled:e===1,className:"p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700",children:o.jsx(fn,{size:16})}),o.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Page ",e," of ",t]}),o.jsx("button",{onClick:()=>r(e+1),disabled:e===t,className:"p-2 rounded-lg bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 text-gray-600 dark:text-gray-300 disabled:opacity-50 disabled:cursor-not-allowed hover:bg-gray-50 dark:hover:bg-gray-700",children:o.jsx(to,{size:16})})]}),o.jsx("div",{className:"hidden sm:flex gap-1",children:Array.from({length:t},(n,s)=>s+1).map(n=>n===1||n===t||Math.abs(n-e)<=1?o.jsx("button",{onClick:()=>r(n),className:`w-8 h-8 flex items-center justify-center rounded-lg text-xs font-medium border ${e===n?"bg-blue-600 text-white border-blue-600":"bg-white dark:bg-gray-800 text-gray-600 dark:text-gray-300 border-gray-300 dark:border-gray-600 hover:bg-gray-50 dark:hover:bg-gray-700"}`,children:n},n):n===2&&e>3||n===t-1&&e<t-2?o.jsx("span",{className:"w-8 h-8 flex items-center justify-center text-gray-400",children:"..."},n):null)})]});function nd(){dn();const{showToast:e}=un(),{data:t=[],isLoading:r,refetch:n}=Cs(),{data:s=[]}=As(),{data:a=[]}=Es(),{data:i=[]}=ks(),l=Ps(),c=Rs(),[p,m]=h.useState(!1),[d,g]=h.useState("active"),[u,b]=h.useState("list"),[x,f]=h.useState(!1),[v,S]=h.useState(()=>{try{const I=localStorage.getItem("lm_hiddenStatuses");return I?JSON.parse(I):[]}catch{return[]}});h.useEffect(()=>{localStorage.setItem("lm_hiddenStatuses",JSON.stringify(v))},[v]);const k=I=>{S(C=>C.includes(I)?C.filter(J=>J!==I):[...C,I])},[w,A]=h.useState(()=>localStorage.getItem("lm_missedStatus")||""),[N,B]=h.useState(()=>Number(localStorage.getItem("lm_missedInterval"))||3),[O,H]=h.useState(()=>sessionStorage.getItem("lm_search")||""),[T,E]=h.useState(()=>{const I=sessionStorage.getItem("lm_statusFilters");return I?JSON.parse(I):[]}),[G,ue]=h.useState(()=>sessionStorage.getItem("lm_inboundPathFilter")||""),[Y,Ge]=h.useState(()=>sessionStorage.getItem("lm_partnerFilter")||""),[ae,D]=h.useState(()=>sessionStorage.getItem("lm_dateFilterStart")||""),[P,_]=h.useState(()=>sessionStorage.getItem("lm_dateFilterEnd")||""),[V,$e]=h.useState(()=>sessionStorage.getItem("lm_sortOrder")||"createdAt_desc"),[ie,ve]=h.useState(()=>sessionStorage.getItem("lm_showNewOnly")==="true"),[ee,Ne]=h.useState(()=>sessionStorage.getItem("lm_showOverdueMissed")==="true");h.useEffect(()=>{sessionStorage.setItem("lm_search",O),sessionStorage.setItem("lm_statusFilters",JSON.stringify(T)),sessionStorage.setItem("lm_inboundPathFilter",G),sessionStorage.setItem("lm_partnerFilter",Y),sessionStorage.setItem("lm_dateFilterStart",ae),sessionStorage.setItem("lm_dateFilterEnd",P),sessionStorage.setItem("lm_sortOrder",V),sessionStorage.setItem("lm_showNewOnly",String(ie)),sessionStorage.setItem("lm_showOverdueMissed",String(ee)),sessionStorage.setItem("lm_viewMode",d)},[O,T,G,Y,ae,P,V,ie,ee,d]);const[de,te]=h.useState(()=>{const I=sessionStorage.getItem("lm_caselist_page");return I?Number(I):1});h.useEffect(()=>{sessionStorage.setItem("lm_caselist_page",String(de))},[de]);const ge=10,$=h.useMemo(()=>t.filter(I=>{const C=O.toLowerCase(),J=String(I.customerName||"").toLowerCase().includes(C)||String(I.phone||"").includes(O)||(I.specialMemo||[]).some(le=>String(le.content||"").toLowerCase().includes(C))||(I.reminders||[]).some(le=>String(le.content||"").toLowerCase().includes(C)),pe=v.includes(I.status),re=T.length===0?!pe:T.includes(I.status),fe=G===""||I.inboundPath===G,ct=Y===""||I.partnerId===Y,dt=ie?I.isNew:!0,We=I.status===""||!!I.deletedAt;if(d==="active"&&We||d==="trash"&&!We)return!1;let Ie=!0;if(ae||P){const le=He(I.createdAt);if(le){const K=Os(le,"yyyy-MM-dd");ae&&K<ae&&(Ie=!1),P&&K>P&&(Ie=!1)}else(ae||P)&&(Ie=!1)}if(ee){const le=new Date().getTime();if(!(I.status===w&&I.lastMissedCallAt&&le-new Date(I.lastMissedCallAt).getTime()>N*24*60*60*1e3))return!1}return J&&re&&fe&&ct&&Ie&&dt}),[t,O,v,T,G,Y,ie,d,ae,P,ee,w,N]),Ce=h.useMemo(()=>[...$].sort((I,C)=>{var dt,We,Ie,le;if(ee){const K=I.lastMissedCallAt?new Date(I.lastMissedCallAt).getTime():0,_t=C.lastMissedCallAt?new Date(C.lastMissedCallAt).getTime():0;return K!==_t?K-_t:String(I.caseId||"").localeCompare(String(C.caseId||""))}if(V==="inboundPath_asc")return String(I.inboundPath||"").localeCompare(String(C.inboundPath||""));if(V==="createdAt_desc"){if(I.isNew&&!C.isNew)return-1;if(!I.isNew&&C.isNew)return 1}const[J,pe]=V.split("_");let re,fe;const ct=K=>{var vr;return!K.specialMemo||!Array.isArray(K.specialMemo)||K.specialMemo.length===0?K.updatedAt:((vr=[...K.specialMemo].sort((ws,Is)=>String(Is.createdAt||"").localeCompare(String(ws.createdAt||"")))[0])==null?void 0:vr.createdAt)||K.updatedAt};return J==="lastConsultation"?(re=new Date(ct(I)).getTime(),fe=new Date(ct(C)).getTime()):J==="updatedAt"?(re=((dt=He(I.updatedAt))==null?void 0:dt.getTime())||0,fe=((We=He(C.updatedAt))==null?void 0:We.getTime())||0):(re=((Ie=He(I.createdAt))==null?void 0:Ie.getTime())||0,fe=((le=He(C.createdAt))==null?void 0:le.getTime())||0),re!==fe?pe==="desc"?fe-re:re-fe:pe==="desc"?String(C.caseId||"").localeCompare(String(I.caseId||"")):String(I.caseId||"").localeCompare(String(C.caseId||""))}),[$,V,ee]),me=Ce.length,U=Math.ceil(me/ge),Ae=de*ge,we=Ae-ge,Ee=Ce.slice(we,Ae);h.useEffect(()=>{U>0&&de>U&&te(U)},[U,de]),h.useLayoutEffect(()=>{const I=sessionStorage.getItem("lm_caselist_scrollTop");if(I&&!r){const C=document.getElementById("main-scroll-container");C&&(C.scrollTop=Number(I))}},[r]),h.useEffect(()=>{const I=()=>{const J=document.getElementById("main-scroll-container");J&&sessionStorage.setItem("lm_caselist_scrollTop",J.scrollTop.toString())},C=document.getElementById("main-scroll-container");return C&&C.addEventListener("scroll",I),()=>C==null?void 0:C.removeEventListener("scroll",I)},[]);const Mt=async(I,C)=>{l.mutate({id:I,updates:C})},lt=async(I,C)=>{if(C==null||C.stopPropagation(),d==="active"){if(!window.confirm(" ?"))return;l.mutate({id:I,updates:{status:""}})}else{if(!window.confirm("  ?"))return;c.mutate(I)}},Lt=async(I,C)=>{if(C==null||C.stopPropagation(),!!window.confirm("?"))try{await Bs(I),n(),e(".")}catch{e(" ","error")}},ke=async(I,C)=>{I.preventDefault(),I.stopPropagation();const J=new Date,pe=(C.missedCallCount||0)+1;l.mutate({id:C.caseId,updates:{missedCallCount:pe,lastMissedCallAt:J.toISOString()}})},Fe=async(I,C,J)=>{const pe=new Date().toISOString(),re={status:C,statusUpdatedAt:pe};C===w&&(re.missedCallCount=1,re.lastMissedCallAt=pe),l.mutate({id:I,updates:re}),e(` "${C}"() .`)};if(r&&t.length===0)return o.jsx(Ms,{});const vs=t.filter(I=>I.isNew).length,Ns=t.filter(I=>I.status!==w||!I.lastMissedCallAt?!1:new Date().getTime()-new Date(I.lastMissedCallAt).getTime()>N*24*60*60*1e3).length;return o.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[o.jsx(Oc,{totalItems:me,newCaseCount:vs,showNewOnly:ie,setShowNewOnly:ve,overdueMissedCallCount:Ns,showOverdueMissedOnly:ee,setShowOverdueMissedOnly:Ne,missedCallInterval:N,updateAvailable:!1,newLeadsCount:0,onManualRefresh:async()=>{await Ts(),n()},onResetPage:()=>te(1)}),o.jsx(Tc,{search:O,setSearch:H,dateFilterStart:ae,setDateFilterStart:D,dateFilterEnd:P,setDateFilterEnd:_,partnerFilter:Y,setPartnerFilter:Ge,inboundPathFilter:G,setInboundPathFilter:ue,statusFilters:T,setStatusFilters:E,sortOrder:V,setSortOrder:$e,layoutMode:u,setLayoutMode:b,viewMode:d,setViewMode:g,partners:s,inboundPaths:a,statuses:i,onOpenImportModal:()=>m(!0),onOpenStatusVisibilityModal:()=>f(!0),onResetPage:()=>te(1)}),o.jsx(Pc,{isOpen:x,onClose:()=>f(!1),allStatuses:i,hiddenStatuses:v,onToggleStatus:k}),o.jsx(Rc,{isOpen:p,onClose:()=>m(!1),onSuccess:()=>{n(),te(1)},partners:s,inboundPaths:a}),u==="kanban"?o.jsx(kc,{cases:Ee,statuses:i.filter(I=>I!==""),onUpdateStatus:(I,C)=>Mt(I,{status:C})}):o.jsxs(o.Fragment,{children:[o.jsx(Mc,{cases:Ee,partners:s,viewMode:d,missedCallStatus:w,missedCallInterval:N,statuses:i.filter(I=>I!==""),onDelete:lt,onRestore:Lt,onMissedCall:ke,onStatusChange:Fe}),o.jsx(Lc,{currentPage:de,totalPages:U,onPageChange:I=>{var C;te(I),(C=document.getElementById("main-scroll-container"))==null||C.scrollTo({top:0,behavior:"instant"})}})]})]})}export{nd as default};
