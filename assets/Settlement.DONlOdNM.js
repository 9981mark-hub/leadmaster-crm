import{c as Dt,n as ls,a6 as os,a as cs,a7 as mt,a8 as kt,a9 as Lt,r as L,j as e,f as De,s as ds,aa as is,X as xs,g as ms,ab as ke,ac as pt,ad as He,ae as ps,af as hs,ag as gs,b as ht,d as us,ah as bs,ai as _e,aj as ze,a1 as Le,a0 as gt,ak as ys,al as fs,am as js,an as te,ao as Ns,ap as vs,aq as ws,ar as Ss,as as Cs,at as Is}from"./index.BatHzcfy.js";import{q as ut,a as Ds,i as bt,m as yt,r as ft}from"./utils.CZR10HRf.js";import{M as jt}from"./Modal.B2hbhXZu.js";import{C as At}from"./chevron-left.tNmezBI8.js";import{C as $t}from"./chevron-right.sxwTB4X9.js";import{a as ks,b as Ls,s as As,e as $s,R as be,B as Ye,C as Ve,X as Ke,Y as Ge,T as ye,L as Nt,c as oe,P as vt,d as wt,f as St}from"./PieChart.C3is2I2M.js";import{e as Fs,i as Ts}from"./isSameMonth.D5arlkxN.js";import{u as Fe,w as Es,r as Ps}from"./xlsx.BBWTpfDg.js";import{B as Ms}from"./building.DXYB7-VP.js";import{C as Rs}from"./calendar.fe01Sqwr.js";import{F as Os,S as Bs}from"./search.BlnVp4di.js";import{C as Us}from"./check.CTJA00gN.js";import{C as Ws}from"./copy.BnfHNLsk.js";import{P as Ze,T as Ct}from"./trash-2.jFNcK706.js";import{L as Hs}from"./Line.DgDBc43t.js";import{D as _s}from"./download.C9qktaRu.js";import"./index.TKEK1CsW.js";import"./tiny-invariant.XUtC9gpy.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]],Ys=Dt("credit-card",zs);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vs=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],Ks=Dt("refresh-cw",Vs);function Xe(u,h,j){const[b,I]=ls(j==null?void 0:j.in,u,h),v=It(b,I),M=Math.abs(os(b,I));b.setDate(b.getDate()-v*M);const f=+(It(b,I)===-v),U=v*(M-f);return U===0?0:U}function It(u,h){const j=u.getFullYear()-h.getFullYear()||u.getMonth()-h.getMonth()||u.getDate()-h.getDate()||u.getHours()-h.getHours()||u.getMinutes()-h.getMinutes()||u.getSeconds()-h.getSeconds()||u.getMilliseconds()-h.getMilliseconds();return j<0?-1:j>0?1:j}function Ae(u,h){const j=()=>cs(h==null?void 0:h.in,NaN),I=qs(u);let v;if(I.date){const S=Js(I.date,2);v=Qs(S.restDateString,S.year)}if(!v||isNaN(+v))return j();const M=+v;let f=0,U;if(I.time&&(f=ea(I.time),isNaN(f)))return j();if(I.timezone){if(U=ta(I.timezone),isNaN(U))return j()}else{const S=new Date(M+f),se=mt(0,h==null?void 0:h.in);return se.setFullYear(S.getUTCFullYear(),S.getUTCMonth(),S.getUTCDate()),se.setHours(S.getUTCHours(),S.getUTCMinutes(),S.getUTCSeconds(),S.getUTCMilliseconds()),se}return mt(M+f+U,h==null?void 0:h.in)}const $e={dateTimeDelimiter:/[T ]/,timeZoneDelimiter:/[Z ]/i,timezone:/([Z+-].*)$/},Gs=/^-?(?:(\d{3})|(\d{2})(?:-?(\d{2}))?|W(\d{2})(?:-?(\d{1}))?|)$/,Zs=/^(\d{2}(?:[.,]\d*)?)(?::?(\d{2}(?:[.,]\d*)?))?(?::?(\d{2}(?:[.,]\d*)?))?$/,Xs=/^([+-])(\d{2})(?::?(\d{2}))?$/;function qs(u){const h={},j=u.split($e.dateTimeDelimiter);let b;if(j.length>2)return h;if(/:/.test(j[0])?b=j[0]:(h.date=j[0],b=j[1],$e.timeZoneDelimiter.test(h.date)&&(h.date=u.split($e.timeZoneDelimiter)[0],b=u.substr(h.date.length,u.length))),b){const I=$e.timezone.exec(b);I?(h.time=b.replace(I[1],""),h.timezone=I[1]):h.time=b}return h}function Js(u,h){const j=new RegExp("^(?:(\\d{4}|[+-]\\d{"+(4+h)+"})|(\\d{2}|[+-]\\d{"+(2+h)+"})$)"),b=u.match(j);if(!b)return{year:NaN,restDateString:""};const I=b[1]?parseInt(b[1]):null,v=b[2]?parseInt(b[2]):null;return{year:v===null?I:v*100,restDateString:u.slice((b[1]||b[2]).length)}}function Qs(u,h){if(h===null)return new Date(NaN);const j=u.match(Gs);if(!j)return new Date(NaN);const b=!!j[4],I=fe(j[1]),v=fe(j[2])-1,M=fe(j[3]),f=fe(j[4]),U=fe(j[5])-1;if(b)return la(h,f,U)?sa(h,f,U):new Date(NaN);{const S=new Date(0);return!ra(h,v,M)||!na(h,I)?new Date(NaN):(S.setUTCFullYear(h,v,Math.max(I,M)),S)}}function fe(u){return u?parseInt(u):1}function ea(u){const h=u.match(Zs);if(!h)return NaN;const j=qe(h[1]),b=qe(h[2]),I=qe(h[3]);return oa(j,b,I)?j*kt+b*Lt+I*1e3:NaN}function qe(u){return u&&parseFloat(u.replace(",","."))||0}function ta(u){if(u==="Z")return 0;const h=u.match(Xs);if(!h)return 0;const j=h[1]==="+"?-1:1,b=parseInt(h[2]),I=h[3]&&parseInt(h[3])||0;return ca(b,I)?j*(b*kt+I*Lt):NaN}function sa(u,h,j){const b=new Date(0);b.setUTCFullYear(u,0,4);const I=b.getUTCDay()||7,v=(h-1)*7+j+1-I;return b.setUTCDate(b.getUTCDate()+v),b}const aa=[31,null,31,30,31,30,31,31,30,31,30,31];function Ft(u){return u%400===0||u%4===0&&u%100!==0}function ra(u,h,j){return h>=0&&h<=11&&j>=1&&j<=(aa[h]||(Ft(u)?29:28))}function na(u,h){return h>=1&&h<=(Ft(u)?366:365)}function la(u,h,j){return h>=1&&h<=53&&j>=0&&j<=6}function oa(u,h,j){return u===24?h===0&&j===0:j>=0&&j<60&&h>=0&&h<60&&u>=0&&u<25}function ca(u,h){return h>=0&&h<=59}function da({batches:u}){const[h,j]=L.useState(new Date),[b,I]=L.useState(null),[v,M]=L.useState(!1),f=Array.isArray(u)?u:[],U=[];f.forEach(D=>{var k,z;(k=D.collectionInfo)!=null&&k.collectedAt?U.push({date:D.collectionInfo.collectedAt,type:"collection",label:"ìˆ˜ê¸ˆ",amount:D.collectionInfo.amount,batchId:D.batchId,weekLabel:D.weekLabel}):["collected","paid","completed"].includes(D.status)&&U.push({date:D.endDate,type:"collection",label:"ìˆ˜ê¸ˆ (ìƒíƒœê¸°ì¤€)",amount:D.totalCommission,batchId:D.batchId,weekLabel:D.weekLabel}),(D.payoutItems||[]).forEach(R=>{R.paidAt&&U.push({date:R.paidAt,type:"payout",label:`ì§€ê¸‰: ${R.partnerName||"ë¯¸ì§€ì •"}`,amount:R.amount,batchId:D.batchId,weekLabel:D.weekLabel})}),(z=D.purchaseInvoice)!=null&&z.receivedAt&&U.push({date:D.purchaseInvoice.receivedAt,type:"invoice",label:"ì„¸ê¸ˆê³„ì‚°ì„œ ìˆ˜ì·¨",batchId:D.batchId,weekLabel:D.weekLabel})});const S=D=>{const k=De(D,"yyyy-MM-dd");return U.filter(z=>(z.date?z.date.substring(0,10):"")===k)},se=()=>e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("button",{onClick:()=>j(ks(h,1)),className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx(At,{size:20})}),e.jsx("h3",{className:"text-lg font-bold text-gray-700",children:De(h,"yyyyë…„ Mì›”",{locale:ut})}),e.jsx("button",{onClick:()=>j(Ls(h,1)),className:"p-2 hover:bg-gray-100 rounded-full",children:e.jsx($t,{size:20})})]}),Te=()=>{const D=["ì¼","ì›”","í™”","ìˆ˜","ëª©","ê¸ˆ","í† "];return e.jsx("div",{className:"grid grid-cols-7 mb-2",children:D.map(k=>e.jsx("div",{className:"text-center text-sm font-medium text-gray-500 py-2",children:k},k))})},Ee=()=>{const D=As(h),k=$s(D),z=ds(D),R=Fs(k),W=[];let J=[],O=z;for(;O<=R;){for(let je=0;je<7;je++){const ce=O,ae=S(O),de=ae.length>0,V=Ts(O,D),ie=b&&Ds(O,b);J.push(e.jsxs("div",{onClick:()=>{de&&(I(ce),M(!0))},className:`
              min-h-[60px] p-1 border border-gray-100 cursor-pointer transition-all
              ${V?"hover:bg-blue-50":"bg-gray-50 text-gray-300"}
              ${bt(O)?"bg-blue-50 border-blue-300":""}
              ${ie?"ring-2 ring-blue-500":""}
            `,children:[e.jsx("span",{className:`text-sm ${bt(O)?"font-bold text-blue-600":""}`,children:De(O,"d")}),de&&e.jsxs("div",{className:"mt-1 space-y-0.5",children:[ae.slice(0,2).map((Z,Ne)=>e.jsxs("div",{className:`text-[10px] px-1 py-0.5 rounded truncate
                      ${Z.type==="collection"?"bg-green-100 text-green-700":Z.type==="payout"?"bg-orange-100 text-orange-700":"bg-purple-100 text-purple-700"}`,children:[Z.type==="collection"?"ğŸ’°":Z.type==="payout"?"ğŸ’³":"ğŸ“¥"," ",Z.amount?`${Z.amount}ë§Œì›`:Z.label]},Ne)),ae.length>2&&e.jsxs("div",{className:"text-[10px] text-gray-500",children:["+",ae.length-2,"ê±´ ë”"]})]})]},O.toString())),O=is(O,1)}W.push(e.jsx("div",{className:"grid grid-cols-7",children:J},O.toString())),J=[]}return e.jsx("div",{children:W})},P=()=>{if(!v||!b)return null;const D=S(b);return e.jsx("div",{className:"fixed inset-0 bg-black/40 flex items-center justify-center z-50",onClick:()=>M(!1),children:e.jsxs("div",{className:"bg-white rounded-xl shadow-2xl w-full max-w-md p-6",onClick:k=>k.stopPropagation(),children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-800",children:["ğŸ“… ",De(b,"yyyyë…„ Mì›” dì¼ (EEEE)",{locale:ut})]}),e.jsx("button",{onClick:()=>M(!1),className:"p-1 hover:bg-gray-100 rounded-full",children:e.jsx(xs,{size:20})})]}),e.jsx("div",{className:"space-y-3 max-h-[400px] overflow-y-auto",children:D.map((k,z)=>e.jsx("div",{className:`p-4 rounded-lg border
                  ${k.type==="collection"?"bg-green-50 border-green-200":k.type==="payout"?"bg-orange-50 border-orange-200":"bg-purple-50 border-purple-200"}`,children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsx("span",{className:`text-sm font-bold
                      ${k.type==="collection"?"text-green-700":k.type==="payout"?"text-orange-700":"text-purple-700"}`,children:k.type==="collection"?"ğŸ’° ìˆ˜ê¸ˆ":k.type==="payout"?"ğŸ’³ ì§€ê¸‰":"ğŸ“¥ ì„¸ê¸ˆê³„ì‚°ì„œ"}),e.jsx("p",{className:"text-gray-600 text-sm mt-1",children:k.label}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:k.weekLabel})]}),k.amount&&e.jsxs("span",{className:"text-lg font-bold text-gray-800",children:[k.amount.toLocaleString(),"ë§Œì›"]})]})},z))})]})})};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700",children:"ğŸ“† ì •ì‚° íˆìŠ¤í† ë¦¬ ìº˜ë¦°ë”"}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["ì´ ",U.length,"ê°œì˜ ì´ë²¤íŠ¸ / ",f.length,"ê°œ ë°°ì¹˜"]})]}),e.jsxs("div",{className:"flex gap-2 text-xs",children:[e.jsx("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full",children:"ğŸ’° ìˆ˜ê¸ˆ"}),e.jsx("span",{className:"px-2 py-1 bg-orange-100 text-orange-700 rounded-full",children:"ğŸ’³ ì§€ê¸‰"}),e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full",children:"ğŸ“¥ ì„¸ê¸ˆê³„ì‚°ì„œ"})]})]}),se(),Te(),Ee(),P()]})}const ia=(u,h,j="Sheet1")=>{const b=Fe.book_new(),I=Fe.json_to_sheet(h),v=h.length>0?Object.keys(h[0]).map(M=>({wch:Math.max(M.length,...h.map(f=>f[M]?f[M].toString().length:0))+2})):[];I["!cols"]=v,Fe.book_append_sheet(b,I,j),Es(b,`${u}.xlsx`)};function Aa(){const{showToast:u}=ms(),[h,j]=L.useState([]),[b,I]=L.useState([]),[v,M]=L.useState(""),[f,U]=L.useState(new Date().getFullYear()),[S,se]=L.useState("all"),[Te,Ee]=L.useState(!0),[P,D]=L.useState("monday"),[k,z]=L.useState(()=>ke(new Date)),[R,W]=L.useState([]),[J,O]=L.useState(!1),[je,ce]=L.useState(!1),[ae,de]=L.useState(!1),[V,ie]=L.useState([]),[Z,Ne]=L.useState(!1),[Tt,xe]=L.useState(!1),[ve,me]=L.useState(null),[H,Q]=L.useState({category:"ê´‘ê³ ë¹„",amount:0,description:"",date:new Date().toISOString().split("T")[0]}),[B,Pe]=L.useState({total:0,byCategory:{ê´‘ê³ ë¹„:0,ë§ˆì¼€íŒ…ë¹„:0,ì‚¬ë¬´ë¹„ìš©:0,ì¸ê±´ë¹„:0,êµí†µë¹„:0,ì‹ëŒ€:0,ê¸°íƒ€:0},byMonth:[]}),[$,Me]=L.useState([]),[Et,Je]=L.useState(!1),[Qe,we]=L.useState(!1),pe=L.useRef(null);L.useEffect(()=>{(async()=>{const[l,i]=await Promise.all([ht(),us()]);j(l),I(i),i.length>0&&M(i[0].partnerId),Ee(!1),setTimeout(async()=>{const c=await ht(),s=Array.isArray(c)?c:[],r=Array.isArray(l)?l:[];s.length>r.length&&(console.log("[Settlement] Re-fetched cases:",s.length),j(s))},1500)})()},[]),L.useEffect(()=>{(async()=>{if(!v||v==="all")return;O(!0);const l=await bs(v,k.getFullYear());W(Array.isArray(l)?l:[]),O(!1)})()},[v,k]),L.useEffect(()=>{(async()=>{if(P!=="expenses")return;Ne(!0);const[l,i]=await Promise.all([_e(v,f),ze(f,S,v)]);ie(l),Pe(i),Ne(!1)})()},[P,f,S,v]),L.useEffect(()=>{if(P!=="expenses")return;Je(!0);const t=pt(f),l=He(t,b);Me(l),Je(!1)},[P,f,b]);const Pt=async t=>{var c;const l=(c=t.target.files)==null?void 0:c[0];if(!l)return;we(!0);const i=new FileReader;i.onload=s=>{var r;try{const n=(r=s.target)==null?void 0:r.result;if(!n){u("íŒŒì¼ì„ ì½ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.","error"),we(!1);return}const d=Ps(n,{type:"binary",cellDates:!0,codepage:949}),x=d.SheetNames[0],a=d.Sheets[x],p=Fe.sheet_to_json(a,{header:1,raw:!1,defval:""});console.log("[DEBUG] Excel Data - Total Rows:",p.length),console.log("[DEBUG] First 15 rows:",p.slice(0,15)),console.log("[DEBUG] File name:",l.name);const{bank:o,transactions:g}=Ss(p,l.name);console.log("[DEBUG] Detected bank:",o),console.log("[DEBUG] Parsed transactions count:",g.length),g.length>0&&console.log("[DEBUG] First transaction:",g[0]);const N=He(g,b),{added:y,skipped:F}=Cs(N),Y=pt(f),A=He(Y,b);Me(A),u(`${o==="kakao"?"ì¹´ì¹´ì˜¤ë±…í¬":"ì¼€ì´ë±…í¬"}: ${y}ê±´ ì¶”ê°€ë¨ ${F>0?`(${F}ê±´ ì¤‘ë³µ)`:""}`,"success")}catch(n){console.error("íŒŒì¼ íŒŒì‹± ì˜¤ë¥˜:",n),u("íŒŒì¼ íŒŒì‹±ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ì˜¬ë°”ë¥¸ ì€í–‰ ê±°ë˜ë‚´ì—­ íŒŒì¼ì¸ì§€ í™•ì¸í•´ì£¼ì„¸ìš”.","error")}finally{we(!1),pe.current&&(pe.current.value="")}},i.onerror=()=>{console.error("íŒŒì¼ ì½ê¸° ì˜¤ë¥˜"),u("íŒŒì¼ì„ ì½ëŠ” ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.","error"),we(!1),pe.current&&(pe.current.value="")},i.readAsBinaryString(l)},Mt=(t,l)=>{const i=Is(t,{category:l,isVerified:!0});i&&Me(c=>c.map(s=>s.id===t?i:s))};if(Te)return e.jsx("div",{children:"ë¡œë”©ì¤‘..."});const _=Array.isArray(h)?h:[],X=v==="all",C=X?null:b.find(t=>t.partnerId===v),Re=ps(k),m=(Array.isArray(R)?R:[]).find(t=>t.weekLabel===Re&&t.partnerId===v),Rt=()=>{const t=new Date(k);t.setDate(t.getDate()-7),z(ke(t))},Ot=()=>{const t=new Date(k);t.setDate(t.getDate()+7),z(ke(t))},Bt=()=>z(ke(new Date)),Ut=async()=>{if(!v||v==="all")return;O(!0);const t=await Ns(v,k);W(l=>l.find(c=>c.batchId===t.batchId)?l:[t,...l]),O(!1),u(`${Re} ë°°ì¹˜ê°€ ìƒì„±ë˜ì—ˆìŠµë‹ˆë‹¤.`,"success")},Wt=async()=>{if(!m)return;O(!0);const t=await vs(m.batchId);t&&(W(l=>l.map(i=>i.batchId===t.batchId?t:i)),u("ë°°ì¹˜ ë°ì´í„°ê°€ ìµœì‹  ê³ ê° ì •ë³´ë¡œ ì—…ë°ì´íŠ¸ë˜ì—ˆìŠµë‹ˆë‹¤.","success")),O(!1)},et=async t=>{m&&(await te(m.batchId,{status:t}),W(l=>l.map(i=>i.batchId===m.batchId?{...i,status:t,updatedAt:new Date().toISOString()}:i)),u(`ìƒíƒœê°€ '${Le(t)}'(ìœ¼)ë¡œ ë³€ê²½ë˜ì—ˆìŠµë‹ˆë‹¤.`,"success"))},Ht=async t=>{m&&(await te(m.batchId,{confirmationEvidence:{text:t,confirmedAt:new Date().toISOString()},status:"confirmed"}),W(l=>l.map(i=>i.batchId===m.batchId?{...i,status:"confirmed",confirmationEvidence:{text:t,confirmedAt:new Date().toISOString()},updatedAt:new Date().toISOString()}:i)),u("í™•ì¸ ì¦ë¹™ì´ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.","success"))},_t=async t=>{if(!m)return;const l=t.supplyAmount+t.vat;await te(m.batchId,{invoiceInfo:{...t,total:l},status:"invoiced"}),W(i=>i.map(c=>c.batchId===m.batchId?{...c,status:"invoiced",invoiceInfo:{...t,total:l},updatedAt:new Date().toISOString()}:c)),u("ì„¸ê¸ˆê³„ì‚°ì„œ ì •ë³´ê°€ ì €ì¥ë˜ì—ˆìŠµë‹ˆë‹¤.","success")},zt=()=>{var i,c,s,r;if(!C||!m)return;const l=(((i=C.kakaoTemplates)==null?void 0:i.invoiceNotice)||"").replace(/\{\{ê±°ë˜ì²˜ëª…\}\}/g,C.name).replace(/\{\{ì£¼ì°¨ë¼ë²¨\}\}/g,m.weekLabel).replace(/\{\{ê³µê¸‰ê°€\}\}/g,(((c=m.invoiceInfo)==null?void 0:c.supplyAmount)||0).toLocaleString()).replace(/\{\{VAT\}\}/g,(((s=m.invoiceInfo)==null?void 0:s.vat)||0).toLocaleString()).replace(/\{\{í•©ê³„\}\}/g,(((r=m.invoiceInfo)==null?void 0:r.total)||0).toLocaleString()).replace(/\{\{ê³„ì¢Œì •ë³´\}\}/g,C.bankInfo?`${C.bankInfo.bankName} ${C.bankInfo.accountNumber} (${C.bankInfo.accountHolder})`:"");navigator.clipboard.writeText(l),de(!0),setTimeout(()=>de(!1),2e3),u("í…œí”Œë¦¿ì´ í´ë¦½ë³´ë“œì— ë³µì‚¬ë˜ì—ˆìŠµë‹ˆë‹¤.","success")},ne=b.find(t=>t.partnerId===v),tt=X?_:_.filter(t=>!t||!t.partnerId?!1:!!(t.partnerId===v||ne&&t.partnerId===ne.name||ne&&v&&t.partnerId&&(String(t.partnerId).includes(String(v))||String(v).includes(String(t.partnerId))))),re=Array.isArray(tt)?tt:[];console.log("[Settlement Debug]",{selectedPartnerId:v,selectedPartnerName:ne==null?void 0:ne.name,totalCases:_.length,partnerCasesCount:re.length,sampleCasePartnerIds:_.slice(0,5).map(t=>({name:t.customerName,partnerId:t.partnerId,contractAt:t.contractAt}))});const Se=t=>{const l=b.find(i=>i.partnerId===t.partnerId);return l?yt(t.contractFee||0,l.commissionRules):0},Yt=(t,l,i)=>{var ge,ue;const c=b.find(E=>E.partnerId===t.partnerId);if(!c)return{payable:0,thisWeekPayable:0,total:0,isPartial:!1,thisWeekDeposit:0,cumulativeDeposit:0,isThisWeekDeposit:!1,isFutureDeposit:!1,previouslyPaid:0};const s=c.commissionRules.find(E=>E.active&&(t.contractFee||0)>=E.minFee&&((t.contractFee||0)<=E.maxFee||E.maxFee===0)),r=(s==null?void 0:s.commission)||0,n=(s==null?void 0:s.fullPayoutThreshold)||0,d=t.depositHistory&&t.depositHistory.length>0?t.depositHistory:[{date:t.deposit1Date||"",amount:t.deposit1Amount||0},{date:t.deposit2Date||"",amount:t.deposit2Amount||0}],x=new Date().toISOString().split("T")[0],a=d.filter(E=>E.date&&E.date>=l&&E.date<=i),p=a.reduce((E,K)=>E+(K.amount||0),0),o=a.length>0&&a.every(E=>E.date>x),g=d.filter(E=>E.date&&E.date<=i).reduce((E,K)=>E+(K.amount||0),0),N=d.filter(E=>E.date&&E.date<l).reduce((E,K)=>E+(K.amount||0),0),y=(ge=c.settlementConfig)!=null&&ge.downPaymentPercentage?c.settlementConfig.downPaymentPercentage/100:.1,F=(ue=c.settlementConfig)!=null&&ue.firstPayoutPercentage?c.settlementConfig.firstPayoutPercentage/100:.5,Y=t.contractFee||0;let A=0;n>0&&N>=n?A=r:N>=Y*y&&(A=r*F);let w=0,T=!1;n>0&&g>=n?(w=r,T=!1):g>=Y*y&&(w=r*F,T=!0);const le=Math.max(0,w-A);return{payable:w,thisWeekPayable:le,previouslyPaid:A,total:r,isPartial:T,thisWeekDeposit:p,cumulativeDeposit:g,isThisWeekDeposit:p>0,isFutureDeposit:o}},G=re.filter(t=>{if(!t.contractAt||!t.contractFee)return!1;const l=t.contractAt;let i;try{i=Ae(l),isNaN(i.getTime())&&(i=new Date(l))}catch{return!1}if(isNaN(i.getTime()))return!1;const c=i.getFullYear(),s=i.getMonth()+1;return c===f&&(S==="all"||s===S)}),Oe=new Date().toISOString().split("T")[0],Ce=t=>{const l=t.depositHistory&&t.depositHistory.length>0?t.depositHistory:[{date:t.deposit1Date||"",amount:t.deposit1Amount||0},{date:t.deposit2Date||"",amount:t.deposit2Amount||0}],i=l.filter(r=>r.date&&r.date<=Oe).reduce((r,n)=>r+(n.amount||0),0),c=l.filter(r=>r.date&&r.date>Oe).reduce((r,n)=>r+(n.amount||0),0),s=l.reduce((r,n)=>r+(n.amount||0),0);return{actualDeposit:i,expectedDeposit:c,totalDeposit:s}},Vt=()=>{const t=S==="all"?`${f}-`:`${f}-${String(S).padStart(2,"0")}`;let l=0,i=0;return re.forEach(c=>{(c.depositHistory&&c.depositHistory.length>0?c.depositHistory:[{date:c.deposit1Date||"",amount:c.deposit1Amount||0},{date:c.deposit2Date||"",amount:c.deposit2Amount||0}]).forEach(r=>{r.date&&r.date.startsWith(t)&&r.date>Oe&&r.amount>0&&(l++,i+=r.amount)})}),{expectedCount:l,expectedAmount:i}},he=t=>{var p,o;const l=b.find(g=>g.partnerId===t.partnerId);if(!l)return{paidCommission:0,unpaidCommission:0,totalCommission:0};const i=l.commissionRules.find(g=>g.active&&(t.contractFee||0)>=g.minFee&&((t.contractFee||0)<=g.maxFee||g.maxFee===0)),c=(i==null?void 0:i.commission)||0,s=(i==null?void 0:i.fullPayoutThreshold)||0,{actualDeposit:r}=Ce(t),n=(p=l.settlementConfig)!=null&&p.downPaymentPercentage?l.settlementConfig.downPaymentPercentage/100:.1,d=(o=l.settlementConfig)!=null&&o.firstPayoutPercentage?l.settlementConfig.firstPayoutPercentage/100:.5,x=t.contractFee||0;let a=0;return s>0&&r>=s?a=c:r>=x*n&&(a=c*d),{paidCommission:a,unpaidCommission:c-a,totalCommission:c}},Ie=G.length,Be=G.reduce((t,l)=>t+(l.contractFee||0),0),Ue=G.reduce((t,l)=>t+Se(l),0),st=re.filter(t=>["ê³„ì•½ ì™„ë£Œ","1ì°¨ ì…ê¸ˆì™„ë£Œ","2ì°¨ ì…ê¸ˆì™„ë£Œ"].includes(t.status)&&!t.contractAt).length,at=G.reduce((t,l)=>t+Ce(l).actualDeposit,0),{expectedCount:Kt,expectedAmount:Gt}=Vt(),q=G.reduce((t,l)=>t+he(l).paidCommission,0),rt=Ue-q,Zt=G.filter(t=>(t.installmentMonths||1)>1&&he(t).paidCommission<he(t).totalCommission).length,Xt=G.filter(t=>{const{actualDeposit:l,totalDeposit:i}=Ce(t);return i>0&&l>=i}).length,nt=Ie>0?Math.round(Xt/Ie*100):0,lt=Array.from({length:12},(t,l)=>{const i=`${f}-${String(l+1).padStart(2,"0")}`,c=re.filter(a=>a.contractAt&&a.contractAt.startsWith(i)),s=c.reduce((a,p)=>a+(p.contractFee||0),0),r=c.reduce((a,p)=>a+Se(p),0),n=c.reduce((a,p)=>a+Ce(p).actualDeposit,0),d=c.reduce((a,p)=>a+he(p).paidCommission,0),x=r-d;return{name:`${l+1}ì›”`,count:c.length,revenue:s,commission:r,actualDeposit:n,paidCommission:d,unpaidCommission:x,netProfit:n-d}}),qt=t=>{var l;return((l=b.find(i=>i.partnerId===t))==null?void 0:l.name)||"-"},ot=(m==null?void 0:m.dealIds.map(t=>_.find(l=>l.caseId===t)).filter(Boolean))||[],Jt=()=>{var t,l;return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border border-blue-100",children:[e.jsxs("h3",{className:"font-bold text-blue-800 mb-4 text-lg flex items-center",children:[e.jsx(Rs,{className:"mr-2",size:20})," ì›”ìš”ì¼: ì •ì‚° í™•ì¸"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"í•´ë‹¹ ì£¼ì°¨ì— ì •ì‚° ëŒ€ìƒ ë”œì„ í™•ì¸í•˜ê³ , ê±°ë˜ì²˜ ì¹´í†¡ í™•ì¸ ì¦ë¹™ì„ ê¸°ë¡í•©ë‹ˆë‹¤."}),m?e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ë”œ ìˆ˜"}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800",children:[m.dealIds.length,"ê±´"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ì´ ìˆ˜ì„ë£Œ"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600",children:[m.totalContractFee.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ì´ ìˆ˜ìˆ˜ë£Œ"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600",children:[m.totalCommission.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ìƒíƒœ"}),e.jsx("p",{className:`text-xl font-bold ${m.status==="draft"?"text-gray-600":"text-green-600"}`,children:Le(m.status)})]})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 overflow-hidden",children:[e.jsxs("div",{className:"p-3 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[e.jsx("h4",{className:"font-bold text-gray-700 text-sm",children:"ì •ì‚° ëŒ€ìƒ ë”œ ëª©ë¡"}),e.jsxs("button",{onClick:Wt,disabled:J,className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700 disabled:opacity-50",title:"ê³ ê° ìƒì„¸í˜ì´ì§€ ë³€ê²½ì‚¬í•­ì„ ë°˜ì˜í•©ë‹ˆë‹¤",children:[e.jsx(Ks,{size:14,className:J?"animate-spin":""}),"ìƒˆë¡œê³ ì¹¨"]})]}),e.jsx("div",{className:"max-h-48 overflow-y-auto",children:ot.length===0?e.jsx("p",{className:"text-center text-gray-500 py-6",children:"ì •ì‚° ëŒ€ìƒ ë”œì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left px-3 py-2",children:"ê³ ê°ëª…"}),e.jsx("th",{className:"text-center px-2 py-2 text-xs",children:"ë¶„ë‚©"}),e.jsx("th",{className:"text-right px-2 py-2",children:"ìˆ˜ì„ë£Œ"}),e.jsx("th",{className:"text-right px-2 py-2",children:"ì…ê¸ˆì•¡"}),e.jsx("th",{className:"text-right px-2 py-2 text-orange-600",children:"ì´ìˆ˜ìˆ˜ë£Œ"}),e.jsx("th",{className:"text-right px-2 py-2 text-green-600 font-bold",children:"ê¸ˆì£¼ì§€ê¸‰"}),e.jsx("th",{className:"text-center px-2 py-2",children:"ìƒíƒœ"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:ot.map(i=>{var s;const c=Yt(i,m.startDate,m.endDate);return e.jsxs("tr",{className:`hover:bg-gray-50 ${c.isFutureDeposit?"bg-purple-50/50":""}`,children:[e.jsxs("td",{className:"px-3 py-2 font-medium",children:[i.customerName,c.isFutureDeposit&&e.jsx("span",{className:"ml-1 text-xs text-purple-500",children:"(ì˜ˆìƒ)"})]}),e.jsx("td",{className:"px-2 py-2 text-center text-xs text-gray-500",children:i.installmentMonths||"-"}),e.jsxs("td",{className:"px-2 py-2 text-right text-gray-700",children:[(s=i.contractFee)==null?void 0:s.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:`px-2 py-2 text-right font-medium ${c.isFutureDeposit?"text-purple-500":"text-blue-600"}`,children:[c.isFutureDeposit&&e.jsx("span",{className:"text-xs mr-0.5",children:"ì˜ˆìƒ"}),c.thisWeekDeposit.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"px-2 py-2 text-right text-orange-500",children:[c.total.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:`px-2 py-2 text-right font-bold ${c.isFutureDeposit?"text-purple-600":"text-green-600"}`,children:[c.isFutureDeposit&&e.jsx("span",{className:"text-xs mr-0.5",children:"ì˜ˆìƒ"}),c.thisWeekPayable.toLocaleString(),"ë§Œì›"]}),e.jsx("td",{className:"px-2 py-2 text-center",children:c.isFutureDeposit?e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-purple-100 text-purple-700",children:"ì˜ˆìƒ"}):c.isPartial?e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-yellow-100 text-yellow-700",children:"50%"}):c.thisWeekPayable>0?e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-green-100 text-green-700",children:"100%"}):e.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-500",children:"ëŒ€ê¸°"})})]},i.caseId)})})]})})]}),e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-2 text-sm",children:"ğŸ“ ì¹´í†¡ í™•ì¸ ì¦ë¹™"}),e.jsx("textarea",{className:"w-full p-3 border border-gray-300 rounded-lg text-sm",rows:3,placeholder:"ê±°ë˜ì²˜ì™€ì˜ ì¹´í†¡ í™•ì¸ ë‚´ìš©ì„ ê¸°ë¡í•˜ì„¸ìš”...",defaultValue:((t=m.confirmationEvidence)==null?void 0:t.text)||"",onBlur:i=>{var c;i.target.value!==((c=m.confirmationEvidence)==null?void 0:c.text)&&Ht(i.target.value)}}),((l=m.confirmationEvidence)==null?void 0:l.confirmedAt)&&e.jsxs("p",{className:"text-xs text-green-600 mt-2",children:["âœ“ ",new Date(m.confirmationEvidence.confirmedAt).toLocaleString()," í™•ì¸ë¨"]})]}),m.status==="draft"&&e.jsx("button",{onClick:()=>et("confirmed"),className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700",children:"âœ“ ì •ì‚° í™•ì¸ ì™„ë£Œ (ë½0)"})]}):e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 text-center",children:[e.jsx("p",{className:"text-gray-500 mb-4",children:"ì´ ì£¼ì°¨ì— ëŒ€í•œ ë°°ì¹˜ê°€ ì—†ìŠµë‹ˆë‹¤."}),e.jsx("button",{onClick:Ut,disabled:J||v==="all",className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-bold hover:bg-blue-700 disabled:opacity-50",children:J?"ìƒì„± ì¤‘...":"ë°°ì¹˜ ìƒì„±í•˜ê¸°"})]})]})})},Qt=()=>{var t,l,i,c,s,r,n,d,x,a;return e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-yellow-50 p-6 rounded-xl border border-yellow-100",children:[e.jsxs("h3",{className:"font-bold text-yellow-800 mb-4 text-lg flex items-center",children:[e.jsx(Os,{className:"mr-2",size:20})," í™”ìš”ì¼: ë°œí–‰ / ìˆ˜ê¸ˆ"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"ì„¸ê¸ˆê³„ì‚°ì„œë¥¼ ë°œí–‰í•˜ê³ , ìˆ˜ê¸ˆ ìƒíƒœë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤."}),m?m.status==="draft"?e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 text-center",children:[e.jsx(gt,{className:"mx-auto text-yellow-500 mb-2",size:32}),e.jsx("p",{className:"text-gray-600",children:"ë¨¼ì € ì›”ìš”ì¼ íƒ­ì—ì„œ ì •ì‚° í™•ì¸ì„ ì™„ë£Œí•´ì£¼ì„¸ìš”."})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-3 text-sm",children:"ğŸ“„ ì„¸ê¸ˆê³„ì‚°ì„œ ì •ë³´"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"ë°œí–‰ì¼"}),e.jsx("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded text-sm",defaultValue:((t=m.invoiceInfo)==null?void 0:t.issueDate)||"",id:"issueDate"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"ê³µê¸‰ê°€ (ë§Œì›)"}),e.jsx("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded text-sm",defaultValue:((l=m.invoiceInfo)==null?void 0:l.supplyAmount)||m.totalCommission,id:"supplyAmount"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"VAT (ë§Œì›)"}),e.jsx("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded text-sm",defaultValue:((i=m.invoiceInfo)==null?void 0:i.vat)||Math.round(m.totalCommission*.1),id:"vat"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-xs text-gray-500 block mb-1",children:"ìŠ¹ì¸ë²ˆí˜¸"}),e.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded text-sm",placeholder:"ë°œí–‰ í›„ ì…ë ¥",defaultValue:((c=m.invoiceInfo)==null?void 0:c.approvalNumber)||"",id:"approvalNumber"})]})]}),e.jsx("button",{onClick:()=>{const p=document.getElementById("issueDate").value,o=Number(document.getElementById("supplyAmount").value),g=Number(document.getElementById("vat").value),N=document.getElementById("approvalNumber").value;_t({issueDate:p,supplyAmount:o,vat:g,approvalNumber:N})},className:"mt-4 bg-yellow-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-yellow-700",children:"ğŸ’¾ ì €ì¥"})]}),((s=C==null?void 0:C.kakaoTemplates)==null?void 0:s.invoiceNotice)&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h4",{className:"font-bold text-gray-700 text-sm",children:"ğŸ“± ì¹´í†¡ í…œí”Œë¦¿"}),e.jsxs("button",{onClick:zt,className:"flex items-center gap-1 text-sm text-blue-600 hover:text-blue-700",children:[ae?e.jsx(Us,{size:14}):e.jsx(Ws,{size:14}),ae?"ë³µì‚¬ë¨!":"ë³µì‚¬"]})]}),e.jsx("div",{className:"bg-gray-50 p-3 rounded text-sm text-gray-600 whitespace-pre-line",children:C.kakaoTemplates.invoiceNotice.replace(/\{\{ê±°ë˜ì²˜ëª…\}\}/g,C.name).replace(/\{\{ì£¼ì°¨ë¼ë²¨\}\}/g,m.weekLabel).replace(/\{\{ê³µê¸‰ê°€\}\}/g,(((r=m.invoiceInfo)==null?void 0:r.supplyAmount)||m.totalCommission).toLocaleString()).replace(/\{\{VAT\}\}/g,(((n=m.invoiceInfo)==null?void 0:n.vat)||Math.round(m.totalCommission*.1)).toLocaleString()).replace(/\{\{í•©ê³„\}\}/g,(((d=m.invoiceInfo)==null?void 0:d.total)||Math.round(m.totalCommission*1.1)).toLocaleString()).replace(/\{\{ê³„ì¢Œì •ë³´\}\}/g,C.bankInfo?`${C.bankInfo.bankName} ${C.bankInfo.accountNumber} (${C.bankInfo.accountHolder})`:"(ê³„ì¢Œì •ë³´ ë¯¸ì„¤ì •)")})]}),m.status!=="draft"&&e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsx("h4",{className:"font-bold text-gray-700 mb-2 text-sm",children:"ğŸ’° ìˆ˜ê¸ˆ ìƒíƒœ"}),(x=m.collectionInfo)!=null&&x.collectedAt?e.jsxs("p",{className:"text-green-600 font-bold",children:["âœ“ ìˆ˜ê¸ˆì™„ë£Œ (",m.collectionInfo.collectedAt,") - ",(a=m.collectionInfo.amount)==null?void 0:a.toLocaleString(),"ë§Œì›"]}):e.jsx("button",{onClick:()=>et("collected"),className:"bg-green-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-green-700",children:"ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬"})]})]}):e.jsx("div",{className:"bg-white p-6 rounded-lg border border-gray-200 text-center",children:e.jsx("p",{className:"text-gray-500",children:"ë¨¼ì € ì›”ìš”ì¼ íƒ­ì—ì„œ ë°°ì¹˜ë¥¼ ìƒì„±í•´ì£¼ì„¸ìš”."})})]})})},es=()=>{var x,a,p;const t=(m==null?void 0:m.payoutItems)||[],l=async()=>{if(!m)return;const o={id:`payout-${Date.now()}`,partnerName:"",partnerAccount:"",amount:0},g=[...t,o];await te(m.batchId,{payoutItems:g}),W(N=>N.map(y=>y.batchId===m.batchId?{...y,payoutItems:g}:y))},i=async(o,g)=>{if(!m)return;const N=t.map(y=>y.id===o?{...y,...g}:y);await te(m.batchId,{payoutItems:N}),W(y=>y.map(F=>F.batchId===m.batchId?{...F,payoutItems:N}:F))},c=async o=>{if(!m)return;const g=t.filter(N=>N.id!==o);await te(m.batchId,{payoutItems:g}),W(N=>N.map(y=>y.batchId===m.batchId?{...y,payoutItems:g}:y))},s=async o=>{const g=new Date().toISOString().split("T")[0];await i(o,{paidAt:g})},r=async()=>{if(!m)return;const g={collectedAt:new Date().toISOString().split("T")[0],amount:m.totalCommission};await te(m.batchId,{collectionInfo:g,status:"collected"}),W(N=>N.map(y=>y.batchId===m.batchId?{...y,collectionInfo:g,status:"collected"}:y)),u("ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.","success")},n=async()=>{if(!m)return;const g={receivedAt:new Date().toISOString().split("T")[0]};await te(m.batchId,{purchaseInvoice:g,status:"completed"}),W(N=>N.map(y=>y.batchId===m.batchId?{...y,purchaseInvoice:g,status:"completed"}:y)),u("ë§¤ì… ì„¸ê¸ˆê³„ì‚°ì„œ ìˆ˜ì·¨ ì™„ë£Œ ì²˜ë¦¬ë˜ì—ˆìŠµë‹ˆë‹¤.","success")},d=(C==null?void 0:C.payoutPartnerPresets)||[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"bg-blue-50 p-6 rounded-xl border border-blue-100",children:[e.jsx("h3",{className:"font-bold text-blue-800 mb-4 text-lg flex items-center",children:"ğŸ’° ìˆ˜ê¸ˆ ì •ë³´ (ê±°ë˜ì²˜ì—ì„œ ë°›ì„ ê¸ˆì•¡)"}),!m||!["collected","invoiced","confirmed","paid","completed"].includes(m.status)?e.jsxs("div",{className:"bg-white p-6 rounded-lg border border-gray-200 text-center",children:[e.jsx(gt,{className:"mx-auto text-yellow-500 mb-2",size:32}),e.jsx("p",{className:"text-gray-600",children:"í™”ìš”ì¼ íƒ­ì—ì„œ ë°œí–‰ì„ ë¨¼ì € ì™„ë£Œí•´ì£¼ì„¸ìš”."})]}):e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ìˆ˜ê¸ˆ ëŒ€ìƒ ê¸ˆì•¡"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-700",children:[m.totalCommission.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ê±°ë˜ì²˜"}),e.jsx("p",{className:"text-lg font-bold text-gray-700",children:C==null?void 0:C.name})]}),e.jsxs("div",{className:"bg-gray-50 p-3 rounded-lg",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ë‚´ ì…ê¸ˆ ê³„ì¢Œ"}),e.jsx("p",{className:"text-sm font-medium text-gray-600",children:C!=null&&C.bankInfo?`${C.bankInfo.bankName} ${C.bankInfo.accountNumber}`:"(ì„¤ì •ì—ì„œ ì…ë ¥)"})]})]}),(x=m.collectionInfo)!=null&&x.collectedAt?e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsxs("p",{className:"text-green-700 font-bold text-lg",children:["âœ“ ìˆ˜ê¸ˆì™„ë£Œ (",m.collectionInfo.collectedAt,")"]}),e.jsxs("p",{className:"text-green-600",children:[(a=m.collectionInfo.amount)==null?void 0:a.toLocaleString(),"ë§Œì› ì…ê¸ˆ í™•ì¸"]})]}):e.jsx("button",{onClick:r,className:"w-full bg-blue-600 text-white py-3 rounded-lg font-bold hover:bg-blue-700",children:"ğŸ’° ìˆ˜ê¸ˆ ì™„ë£Œ ì²˜ë¦¬"})]})]}),e.jsxs("div",{className:"bg-green-50 p-6 rounded-xl border border-green-100",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("h3",{className:"font-bold text-green-800 text-lg flex items-center",children:[e.jsx(Ys,{className:"mr-2",size:20})," íŒŒíŠ¸ë„ˆ ì§€ê¸‰ (",t.length,"ê±´)"]}),m&&["collected","invoiced","confirmed","paid","completed"].includes(m.status)&&e.jsxs("button",{onClick:l,className:"bg-green-600 text-white px-3 py-1.5 rounded-lg text-sm font-medium hover:bg-green-700 flex items-center gap-1",children:[e.jsx(Ze,{size:16})," ì§€ê¸‰ ì¶”ê°€"]})]}),t.length===0?e.jsx("p",{className:"text-sm text-gray-500 bg-white p-4 rounded-lg",children:'íŒŒíŠ¸ë„ˆ ì§€ê¸‰ì´ ì—†ìœ¼ë©´ "ì§€ê¸‰ ì¶”ê°€" ì—†ì´ ë‘ì„¸ìš”.'}):e.jsx("div",{className:"space-y-3",children:t.map((o,g)=>{var N;return e.jsxs("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:[e.jsxs("div",{className:"flex justify-between items-start mb-3",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["ì§€ê¸‰ #",g+1]}),!o.paidAt&&e.jsx("button",{onClick:()=>c(o.id),className:"text-red-500 hover:text-red-700",children:e.jsx(Ct,{size:16})})]}),d.length>0&&!o.partnerName&&e.jsxs("div",{className:"mb-3",children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"í”„ë¦¬ì…‹ ì„ íƒ"}),e.jsxs("select",{onChange:y=>{const F=d.find(Y=>Y.id===y.target.value);F&&i(o.id,{partnerName:F.name,partnerAccount:F.accountInfo,amount:F.defaultAmount||0})},className:"w-full border border-gray-300 rounded-lg px-3 py-2",children:[e.jsx("option",{value:"",children:"ì§ì ‘ ì…ë ¥"}),d.map(y=>e.jsxs("option",{value:y.id,children:[y.name," - ",y.accountInfo]},y.id))]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"íŒŒíŠ¸ë„ˆëª…"}),e.jsx("input",{type:"text",defaultValue:o.partnerName,onBlur:y=>i(o.id,{partnerName:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"íŒŒíŠ¸ë„ˆëª…"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ê³„ì¢Œì •ë³´"}),e.jsx("input",{type:"text",defaultValue:o.partnerAccount,onBlur:y=>i(o.id,{partnerAccount:y.target.value}),className:"w-full border border-gray-300 rounded-lg px-3 py-2",placeholder:"ì€í–‰ ê³„ì¢Œë²ˆí˜¸"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:"ê¸ˆì•¡ (ë§Œì›)"}),e.jsx("input",{type:"number",defaultValue:o.amount,onBlur:y=>i(o.id,{amount:parseInt(y.target.value)||0}),className:"w-full border border-gray-300 rounded-lg px-3 py-2 font-bold",placeholder:"0"})]})]}),e.jsx("div",{className:"mt-3",children:o.paidAt?e.jsx("div",{className:"bg-green-50 p-2 rounded border border-green-200",children:e.jsxs("p",{className:"text-green-700 font-bold",children:["âœ“ ì§€ê¸‰ì™„ë£Œ (",o.paidAt,") - ",(N=o.amount)==null?void 0:N.toLocaleString(),"ë§Œì›"]})}):e.jsx("button",{onClick:()=>s(o.id),className:"w-full bg-green-600 text-white py-2 rounded-lg font-medium hover:bg-green-700",children:"âœ“ ì§€ê¸‰ ì™„ë£Œ ì²˜ë¦¬"})})]},o.id)})})]}),e.jsxs("div",{className:"bg-purple-50 p-6 rounded-xl border border-purple-100",children:[e.jsx("h3",{className:"font-bold text-purple-800 mb-4 text-lg flex items-center",children:"ğŸ“¥ ë§¤ì… ì„¸ê¸ˆê³„ì‚°ì„œ ìˆ˜ì·¨"}),m&&["collected","invoiced","confirmed","paid","completed"].includes(m.status)&&e.jsx("div",{className:"bg-white p-4 rounded-lg border border-gray-200",children:(p=m.purchaseInvoice)!=null&&p.receivedAt?e.jsx("div",{className:"bg-purple-50 p-3 rounded border border-purple-200",children:e.jsxs("p",{className:"text-purple-700 font-bold text-lg",children:["âœ“ ìˆ˜ì·¨ì™„ë£Œ (",m.purchaseInvoice.receivedAt,")"]})}):e.jsx("button",{onClick:n,className:"w-full bg-purple-600 text-white py-3 rounded-lg font-bold hover:bg-purple-700",children:"ğŸ“¥ ë§¤ì… ì„¸ê¸ˆê³„ì‚°ì„œ ìˆ˜ì·¨ ì™„ë£Œ"})})]})]})},ts=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{onClick:()=>ce(!0),className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100 cursor-pointer hover:bg-gray-50 hover:border-blue-300 transition-all group",children:[e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ğŸ“‹ ê³„ì•½ ê±´ìˆ˜"}),e.jsx(Bs,{size:14,className:"text-gray-300 group-hover:text-blue-500"})]}),e.jsxs("p",{className:"text-2xl font-bold text-gray-800 mt-1",children:[Ie,"ê±´"]}),e.jsx("p",{className:"text-xs text-blue-500 mt-1",children:"ìƒì„¸ ë³´ê¸° â†’"})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ğŸ’° ì´ ë§¤ì¶œ"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[Be.toLocaleString(),"ë§Œì›"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ìˆ˜ì„ë£Œ í•©ê³„"})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"âœ… ì‹¤ì œ ì…ê¸ˆì•¡"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:[at.toLocaleString(),"ë§Œì›"]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"ì˜¤ëŠ˜ê¹Œì§€ í™•ì •"})]}),e.jsxs("div",{className:"bg-white p-5 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("p",{className:"text-sm text-gray-500",children:"ğŸ“… ì˜ˆìƒ ì…ê¸ˆì•¡"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-500 mt-1",children:[Gt.toLocaleString(),"ë§Œì›"]}),e.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:[Kt,"ê±´ ì…ê¸ˆ ì˜ˆì •"]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-5 rounded-xl shadow-sm border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-700",children:"ğŸ’µ ì§€ê¸‰ëœ ìˆ˜ìˆ˜ë£Œ"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:[q.toLocaleString(),"ë§Œì›"]}),e.jsx("p",{className:"text-xs text-green-500 mt-1",children:"ì…ê¸ˆ í™•ì • ê¸°ì¤€"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-orange-50 to-white p-5 rounded-xl shadow-sm border border-orange-200",children:[e.jsx("p",{className:"text-sm text-orange-700",children:"ğŸ”œ ë¯¸ì§€ê¸‰ ìˆ˜ìˆ˜ë£Œ"}),e.jsxs("p",{className:"text-2xl font-bold text-orange-600 mt-1",children:[rt.toLocaleString(),"ë§Œì›"]}),e.jsx("p",{className:"text-xs text-orange-500 mt-1",children:"ì¶”ê°€ ì…ê¸ˆ í•„ìš”"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-indigo-50 to-white p-5 rounded-xl shadow-sm border border-indigo-200",children:[e.jsx("p",{className:"text-sm text-indigo-700",children:"ğŸ“Š ë¶„ë‚© ì§„í–‰ì¤‘"}),e.jsxs("p",{className:"text-2xl font-bold text-indigo-600 mt-1",children:[Zt,"ê±´"]}),e.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:"ì¶”ê°€ ì…ê¸ˆ ëŒ€ê¸°"})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-5 rounded-xl shadow-sm border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"ğŸ“ˆ ì…ê¸ˆ ì™„ë£Œìœ¨"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[nt,"%"]}),e.jsx("div",{className:"mt-2 h-2 bg-gray-200 rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-blue-500 rounded-full",style:{width:`${nt}%`}})})]})]}),(()=>{const t=Array.isArray(re)?re:[],l=new Date,i=t.filter(c=>{if(c.status==="ì¢…ê²°"||c.status==="ì·¨ì†Œ")return!1;const s=c.contractFee||0,r=(c.depositHistory||[]).reduce((p,o)=>p+(o.amount||0),0);if(s-r<=0)return!1;let d=c.contractAt||c.createdAt;if(c.depositHistory&&c.depositHistory.length>0){const p=c.depositHistory.map(o=>o.date).sort();d=p[p.length-1]}if(!d)return!1;const x=Ae(d);return Xe(l,x)>=30}).map(c=>{const s=c.contractFee||0,r=(c.depositHistory||[]).reduce((x,a)=>x+(a.amount||0),0),n=s-r;let d=c.contractAt||c.createdAt;if(c.depositHistory&&c.depositHistory.length>0){const x=c.depositHistory.map(a=>a.date).sort();d=x[x.length-1]}return{...c,unpaidAmount:n,overdueDays:Xe(l,Ae(d))}}).sort((c,s)=>s.unpaidAmount-c.unpaidAmount);return i.length===0?null:e.jsxs("div",{className:"bg-red-50 rounded-xl shadow-sm border border-red-100 p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"p-1.5 bg-red-100 text-red-600 rounded-lg",children:"ğŸš¨"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-red-800",children:"ì¥ê¸° ë¯¸ìˆ˜ê¸ˆ í˜„í™©"}),e.jsxs("p",{className:"text-xs text-red-600",children:["ìµœê·¼ 30ì¼ ì´ìƒ ë¯¸ì…ê¸ˆ ê³ ê° (",i.length,"ëª…)"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-red-500",children:"ì´ ë¯¸ìˆ˜ê¸ˆ"}),e.jsxs("p",{className:"font-bold text-red-700 text-lg",children:[i.reduce((c,s)=>c+s.unpaidAmount,0).toLocaleString(),"ë§Œì›"]})]})]}),e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-2 scrollbar-hide",children:i.map(c=>{var s;return e.jsxs("div",{className:"min-w-[240px] bg-white p-4 rounded-lg border border-red-200 shadow-sm flex-shrink-0",children:[e.jsxs("div",{className:"flex justify-between items-start mb-2",children:[e.jsx("span",{className:"font-bold text-gray-800",children:c.customerName}),e.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-600 text-xs rounded-full font-bold",children:["+",c.overdueDays,"ì¼ì§¸"]})]}),e.jsxs("div",{className:"space-y-1 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"ë¯¸ë‚©ì•¡"}),e.jsxs("span",{className:"font-bold text-red-600",children:[c.unpaidAmount.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-500",children:"ì§„í–‰ìƒíƒœ"}),e.jsx("span",{className:"text-gray-700",children:c.status})]})]}),e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-100 flex justify-between items-center",children:e.jsxs("p",{className:"text-xs text-gray-400",children:["ë§ˆì§€ë§‰: ",(s=c.depositHistory)!=null&&s.length?"ì…ê¸ˆ":"ê³„ì•½","ì¼ ê¸°ì¤€"]})})]},c.caseId)})})]})})(),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100 h-80 flex flex-col",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4 flex-shrink-0",children:"ğŸ“Š ì›”ë³„ ìˆ˜ìµ í˜„í™©"}),e.jsx("div",{className:"flex-1 min-h-0 w-full",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(Ye,{data:lt,children:[e.jsx(Ve,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Ke,{dataKey:"name"}),e.jsx(Ge,{}),e.jsx(ye,{formatter:t=>[`${t.toLocaleString()}ë§Œì›`,""]}),e.jsx(Nt,{}),e.jsx(oe,{dataKey:"actualDeposit",fill:"#10b981",name:"ì‹¤ì œì…ê¸ˆ",radius:[4,4,0,0]}),e.jsx(oe,{dataKey:"paidCommission",fill:"#ef4444",name:"ì§€ê¸‰ìˆ˜ìˆ˜ë£Œ",radius:[4,4,0,0]}),e.jsx(Hs,{type:"monotone",dataKey:"netProfit",stroke:"#3b82f6",strokeWidth:2,name:"ìˆœìˆ˜ìµ (ì…ê¸ˆ-ì§€ê¸‰)",dot:{r:4}})]})})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100 bg-gray-50",children:e.jsx("h3",{className:"font-bold text-gray-700",children:"ğŸ“… ì›”ë³„ ìƒì„¸ ìš”ì•½"})}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-3 text-center",children:"ì›”"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"ê±´ìˆ˜"}),e.jsx("th",{className:"py-3 px-3 text-right",children:"ë§¤ì¶œ"}),e.jsx("th",{className:"py-3 px-3 text-right text-green-600",children:"ì…ê¸ˆì•¡"}),e.jsx("th",{className:"py-3 px-3 text-right text-blue-600",children:"ì´ìˆ˜ìˆ˜ë£Œ"}),e.jsx("th",{className:"py-3 px-3 text-right text-green-600",children:"ì§€ê¸‰ì™„ë£Œ"}),e.jsx("th",{className:"py-3 px-3 text-right text-orange-600",children:"ë¯¸ì§€ê¸‰"})]})}),e.jsxs("tbody",{children:[lt.map((t,l)=>e.jsxs("tr",{className:`border-b border-gray-50 last:border-0 hover:bg-gray-50 ${S===l+1?"bg-blue-50":""}`,children:[e.jsx("td",{className:"py-3 px-3 font-medium text-center",children:t.name}),e.jsx("td",{className:"py-3 px-3 text-center text-gray-500",children:t.count}),e.jsxs("td",{className:"py-3 px-3 text-right text-gray-700",children:[t.revenue.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-green-600 font-medium",children:[t.actualDeposit.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-blue-600",children:[t.commission.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-green-600 font-bold",children:[t.paidCommission.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-orange-600",children:[t.unpaidCommission.toLocaleString(),"ë§Œì›"]})]},l)),e.jsxs("tr",{className:"bg-gray-100 font-bold border-t-2 border-gray-300",children:[e.jsx("td",{className:"py-3 px-3 text-center",children:"í•©ê³„"}),e.jsx("td",{className:"py-3 px-3 text-center",children:Ie}),e.jsxs("td",{className:"py-3 px-3 text-right text-gray-700",children:[Be.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-green-600",children:[at.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-blue-600",children:[Ue.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-green-600",children:[q.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-orange-600",children:[rt.toLocaleString(),"ë§Œì›"]})]})]})]})})]}),X&&e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden mb-6",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-blue-50 to-white",children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"ğŸ¤ íŒŒíŠ¸ë„ˆë³„ ì„±ê³¼ ë¶„ì„"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"íŒŒíŠ¸ë„ˆë³„ ìˆ˜ì„ ê±´ìˆ˜ ë° ìˆ˜ìˆ˜ë£Œ ì§€ê¸‰ í˜„í™©"})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-3 text-left",children:"íŒŒíŠ¸ë„ˆëª…"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"ê±´ìˆ˜"}),e.jsx("th",{className:"py-3 px-3 text-right",children:"ì´ ìˆ˜ì„ë£Œ"}),e.jsx("th",{className:"py-3 px-3 text-right text-blue-600",children:"ì§€ê¸‰ ì™„ë£Œ"}),e.jsx("th",{className:"py-3 px-3 text-right text-orange-600",children:"ë¯¸ì§€ê¸‰"}),e.jsx("th",{className:"py-3 px-3 text-right",children:"ì§€ê¸‰ë¥ "})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:b.map(t=>{const l=_.filter(x=>x.partnerId===t.partnerId);if(l.length===0)return null;const i=l.length,c=l.reduce((x,a)=>x+(a.contractFee||0),0),s=l.reduce((x,a)=>x+he(a).paidCommission,0),r=l.reduce((x,a)=>x+Se(a),0),n=r-s,d=r>0?Math.round(s/r*100):0;return{p:t,count:i,revenue:c,paid:s,unpaid:n,rate:d}}).filter(t=>t!==null).sort((t,l)=>((l==null?void 0:l.revenue)||0)-((t==null?void 0:t.revenue)||0)).map((t,l)=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsxs("td",{className:"py-3 px-3 font-medium text-gray-800",children:[l+1,". ",t.p.name]}),e.jsxs("td",{className:"py-3 px-3 text-center",children:[t.count,"ê±´"]}),e.jsxs("td",{className:"py-3 px-3 text-right font-bold",children:[t.revenue.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-blue-600",children:[t.paid.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-orange-600",children:[t.unpaid.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-right text-gray-500",children:[t.rate,"%"]})]},t.p.partnerId))})]})})]}),(()=>{const t=new Date,l=t.toISOString().split("T")[0],i=[];_.filter(a=>a.partnerId===v).forEach(a=>{if(!a.depositHistory||a.depositHistory.length===0||!C)return;yt(C,a.contractFee||0);let p=0;a.depositHistory.forEach((o,g)=>{if(!o.date||o.date<=l){p+=o.amount||0;return}const N=(C==null?void 0:C.commissionRules)||[],y=C==null?void 0:C.settlementConfig,F=a.depositHistory.filter((xt,xa)=>xt.date&&xt.date<=l),Y={...a,depositHistory:F},w=ft(Y,N,y).payable;p+=o.amount||0;const T={...a,depositHistory:a.depositHistory.slice(0,g+1)},le=ft(T,N,y),ge=Math.max(0,le.payable-w),ue=new Date(o.date),E=ue.getDay(),K=new Date(ue);K.setDate(K.getDate()+(7-E)),K.setDate(K.getDate()+2),i.push({caseId:a.caseId,customerName:a.customerName,depositDate:o.date,amount:o.amount||0,depositNumber:g+1,contractFee:a.contractFee||0,totalDeposited:p,expectedPayout:ge,payoutDate:K.toISOString().split("T")[0]})})}),i.sort((a,p)=>a.depositDate.localeCompare(p.depositDate));const s=new Date(t);s.setDate(s.getDate()+60);const r=s.toISOString().split("T")[0],n=i.filter(a=>a.depositDate<=r),d=n.reduce((a,p)=>a+p.amount,0),x=n.reduce((a,p)=>a+p.expectedPayout,0);return n.length===0?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ”®"}),e.jsx("h3",{className:"font-bold text-gray-700",children:"ë¯¸ë˜ ì…ê¸ˆ/ì§€ê¸‰ ì˜ˆì¸¡"})]}),e.jsx("p",{className:"text-gray-400 text-sm",children:"í–¥í›„ 60ì¼ ë‚´ ì˜ˆì •ëœ ì…ê¸ˆì´ ì—†ìŠµë‹ˆë‹¤."})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-amber-50 to-white",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ”®"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"ë¯¸ë˜ ì…ê¸ˆ/ì§€ê¸‰ ì˜ˆì¸¡"}),e.jsx("p",{className:"text-xs text-gray-500",children:"í–¥í›„ 60ì¼ ë‚´ ì˜ˆì •ëœ ì…ê¸ˆê³¼ ìˆ˜ìˆ˜ë£Œ ì§€ê¸‰ ì¼ì •"})]})]}),e.jsxs("div",{className:"flex gap-4 text-sm",children:[e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ì˜ˆìƒ ì…ê¸ˆ"}),e.jsxs("p",{className:"font-bold text-green-600",children:[d.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("p",{className:"text-xs text-gray-500",children:"ì˜ˆìƒ ì§€ê¸‰"}),e.jsxs("p",{className:"font-bold text-orange-600",children:[x.toLocaleString(),"ë§Œì›"]})]})]})]})}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"space-y-3",children:n.map((a,p)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-gray-50 rounded-lg hover:bg-gray-100 transition-colors",children:[e.jsxs("div",{className:"flex-shrink-0 text-center",children:[e.jsx("div",{className:"bg-blue-100 text-blue-700 px-3 py-1 rounded-lg font-bold text-sm",children:new Date(a.depositDate).toLocaleDateString("ko-KR",{month:"short",day:"numeric"})}),e.jsx("p",{className:"text-[10px] text-gray-400 mt-1",children:"ì…ê¸ˆì˜ˆì •"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium text-gray-800",children:a.customerName}),e.jsxs("span",{className:"text-xs bg-blue-50 text-blue-600 px-2 py-0.5 rounded-full",children:[a.depositNumber,"ì°¨ ì…ê¸ˆ"]})]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["ìˆ˜ì„ë£Œ ",a.contractFee,"ë§Œì› ì¤‘ ëˆ„ì  ",a.totalDeposited,"ë§Œì› ì…ê¸ˆ"]})]}),e.jsxs("div",{className:"text-right flex-shrink-0",children:[e.jsxs("p",{className:"font-bold text-green-600 text-lg",children:["+",a.amount.toLocaleString(),"ë§Œì›"]}),a.expectedPayout>0&&e.jsx("div",{className:"mt-1 text-xs",children:e.jsxs("span",{className:"text-orange-600",children:["â†’ ",a.payoutDate.slice(5).replace("-","/")," ìˆ˜ìˆ˜ë£Œ ",a.expectedPayout,"ë§Œì›"]})})]})]},`${a.caseId}-${a.depositNumber}`))})})]})})(),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-indigo-50 to-white flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"ğŸ“‹ ì£¼ê°„ ì •ì‚° ë°°ì¹˜ í˜„í™©"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ìµœê·¼ ì •ì‚° ë°°ì¹˜ë³„ ìˆ˜ê¸ˆ/ì§€ê¸‰/ì„¸ê¸ˆê³„ì‚°ì„œ ìƒíƒœ"})]}),e.jsxs("button",{onClick:()=>{const t=Array.isArray(R)?R:[];if(t.length===0){u("ë‚´ë³´ë‚¼ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤.","error");return}const l=t.map(i=>{var c,s;return{ì£¼ì°¨:i.weekLabel,ê¸°ê°„:`${i.startDate} ~ ${i.endDate}`,"ìˆ˜ìˆ˜ë£Œ(ë§Œì›)":i.totalCommission,ìˆ˜ê¸ˆìƒíƒœ:(c=i.collectionInfo)!=null&&c.collectedAt?`ì™„ë£Œ (${i.collectionInfo.collectedAt})`:"ëŒ€ê¸°","íŒŒíŠ¸ë„ˆ ì§€ê¸‰":(i.payoutItems||[]).length>0?(i.payoutItems||[]).map(r=>`${r.partnerName}(${r.amount}ë§Œì›)`).join(", "):"ì—†ìŒ",ì„¸ê¸ˆê³„ì‚°ì„œ:(s=i.purchaseInvoice)!=null&&s.receivedAt?`ìˆ˜ì·¨ (${i.purchaseInvoice.receivedAt})`:"ë¯¸ìˆ˜ì·¨",ìƒíƒœ:Le(i.status)}});ia(`ì •ì‚°ë‚´ì—­_${new Date().toISOString().split("T")[0]}`,l),u("ì—‘ì…€ íŒŒì¼ì´ ë‹¤ìš´ë¡œë“œë˜ì—ˆìŠµë‹ˆë‹¤.","success")},className:"flex items-center gap-1.5 px-3 py-1.5 bg-green-600 text-white rounded-lg text-sm font-medium hover:bg-green-700 transition-colors",children:[e.jsx(_s,{size:16}),"ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-3 text-left",children:"ì£¼ì°¨"}),e.jsx("th",{className:"py-3 px-3 text-right",children:"ìˆ˜ìˆ˜ë£Œ"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"ìˆ˜ê¸ˆ"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"íŒŒíŠ¸ë„ˆ ì§€ê¸‰"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"ë§¤ì…ì„¸ê¸ˆê³„ì‚°ì„œ"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"ìƒíƒœ"})]})}),e.jsx("tbody",{children:(Array.isArray(R)?R:[]).slice(0,8).map(t=>{var s,r,n;const l=(t.payoutItems||[]).length,i=(t.payoutItems||[]).filter(d=>d.paidAt).length,c=(t.payoutItems||[]).reduce((d,x)=>d+(x.amount||0),0);return e.jsxs("tr",{className:"border-b border-gray-50 last:border-0 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-3 font-medium",children:t.weekLabel}),e.jsxs("td",{className:"py-3 px-3 text-right font-bold text-blue-600",children:[t.totalCommission.toLocaleString(),"ë§Œì›"]}),e.jsx("td",{className:"py-3 px-3 text-center",children:(s=t.collectionInfo)!=null&&s.collectedAt?e.jsxs("span",{className:"px-2 py-1 bg-green-100 text-green-700 rounded-full text-xs font-medium",children:["âœ“ ",(r=t.collectionInfo.amount)==null?void 0:r.toLocaleString(),"ë§Œì›"]}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 rounded-full text-xs",children:"ëŒ€ê¸°"})}),e.jsx("td",{className:"py-3 px-3 text-center",children:l>0?e.jsxs("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${i===l?"bg-green-100 text-green-700":"bg-yellow-100 text-yellow-700"}`,children:[i,"/",l,"ê±´ (",c,"ë§Œì›)"]}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-400 rounded-full text-xs",children:"ì—†ìŒ"})}),e.jsx("td",{className:"py-3 px-3 text-center",children:(n=t.purchaseInvoice)!=null&&n.receivedAt?e.jsx("span",{className:"px-2 py-1 bg-purple-100 text-purple-700 rounded-full text-xs font-medium",children:"âœ“ ìˆ˜ì·¨ì™„ë£Œ"}):e.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-500 rounded-full text-xs",children:"ë¯¸ìˆ˜ì·¨"})}),e.jsx("td",{className:"py-3 px-3 text-center",children:e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium
                                                ${t.status==="completed"?"bg-green-100 text-green-700":t.status==="paid"?"bg-blue-100 text-blue-700":t.status==="collected"?"bg-teal-100 text-teal-700":"bg-gray-100 text-gray-600"}`,children:Le(t.status)})})]},t.batchId)})})]})})]}),(()=>{const t=Array.isArray(R)?R:[],l={};t.forEach(c=>{(c.payoutItems||[]).forEach(s=>{const r=s.partnerName||"ë¯¸ì§€ì •";l[r]||(l[r]={total:0,paid:0,count:0}),l[r].total+=s.amount||0,l[r].count+=1,s.paidAt&&(l[r].paid+=s.amount||0)})});const i=Object.entries(l).sort((c,s)=>s[1].total-c[1].total);return i.length===0?null:e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-green-50 to-white",children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"ğŸ’³ íŒŒíŠ¸ë„ˆë³„ ì§€ê¸‰ í˜„í™©"}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"ì „ì²´ ì •ì‚° ê¸°ê°„ íŒŒíŠ¸ë„ˆ ì§€ê¸‰ ëˆ„ê³„"})]}),e.jsx("div",{className:"p-4 grid gap-3",children:i.map(([c,s])=>e.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ¢"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:c}),e.jsxs("p",{className:"text-xs text-gray-500",children:[s.count,"ê±´"]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("p",{className:"font-bold text-green-600",children:[s.paid.toLocaleString(),"ë§Œì› ",e.jsx("span",{className:"text-gray-400 font-normal",children:"ì§€ê¸‰"})]}),s.total>s.paid&&e.jsxs("p",{className:"text-xs text-orange-600",children:[(s.total-s.paid).toLocaleString(),"ë§Œì› ë¯¸ì§€ê¸‰"]})]})]},c))})]})})(),st>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-xl p-4 flex items-center gap-3",children:[e.jsx("span",{className:"text-2xl",children:"âš ï¸"}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-bold text-red-700",children:["ê³„ì•½ì¼ ëˆ„ë½: ",st,"ê±´"]}),e.jsx("p",{className:"text-sm text-red-600",children:"ê³„ì•½ì¼ì´ ì—†ëŠ” ê±´ì€ ì •ì‚° ì§‘ê³„ì—ì„œ ì œì™¸ë©ë‹ˆë‹¤."})]})]}),e.jsx(da,{batches:R})]}),ct={ê´‘ê³ ë¹„:"#ef4444",ë§ˆì¼€íŒ…ë¹„:"#f97316",ì‚¬ë¬´ë¹„ìš©:"#eab308",ì¸ê±´ë¹„:"#22c55e",êµí†µë¹„:"#3b82f6",ì‹ëŒ€:"#8b5cf6",ê¸°íƒ€:"#6b7280"},ss=async()=>{if(!H.amount||!H.description){u("ê¸ˆì•¡ê³¼ ë‚´ìš©ì„ ì…ë ¥í•´ì£¼ì„¸ìš”.","error");return}ve?(await ys(ve.id,H),u("ì§€ì¶œì´ ìˆ˜ì •ë˜ì—ˆìŠµë‹ˆë‹¤.","success")):(await fs({...H,partnerId:v!=="all"?v:void 0}),u("ì§€ì¶œì´ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤.","success"));const[t,l]=await Promise.all([_e(v,f),ze(f,S,v)]);ie(t),Pe(l),xe(!1),me(null),Q({category:"ê´‘ê³ ë¹„",amount:0,description:"",date:new Date().toISOString().split("T")[0]})},as=async t=>{if(!confirm("ì •ë§ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?"))return;await ws(t),u("ì§€ì¶œì´ ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.","success");const[l,i]=await Promise.all([_e(v,f),ze(f,S,v)]);ie(l),Pe(i)},rs=t=>{me(t),Q({date:t.date,category:t.category,amount:t.amount,description:t.description,memo:t.memo}),xe(!0)},ns=()=>{const l=q-0-B.total,i=S==="all"?B.total:V.filter(s=>s.date&&s.date.startsWith(`${f}-${String(S).padStart(2,"0")}`)).reduce((s,r)=>s+(r.amount||0),0),c=Object.entries(B.byCategory).filter(([s,r])=>r>0).map(([s,r])=>({name:s,value:r,color:ct[s]}));return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"bg-gradient-to-br from-green-50 to-white p-5 rounded-xl shadow-sm border border-green-200",children:[e.jsx("p",{className:"text-sm text-green-700",children:"ğŸ’µ ë°›ì€ ìˆ˜ìˆ˜ë£Œ"}),e.jsxs("p",{className:"text-2xl font-bold text-green-600 mt-1",children:[q.toLocaleString(),"ë§Œì›"]}),e.jsxs("p",{className:"text-xs text-green-500 mt-1",children:[f,"ë…„ ëˆ„ì "]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-red-50 to-white p-5 rounded-xl shadow-sm border border-red-200",children:[e.jsx("p",{className:"text-sm text-red-700",children:"ğŸ’¸ ì´ ì§€ì¶œ"}),e.jsxs("p",{className:"text-2xl font-bold text-red-600 mt-1",children:[B.total.toLocaleString(),"ë§Œì›"]}),e.jsxs("p",{className:"text-xs text-red-500 mt-1",children:[S==="all"?"ì „ì²´ ì›”":`${S}ì›”`,": ",i.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-white p-5 rounded-xl shadow-sm border border-blue-200",children:[e.jsx("p",{className:"text-sm text-blue-700",children:"ğŸ“Š ê´‘ê³ ë¹„ ë¹„ì¤‘"}),e.jsxs("p",{className:"text-2xl font-bold text-blue-600 mt-1",children:[B.total>0?Math.round(B.byCategory.ê´‘ê³ ë¹„/B.total*100):0,"%"]}),e.jsxs("p",{className:"text-xs text-blue-500 mt-1",children:[B.byCategory.ê´‘ê³ ë¹„.toLocaleString(),"ë§Œì›"]})]}),e.jsxs("div",{className:`bg-gradient-to-br ${l>=0?"from-green-50 to-white border-green-200":"from-red-50 to-white border-red-200"} p-5 rounded-xl shadow-sm border`,children:[e.jsx("p",{className:`text-sm ${l>=0?"text-green-700":"text-red-700"}`,children:"ğŸ’° ìˆœì´ìµ"}),e.jsxs("p",{className:`text-2xl font-bold mt-1 ${l>=0?"text-green-600":"text-red-600"}`,children:[l.toLocaleString(),"ë§Œì›"]}),e.jsx("p",{className:`text-xs mt-1 ${l>=0?"text-green-500":"text-red-500"}`,children:"ìˆ˜ìˆ˜ë£Œìˆ˜ìµ - ì§€ì¶œ"})]})]}),e.jsx("div",{className:"flex justify-end",children:e.jsxs("button",{onClick:()=>{me(null),Q({category:"ê´‘ê³ ë¹„",amount:0,description:"",date:new Date().toISOString().split("T")[0]}),xe(!0)},className:"bg-red-600 text-white px-4 py-2 rounded-lg font-bold hover:bg-red-700 flex items-center gap-2",children:[e.jsx(Ze,{size:18})," ì§€ì¶œ ë“±ë¡"]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"ğŸ“Š ì¹´í…Œê³ ë¦¬ë³„ ì§€ì¶œ"}),c.length>0?e.jsxs("div",{className:"flex items-center",children:[e.jsx(be,{width:"50%",height:200,children:e.jsxs(vt,{children:[e.jsx(wt,{data:c,cx:"50%",cy:"50%",innerRadius:40,outerRadius:80,paddingAngle:2,dataKey:"value",children:c.map((s,r)=>e.jsx(St,{fill:s.color},`cell-${r}`))}),e.jsx(ye,{formatter:s=>[`${Number(s).toLocaleString()}ë§Œì›`,""]})]})}),e.jsx("div",{className:"flex-1 space-y-2",children:c.map((s,r)=>e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-3 h-3 rounded-full",style:{backgroundColor:s.color}}),e.jsx("span",{children:s.name})]}),e.jsxs("span",{className:"font-medium",children:[s.value.toLocaleString(),"ë§Œì›"]})]},r))})]}):e.jsx("div",{className:"h-48 flex items-center justify-center text-gray-400",children:"ì§€ì¶œ ë°ì´í„°ê°€ ì—†ìŠµë‹ˆë‹¤"})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsx("h3",{className:"text-lg font-bold text-gray-700 mb-4",children:"ğŸ“ˆ ì›”ë³„ ì§€ì¶œ ì¶”ì´"}),e.jsx(be,{width:"100%",height:200,children:e.jsxs(Ye,{data:B.byMonth,children:[e.jsx(Ve,{strokeDasharray:"3 3",vertical:!1}),e.jsx(Ke,{dataKey:"month"}),e.jsx(Ge,{}),e.jsx(ye,{formatter:s=>[`${s.toLocaleString()}ë§Œì›`,"ì§€ì¶œ"]}),e.jsx(oe,{dataKey:"amount",fill:"#ef4444",radius:[4,4,0,0]})]})})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center",children:[e.jsx("h3",{className:"font-bold text-gray-700",children:"ğŸ“‹ ì§€ì¶œ ë‚´ì—­"}),e.jsxs("span",{className:"text-sm text-gray-500",children:[V.length,"ê±´"]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-3 text-left",children:"ë‚ ì§œ"}),e.jsx("th",{className:"py-3 px-3 text-left",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("th",{className:"py-3 px-3 text-left",children:"ë‚´ìš©"}),e.jsx("th",{className:"py-3 px-3 text-right",children:"ê¸ˆì•¡"}),e.jsx("th",{className:"py-3 px-3 text-center",children:"ê´€ë¦¬"})]})}),e.jsx("tbody",{children:Z?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-400",children:"ë¡œë”©ì¤‘..."})}):V.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-400",children:"ë“±ë¡ëœ ì§€ì¶œì´ ì—†ìŠµë‹ˆë‹¤"})}):V.slice(0,20).map(s=>e.jsxs("tr",{className:"border-b border-gray-50 hover:bg-gray-50",children:[e.jsx("td",{className:"py-3 px-3 text-gray-600",children:s.date}),e.jsx("td",{className:"py-3 px-3",children:e.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium text-white",style:{backgroundColor:ct[s.category]},children:s.category})}),e.jsxs("td",{className:"py-3 px-3 text-gray-800",children:[s.description,s.memo&&e.jsxs("span",{className:"text-gray-400 ml-2 text-xs",children:["(",s.memo,")"]})]}),e.jsxs("td",{className:"py-3 px-3 text-right font-bold text-red-600",children:[s.amount.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-3 px-3 text-center",children:[e.jsx("button",{onClick:()=>rs(s),className:"text-blue-600 hover:text-blue-700 mr-2",children:"ìˆ˜ì •"}),e.jsx("button",{onClick:()=>as(s.id),className:"text-red-500 hover:text-red-700",children:e.jsx(Ct,{size:14})})]})]},s.id))})]})})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-r from-indigo-50 to-blue-50 flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-indigo-700",children:"ğŸ¦ ì€í–‰ ê±°ë˜ë‚´ì—­ ì—…ë¡œë“œ"}),e.jsx("p",{className:"text-xs text-indigo-500 mt-1",children:"ì¹´ì¹´ì˜¤ë±…í¬, ì¼€ì´ë±…í¬ ì—‘ì…€ íŒŒì¼ ì§€ì›"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("input",{ref:pe,type:"file",accept:".xlsx,.xls",onChange:Pt,className:"hidden",id:"bank-file-upload"}),e.jsx("label",{htmlFor:"bank-file-upload",className:`px-4 py-2 rounded-lg font-medium cursor-pointer flex items-center gap-2 ${Qe?"bg-gray-200 text-gray-500 cursor-not-allowed":"bg-indigo-600 text-white hover:bg-indigo-700"}`,children:Qe?e.jsx(e.Fragment,{children:"â³ ì—…ë¡œë“œ ì¤‘..."}):e.jsxs(e.Fragment,{children:[e.jsx(Ze,{size:18})," ì—‘ì…€ ì—…ë¡œë“œ"]})})]})]}),e.jsx("div",{className:"overflow-x-auto max-h-96",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-gray-50 text-gray-600 font-medium sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-3 px-3 text-left",children:"ì¼ì‹œ"}),e.jsx("th",{className:"py-3 px-3 text-left",children:"ì€í–‰"}),e.jsx("th",{className:"py-3 px-3 text-left",children:"ìƒëŒ€ë°©"}),e.jsx("th",{className:"py-3 px-3 text-left",children:"ë¶„ë¥˜"}),e.jsx("th",{className:"py-3 px-3 text-right",children:"ê¸ˆì•¡"})]})}),e.jsx("tbody",{children:Et?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-400",children:"ë¡œë”©ì¤‘..."})}):$.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:5,className:"py-8 text-center text-gray-400",children:e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“¤"}),e.jsx("span",{children:"ì€í–‰ ê±°ë˜ë‚´ì—­ ì—‘ì…€ íŒŒì¼ì„ ì—…ë¡œë“œí•˜ì„¸ìš”"})]})})}):$.filter(s=>{if(S==="all")return!0;const r=String(S).padStart(2,"0");return s.date.substring(5,7)===r}).slice(0,50).map(s=>e.jsxs("tr",{className:`border-b border-gray-50 hover:bg-gray-50 ${!s.isVerified&&s.category.includes("ê¸°íƒ€")?"bg-yellow-50":""}`,children:[e.jsx("td",{className:"py-2 px-3 text-gray-600 text-xs",children:s.datetime}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${s.bank==="kakao"?"bg-yellow-100 text-yellow-700":"bg-blue-100 text-blue-700"}`,children:s.bank==="kakao"?"ì¹´ì¹´ì˜¤":"ì¼€ì´"})}),e.jsx("td",{className:"py-2 px-3 text-gray-800",children:s.counterparty||s.description}),e.jsx("td",{className:"py-2 px-3",children:e.jsx("select",{value:s.category,onChange:r=>Mt(s.id,r.target.value),className:`text-xs border rounded px-2 py-1 ${s.type==="income"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:js.filter(r=>s.type==="income"?["ìˆ˜ìˆ˜ë£Œìˆ˜ì…","ì´ì","ê¸°íƒ€ìˆ˜ì…"].includes(r):!["ìˆ˜ìˆ˜ë£Œìˆ˜ì…","ì´ì","ê¸°íƒ€ìˆ˜ì…"].includes(r)).map(r=>e.jsx("option",{value:r,children:r},r))})}),e.jsxs("td",{className:`py-2 px-3 text-right font-bold ${s.type==="income"?"text-green-600":"text-red-600"}`,children:[s.type==="income"?"+":"-",s.amount.toLocaleString(),"ì›"]})]},s.id))})]})}),$.length>0&&e.jsxs("div",{className:"p-3 bg-gray-50 border-t border-gray-100 flex justify-between text-sm",children:[e.jsxs("span",{className:"text-gray-600",children:["ì´ ",$.length,"ê±´"]}),e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("span",{className:"text-green-600",children:["ì…ê¸ˆ: +",$.filter(s=>s.type==="income").reduce((s,r)=>s+r.amount,0).toLocaleString(),"ì›"]}),e.jsxs("span",{className:"text-red-600",children:["ì¶œê¸ˆ: -",$.filter(s=>s.type==="expense").reduce((s,r)=>s+r.amount,0).toLocaleString(),"ì›"]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-purple-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-purple-100 bg-gradient-to-r from-purple-50 to-indigo-50",children:[e.jsx("h3",{className:"font-bold text-purple-700 flex items-center gap-2",children:"ğŸ“Š ì„¸ê¸ˆ ê³„ì‚° ë„ìš°ë¯¸ (ê°œì¸ì‚¬ì—…ì)"}),e.jsxs("p",{className:"text-xs text-purple-500 mt-1",children:[f,"ë…„ ê¸°ì¤€ ì˜ˆìƒ ì„¸ê¸ˆ ê³„ì‚°"]})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 mb-4",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-100",children:[e.jsx("p",{className:"text-xs text-green-600",children:"ì´ ìˆ˜ì…"}),e.jsxs("p",{className:"text-lg font-bold text-green-700",children:[(q*1e4+$.filter(s=>s.type==="income"&&s.category!=="ì´ì").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]}),e.jsx("p",{className:"text-[10px] text-green-500",children:"ìˆ˜ìˆ˜ë£Œ + ê¸°íƒ€ìˆ˜ì…"})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-100",children:[e.jsx("p",{className:"text-xs text-red-600",children:"í•„ìš”ê²½ë¹„"}),e.jsxs("p",{className:"text-lg font-bold text-red-700",children:[(B.total*1e4+$.filter(s=>s.type==="expense"&&!["ì´ì²´","ê¸°íƒ€ì§€ì¶œ"].includes(s.category)).reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]}),e.jsx("p",{className:"text-[10px] text-red-500",children:"ê´‘ê³ ë¹„, ì‚¬ë¬´ë¹„ ë“±"})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-100",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"ì†Œë“ê¸ˆì•¡"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[(()=>{const s=q*1e4+$.filter(n=>n.type==="income"&&n.category!=="ì´ì").reduce((n,d)=>n+d.amount,0),r=B.total*1e4+$.filter(n=>n.type==="expense"&&!["ì´ì²´","ê¸°íƒ€ì§€ì¶œ"].includes(n.category)).reduce((n,d)=>n+d.amount,0);return(s-r).toLocaleString()})(),"ì›"]}),e.jsx("p",{className:"text-[10px] text-blue-500",children:"ìˆ˜ì… - í•„ìš”ê²½ë¹„"})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-100",children:[e.jsx("p",{className:"text-xs text-purple-600",children:"ì˜ˆìƒ ì¢…í•©ì†Œë“ì„¸"}),e.jsxs("p",{className:"text-lg font-bold text-purple-700",children:[(()=>{const s=q*1e4+$.filter(x=>x.type==="income"&&x.category!=="ì´ì").reduce((x,a)=>x+a.amount,0),r=B.total*1e4+$.filter(x=>x.type==="expense"&&!["ì´ì²´","ê¸°íƒ€ì§€ì¶œ"].includes(x.category)).reduce((x,a)=>x+a.amount,0),n=Math.max(0,s-r);let d=0;return n<=14e6?d=n*.06:n<=5e7?d=84e4+(n-14e6)*.15:n<=88e6?d=624e4+(n-5e7)*.24:n<=15e7?d=1536e4+(n-88e6)*.35:n<=3e8?d=3706e4+(n-15e7)*.38:n<=5e8?d=9406e4+(n-3e8)*.4:d=17406e4+(n-5e8)*.45,Math.round(d).toLocaleString()})(),"ì›"]}),e.jsx("p",{className:"text-[10px] text-purple-500",children:"ì‹¤ì œ ì„¸ê¸ˆì€ ë‹¤ë¥¼ ìˆ˜ ìˆìŒ"})]})]}),e.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg mb-4",children:[e.jsx("h4",{className:"text-sm font-bold text-gray-700 mb-3",children:"ğŸ“‹ ì„¸ë¬´ ë¶„ë¥˜ë³„ ìš”ì•½"}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ğŸ“¢ ê´‘ê³ ë¹„"}),e.jsxs("span",{className:"font-medium",children:[(B.byCategory.ê´‘ê³ ë¹„*1e4+$.filter(s=>s.category==="ê´‘ê³ ë¹„").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ğŸ¢ ì‚¬ë¬´ë¹„"}),e.jsxs("span",{className:"font-medium",children:[(B.byCategory.ì‚¬ë¬´ë¹„ìš©*1e4+$.filter(s=>s.category==="ì‚¬ë¬´ë¹„").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ğŸš— êµí†µë¹„"}),e.jsxs("span",{className:"font-medium",children:[(B.byCategory.êµí†µë¹„*1e4+$.filter(s=>s.category==="êµí†µë¹„").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ğŸ“± í†µì‹ ë¹„"}),e.jsxs("span",{className:"font-medium",children:[(B.byCategory.í†µì‹ ë¹„*1e4+$.filter(s=>s.category==="í†µì‹ ë¹„").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ğŸ½ï¸ ì ‘ëŒ€ë¹„"}),e.jsxs("span",{className:"font-medium",children:[(B.byCategory.ì ‘ëŒ€ë¹„*1e4+$.filter(s=>s.category==="ì ‘ëŒ€ë¹„").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-gray-600",children:"ğŸ“¦ ê¸°íƒ€"}),e.jsxs("span",{className:"font-medium",children:[(B.byCategory.ê¸°íƒ€*1e4+$.filter(s=>s.category==="ê¸°íƒ€ì§€ì¶œ").reduce((s,r)=>s+r.amount,0)).toLocaleString(),"ì›"]})]})]})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx("button",{onClick:()=>{const s=[[`${f}ë…„ ì„¸ë¬´ ë³´ê³ ì„œ`,"","","",""],["","","","",""],["[ ìˆ˜ì… ë‚´ì—­ ]","","","",""],["ë‚ ì§œ","êµ¬ë¶„","ê±°ë˜ì²˜","ë¶„ë¥˜","ê¸ˆì•¡(ì›)"]];$.filter(o=>o.type==="income").sort((o,g)=>o.date.localeCompare(g.date)).forEach(o=>{s.push([o.date,"ì…ê¸ˆ",o.counterparty||"",o.category,o.amount.toString()])}),s.push(["","","","",""]),s.push(["[ ì§€ì¶œ ë‚´ì—­ ]","","","",""]),s.push(["ë‚ ì§œ","êµ¬ë¶„","ë‚´ìš©","ë¶„ë¥˜","ê¸ˆì•¡(ì›)"]),V.forEach(o=>{s.push([o.date,"ì§€ì¶œ",o.description,o.category,(o.amount*1e4).toString()])}),$.filter(o=>o.type==="expense").sort((o,g)=>o.date.localeCompare(g.date)).forEach(o=>{s.push([o.date,"ì¶œê¸ˆ",o.counterparty||o.description,o.category,o.amount.toString()])}),s.push(["","","","",""]),s.push(["[ ìš”ì•½ ]","","","",""]);const r=q*1e4+$.filter(o=>o.type==="income").reduce((o,g)=>o+g.amount,0),n=B.total*1e4+$.filter(o=>o.type==="expense").reduce((o,g)=>o+g.amount,0);s.push(["ì´ ìˆ˜ì…","","","",r.toString()]),s.push(["ì´ ì§€ì¶œ","","","",n.toString()]),s.push(["ì†Œë“ê¸ˆì•¡","","","",(r-n).toString()]);const d=s.map(o=>o.join(",")).join(`
`),x=new Blob(["\uFEFF"+d],{type:"text/csv;charset=utf-8;"}),a=URL.createObjectURL(x),p=document.createElement("a");p.href=a,p.download=`ì„¸ë¬´ë³´ê³ ì„œ_${f}ë…„.csv`,p.click(),URL.revokeObjectURL(a)},className:"bg-purple-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-purple-700 flex items-center gap-2",children:"ğŸ“¥ ì„¸ë¬´ìš© ì—‘ì…€ ë‹¤ìš´ë¡œë“œ"}),e.jsx("button",{onClick:()=>{const r=[["ë‚ ì§œ","ì‹œê°„","ì€í–‰","êµ¬ë¶„","ìƒëŒ€ë°©","ë¶„ë¥˜","ê¸ˆì•¡","ë©”ëª¨"],...$.map(a=>[a.date,a.datetime.split(" ")[1]||"",a.bank==="kakao"?"ì¹´ì¹´ì˜¤ë±…í¬":"ì¼€ì´ë±…í¬",a.type==="income"?"ì…ê¸ˆ":"ì¶œê¸ˆ",a.counterparty||"",a.category,a.amount.toString(),a.memo||""])].map(a=>a.join(",")).join(`
`),n=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(n),x=document.createElement("a");x.href=d,x.download=`ì€í–‰ê±°ë˜ë‚´ì—­_${f}ë…„.csv`,x.click(),URL.revokeObjectURL(d)},className:"bg-indigo-100 text-indigo-700 px-4 py-2 rounded-lg font-medium hover:bg-indigo-200 flex items-center gap-2",children:"ğŸ“„ ê±°ë˜ë‚´ì—­ë§Œ ë‹¤ìš´ë¡œë“œ"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"âš ï¸ ë³¸ ê³„ì‚°ì€ ì°¸ê³ ìš©ì´ë©°, ì •í™•í•œ ì„¸ê¸ˆì€ ì„¸ë¬´ì‚¬ì™€ ìƒë‹´í•˜ì„¸ìš”."})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-teal-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-teal-100 bg-gradient-to-r from-teal-50 to-cyan-50",children:[e.jsx("h3",{className:"font-bold text-teal-700 flex items-center gap-2",children:"ğŸ§¾ ë¶€ê°€ê°€ì¹˜ì„¸ ì˜ˆìƒì•¡"}),e.jsxs("p",{className:"text-xs text-teal-500 mt-1",children:[f,"ë…„ ë¶„ê¸°ë³„ ë¶€ê°€ì„¸ (10%)"]})]}),e.jsx("div",{className:"p-4",children:(()=>{const s=[1,2,3,4].map(n=>{const d=(n-1)*3+1,x=n*3,a=_.filter(w=>{const T=w.settledAt||w.contractAt;if(!T)return!1;const le=parseInt(T.substring(5,7));return parseInt(T.substring(0,4))===f&&le>=d&&le<=x}).reduce((w,T)=>w+(T.commission||0),0)*1e4,p=$.filter(w=>{if(w.type!=="income"||w.category==="ì´ì")return!1;const T=parseInt(w.date.substring(5,7));return T>=d&&T<=x}).reduce((w,T)=>w+T.amount,0),o=a+p,g=Math.round(o*.1),N=V.filter(w=>{if(!w.date)return!1;const T=parseInt(w.date.substring(5,7));return T>=d&&T<=x}).reduce((w,T)=>w+(T.amount||0)*1e4,0),y=$.filter(w=>{if(w.type!=="expense")return!1;const T=parseInt(w.date.substring(5,7));return T>=d&&T<=x}).reduce((w,T)=>w+T.amount,0),F=N+y,Y=Math.round(F*.1),A=g-Y;return{quarter:n,sales:o,purchase:F,outputVat:g,inputVat:Y,vatPayable:A}}),r=s.reduce((n,d)=>n+Math.max(0,d.vatPayable),0);return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:s.map(n=>e.jsxs("div",{className:`p-3 rounded-lg border ${n.vatPayable>0?"bg-teal-50 border-teal-200":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("p",{className:"text-xs text-gray-500",children:[n.quarter,"ë¶„ê¸° (",(n.quarter-1)*3+1,"~",n.quarter*3,"ì›”)"]}),e.jsxs("p",{className:"text-sm font-bold text-teal-700 mt-1",children:[n.vatPayable>0?"+":"",n.vatPayable.toLocaleString(),"ì›"]}),e.jsxs("div",{className:"text-[10px] text-gray-400 mt-1",children:[e.jsxs("div",{children:["ë§¤ì¶œì„¸ì•¡: ",n.outputVat.toLocaleString()]}),e.jsxs("div",{children:["ë§¤ì…ì„¸ì•¡: -",n.inputVat.toLocaleString()]})]})]},n.quarter))}),e.jsxs("div",{className:"bg-teal-100 p-3 rounded-lg flex justify-between items-center",children:[e.jsx("span",{className:"text-sm text-teal-700",children:"ì—°ê°„ ì˜ˆìƒ ë¶€ê°€ì„¸ ë‚©ë¶€ì•¡"}),e.jsxs("span",{className:"text-xl font-bold text-teal-800",children:[r.toLocaleString(),"ì›"]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"ğŸ’¡ 1ì›”, 7ì›”: ë¶€ê°€ì„¸ í™•ì •ì‹ ê³  / 4ì›”, 10ì›”: ì˜ˆì •ì‹ ê³ "})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-orange-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-orange-100 bg-gradient-to-r from-orange-50 to-amber-50",children:[e.jsx("h3",{className:"font-bold text-orange-700 flex items-center gap-2",children:"ğŸ’° ì›ì²œì§•ìˆ˜ ê³„ì‚°ê¸°"}),e.jsx("p",{className:"text-xs text-orange-500 mt-1",children:"íŒŒíŠ¸ë„ˆ ì§€ê¸‰ ì‹œ 3.3% ì›ì²œì„¸ ìë™ ê³„ì‚°"})]}),e.jsx("div",{className:"p-4",children:(()=>{const s=b.map(n=>{const x=R.filter(o=>o.partnerId===n.partnerId&&(o.status==="paid"||o.status==="completed")).reduce((o,g)=>o+(g.totalPayableCommission||0),0)*1e4,a=Math.round(x*.033),p=x-a;return{partner:n,totalPayout:x,withholdingTax:a,netPayout:p}}).filter(n=>n.totalPayout>0),r=s.reduce((n,d)=>n+d.withholdingTax,0);return e.jsxs(e.Fragment,{children:[s.length===0?e.jsx("p",{className:"text-sm text-gray-400 text-center py-4",children:"ì§€ê¸‰ ì™„ë£Œëœ ì •ì‚° ê±´ì´ ì—†ìŠµë‹ˆë‹¤."}):e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-orange-50 text-orange-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-3 text-left",children:"íŒŒíŠ¸ë„ˆ"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"ì§€ê¸‰ì•¡"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"ì›ì²œì„¸(3.3%)"}),e.jsx("th",{className:"py-2 px-3 text-right",children:"ì‹¤ì§€ê¸‰ì•¡"})]})}),e.jsx("tbody",{children:s.map(n=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsx("td",{className:"py-2 px-3",children:n.partner.name}),e.jsxs("td",{className:"py-2 px-3 text-right",children:[n.totalPayout.toLocaleString(),"ì›"]}),e.jsxs("td",{className:"py-2 px-3 text-right text-red-600",children:["-",n.withholdingTax.toLocaleString(),"ì›"]}),e.jsxs("td",{className:"py-2 px-3 text-right font-bold",children:[n.netPayout.toLocaleString(),"ì›"]})]},n.partner.partnerId))})]})}),e.jsxs("div",{className:"bg-orange-100 p-3 rounded-lg flex justify-between items-center mt-3",children:[e.jsx("span",{className:"text-sm text-orange-700",children:"ë§¤ì›” 10ì¼ê¹Œì§€ ë‚©ë¶€í•  ì›ì²œì„¸"}),e.jsxs("span",{className:"text-xl font-bold text-orange-800",children:[r.toLocaleString(),"ì›"]})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-2",children:"ğŸ’¡ ì‚¬ì—…ì†Œë“ ì›ì²œì§•ìˆ˜: ì†Œë“ì„¸ 3% + ì§€ë°©ì†Œë“ì„¸ 0.3% = 3.3%"})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-rose-100 bg-gradient-to-r from-rose-50 to-pink-50",children:[e.jsx("h3",{className:"font-bold text-rose-700 flex items-center gap-2",children:"ğŸ“… ì„¸ë¬´ ìº˜ë¦°ë”"}),e.jsx("p",{className:"text-xs text-rose-500 mt-1",children:"ì£¼ìš” ì„¸ê¸ˆ ì‹ ê³  ì¼ì •"})]}),e.jsx("div",{className:"p-4",children:(()=>{const s=new Date,r=s.getFullYear();s.getMonth()+1;const d=[{month:1,day:25,name:"ë¶€ê°€ì„¸ í™•ì •ì‹ ê³ ",desc:"7~12ì›”ë¶„",type:"ë¶€ê°€ì„¸"},{month:2,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"1ì›”ë¶„",type:"ì›ì²œì„¸"},{month:3,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"2ì›”ë¶„",type:"ì›ì²œì„¸"},{month:4,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"3ì›”ë¶„",type:"ì›ì²œì„¸"},{month:4,day:25,name:"ë¶€ê°€ì„¸ ì˜ˆì •ì‹ ê³ ",desc:"1~3ì›”ë¶„",type:"ë¶€ê°€ì„¸"},{month:5,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"4ì›”ë¶„",type:"ì›ì²œì„¸"},{month:5,day:31,name:"ì¢…í•©ì†Œë“ì„¸ ì‹ ê³ ",desc:"ì „ë…„ë„ë¶„",type:"ì†Œë“ì„¸"},{month:6,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"5ì›”ë¶„",type:"ì›ì²œì„¸"},{month:7,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"6ì›”ë¶„",type:"ì›ì²œì„¸"},{month:7,day:25,name:"ë¶€ê°€ì„¸ í™•ì •ì‹ ê³ ",desc:"1~6ì›”ë¶„",type:"ë¶€ê°€ì„¸"},{month:8,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"7ì›”ë¶„",type:"ì›ì²œì„¸"},{month:9,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"8ì›”ë¶„",type:"ì›ì²œì„¸"},{month:10,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"9ì›”ë¶„",type:"ì›ì²œì„¸"},{month:10,day:25,name:"ë¶€ê°€ì„¸ ì˜ˆì •ì‹ ê³ ",desc:"7~9ì›”ë¶„",type:"ë¶€ê°€ì„¸"},{month:11,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"10ì›”ë¶„",type:"ì›ì²œì„¸"},{month:12,day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",desc:"11ì›”ë¶„",type:"ì›ì²œì„¸"}].map(a=>{let p=new Date(r,a.month-1,a.day);p<s&&(p=new Date(r+1,a.month-1,a.day));const o=Math.ceil((p.getTime()-s.getTime())/(1e3*60*60*24));return{...a,scheduleDate:p,dDay:o}}).sort((a,p)=>a.dDay-p.dDay).slice(0,6),x={ë¶€ê°€ì„¸:"bg-teal-100 text-teal-700",ì›ì²œì„¸:"bg-orange-100 text-orange-700",ì†Œë“ì„¸:"bg-purple-100 text-purple-700"};return e.jsx("div",{className:"space-y-2",children:d.map((a,p)=>e.jsxs("div",{className:`flex items-center justify-between p-3 rounded-lg border ${a.dDay<=7?"bg-red-50 border-red-200":a.dDay<=14?"bg-yellow-50 border-yellow-200":"bg-gray-50 border-gray-200"}`,children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("span",{className:`px-2 py-0.5 rounded text-xs font-medium ${x[a.type]||"bg-gray-100 text-gray-700"}`,children:a.type}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-gray-800",children:a.name}),e.jsxs("p",{className:"text-xs text-gray-500",children:[a.desc," â€¢ ",a.month,"ì›” ",a.day,"ì¼"]})]})]}),e.jsx("div",{className:`text-right ${a.dDay<=7?"text-red-600 font-bold":"text-gray-600"}`,children:a.dDay===0?"D-Day!":a.dDay>0?`D-${a.dDay}`:`D+${Math.abs(a.dDay)}`})]},p))})})()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-indigo-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-indigo-100 bg-gradient-to-r from-indigo-50 to-violet-50",children:[e.jsx("h3",{className:"font-bold text-indigo-700 flex items-center gap-2",children:"ğŸ“ˆ ì›”ë³„ ì†ìµê³„ì‚°ì„œ"}),e.jsxs("p",{className:"text-xs text-indigo-500 mt-1",children:[f,"ë…„ ì›”ë³„ ìˆ˜ì…/ì§€ì¶œ/ìˆœì´ìµ ë¶„ì„"]})]}),e.jsx("div",{className:"p-4",children:(()=>{const s=Array.from({length:12},(n,d)=>{const x=d+1,a=String(x).padStart(2,"0"),p=_.filter(A=>{const w=A.settledAt||A.contractAt;return w?w.startsWith(`${f}-${a}`):!1}).reduce((A,w)=>A+(w.commission||0),0)*1e4,o=$.filter(A=>A.type==="income"&&A.date.substring(5,7)===a).reduce((A,w)=>A+w.amount,0),g=V.filter(A=>{var w;return((w=A.date)==null?void 0:w.substring(5,7))===a}).reduce((A,w)=>A+(w.amount||0)*1e4,0),N=$.filter(A=>A.type==="expense"&&A.date.substring(5,7)===a).reduce((A,w)=>A+w.amount,0),y=p+o,F=g+N,Y=y-F;return{month:x,income:y,expense:F,profit:Y}}),r=s.reduce((n,d)=>({income:n.income+d.income,expense:n.expense+d.expense,profit:n.profit+d.profit}),{income:0,expense:0,profit:0});return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-indigo-50 text-indigo-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2 text-left",children:"ì›”"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ìˆ˜ì…"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ì§€ì¶œ"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ìˆœì´ìµ"})]})}),e.jsx("tbody",{children:s.filter(n=>n.income>0||n.expense>0).map(n=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsxs("td",{className:"py-2 px-2 font-medium",children:[n.month,"ì›”"]}),e.jsxs("td",{className:"py-2 px-2 text-right text-green-600",children:["+",n.income.toLocaleString()]}),e.jsxs("td",{className:"py-2 px-2 text-right text-red-600",children:["-",n.expense.toLocaleString()]}),e.jsxs("td",{className:`py-2 px-2 text-right font-bold ${n.profit>=0?"text-blue-600":"text-red-600"}`,children:[n.profit>=0?"+":"",n.profit.toLocaleString()]})]},n.month))}),e.jsx("tfoot",{className:"bg-indigo-100 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{className:"py-2 px-2",children:"ì—°ê°„ í•©ê³„"}),e.jsxs("td",{className:"py-2 px-2 text-right text-green-700",children:["+",r.income.toLocaleString()]}),e.jsxs("td",{className:"py-2 px-2 text-right text-red-700",children:["-",r.expense.toLocaleString()]}),e.jsxs("td",{className:`py-2 px-2 text-right ${r.profit>=0?"text-blue-700":"text-red-700"}`,children:[r.profit>=0?"+":"",r.profit.toLocaleString()]})]})})]})}),e.jsx("div",{className:"mt-4 h-48",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(Ye,{data:s.filter(n=>n.income>0||n.expense>0),children:[e.jsx(Ve,{strokeDasharray:"3 3"}),e.jsx(Ke,{dataKey:"month",tickFormatter:n=>`${n}ì›”`}),e.jsx(Ge,{tickFormatter:n=>`${(n/1e4).toFixed(0)}ë§Œ`}),e.jsx(ye,{formatter:n=>`${n.toLocaleString()}ì›`}),e.jsx(Nt,{}),e.jsx(oe,{dataKey:"income",name:"ìˆ˜ì…",fill:"#22c55e"}),e.jsx(oe,{dataKey:"expense",name:"ì§€ì¶œ",fill:"#ef4444"}),e.jsx(oe,{dataKey:"profit",name:"ìˆœì´ìµ",fill:"#3b82f6"})]})})})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-emerald-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-emerald-100 bg-gradient-to-r from-emerald-50 to-green-50",children:[e.jsx("h3",{className:"font-bold text-emerald-700 flex items-center gap-2",children:"ğŸ¢ ê±°ë˜ì²˜ë³„ ìˆ˜ìµ ë¶„ì„"}),e.jsxs("p",{className:"text-xs text-emerald-500 mt-1",children:[f,"ë…„ íŒŒíŠ¸ë„ˆë³„ ë°œìƒ ìˆ˜ìˆ˜ë£Œ"]})]}),e.jsx("div",{className:"p-4",children:(()=>{const s=b.map(d=>{const x=_.filter(g=>{var N;return g.partnerId===d.partnerId&&((N=g.settledAt||g.contractAt)==null?void 0:N.startsWith(String(f)))}),a=x.reduce((g,N)=>g+(N.commission||0),0),p=x.length,o=p>0?a/p:0;return{partner:d,totalCommission:a,caseCount:p,avgCommission:o}}).filter(d=>d.totalCommission>0).sort((d,x)=>x.totalCommission-d.totalCommission),r=s.reduce((d,x)=>d+x.totalCommission,0),n=["#10b981","#3b82f6","#f59e0b","#ef4444","#8b5cf6","#ec4899","#06b6d4","#84cc16"];return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-emerald-50 text-emerald-700",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2 text-left",children:"ê±°ë˜ì²˜"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ê±´ìˆ˜"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ìˆ˜ìˆ˜ë£Œ"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ë¹„ì¤‘"})]})}),e.jsx("tbody",{children:s.map((d,x)=>e.jsxs("tr",{className:"border-b border-gray-100",children:[e.jsxs("td",{className:"py-2 px-2 flex items-center gap-2",children:[e.jsx("span",{className:"w-3 h-3 rounded-full",style:{backgroundColor:n[x%n.length]}}),d.partner.name]}),e.jsxs("td",{className:"py-2 px-2 text-right",children:[d.caseCount,"ê±´"]}),e.jsxs("td",{className:"py-2 px-2 text-right font-bold text-emerald-600",children:[d.totalCommission.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"py-2 px-2 text-right text-gray-500",children:[r>0?Math.round(d.totalCommission/r*100):0,"%"]})]},d.partner.partnerId))})]})}),e.jsx("div",{className:"h-48",children:e.jsx(be,{width:"100%",height:"100%",children:e.jsxs(vt,{children:[e.jsx(wt,{data:s.map((d,x)=>({name:d.partner.name,value:d.totalCommission,fill:n[x%n.length]})),dataKey:"value",nameKey:"name",cx:"50%",cy:"50%",outerRadius:60,label:({name:d,percent:x})=>`${d} ${(x*100).toFixed(0)}%`,children:s.map((d,x)=>e.jsx(St,{fill:n[x%n.length]},x))}),e.jsx(ye,{formatter:d=>`${d.toLocaleString()}ë§Œì›`})]})})})]})})})()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-slate-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-slate-100 bg-gradient-to-r from-slate-50 to-gray-50",children:[e.jsx("h3",{className:"font-bold text-slate-700 flex items-center gap-2",children:"ğŸ“¤ ì„¸ë¬´ì‚¬ ì œì¶œìš© ì—‘ì…€ ë‚´ë³´ë‚´ê¸°"}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"ë”ì¡´, ì„¸ë¬´ì‚¬ë‘ ë“± íšŒê³„ í”„ë¡œê·¸ë¨ í˜¸í™˜ í˜•ì‹"})]}),e.jsxs("div",{className:"p-4",children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3",children:[e.jsxs("button",{onClick:()=>{const s=[["ì „í‘œì¼ì","ê³„ì •ê³¼ëª©ì½”ë“œ","ê³„ì •ê³¼ëª©ëª…","ì ìš”","ì°¨ë³€ê¸ˆì•¡","ëŒ€ë³€ê¸ˆì•¡","ê±°ë˜ì²˜ì½”ë“œ","ê±°ë˜ì²˜ëª…"]];_.filter(a=>{var p;return(p=a.settledAt||a.contractAt)==null?void 0:p.startsWith(String(f))}).forEach(a=>{const p=(a.settledAt||a.contractAt||"").replace(/-/g,""),o=b.find(g=>g.partnerId===a.partnerId);s.push([p.substring(0,8),"401","ìˆ˜ìˆ˜ë£Œìˆ˜ì…",`${a.customerName} ìˆ˜ìˆ˜ë£Œ`,"",String((a.commission||0)*1e4),(o==null?void 0:o.partnerId)||"",(o==null?void 0:o.name)||""])}),V.forEach(a=>{const p=(a.date||"").replace(/-/g,""),o=a.category==="ê´‘ê³ ë¹„"?"811":a.category==="ì¸ê±´ë¹„"?"813":"819";s.push([p.substring(0,8),o,a.category,a.description,String((a.amount||0)*1e4),"","",""])});const r=s.map(a=>a.join(",")).join(`
`),n=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(n),x=document.createElement("a");x.href=d,x.download=`ë”ì¡´_ì¼ë°˜ì „í‘œ_${f}ë…„.csv`,x.click(),URL.revokeObjectURL(d)},className:"bg-blue-100 text-blue-700 p-4 rounded-lg font-medium hover:bg-blue-200 flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ“Š"}),e.jsx("span",{className:"text-sm",children:"ë”ì¡´ Smart A"}),e.jsx("span",{className:"text-xs text-blue-500",children:"ì¼ë°˜ì „í‘œ í˜•ì‹"})]}),e.jsxs("button",{onClick:()=>{const s=[["ì¼ì","êµ¬ë¶„","ê³„ì •ê³¼ëª©","ì ìš”","ê³µê¸‰ê°€ì•¡","ë¶€ê°€ì„¸","í•©ê³„","ê±°ë˜ì²˜"]];_.filter(a=>{var p;return(p=a.settledAt||a.contractAt)==null?void 0:p.startsWith(String(f))}).forEach(a=>{const p=a.settledAt||a.contractAt||"",o=b.find(y=>y.partnerId===a.partnerId),g=(a.commission||0)*1e4,N=Math.round(g*.1);s.push([p,"ë§¤ì¶œ","ìˆ˜ìˆ˜ë£Œìˆ˜ì…",`${a.customerName}`,String(g),String(N),String(g+N),(o==null?void 0:o.name)||""])}),V.forEach(a=>{const p=(a.amount||0)*1e4,o=Math.round(p*.1);s.push([a.date||"","ë§¤ì…",a.category,a.description,String(p),String(o),String(p+o),""])});const r=s.map(a=>a.join(",")).join(`
`),n=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(n),x=document.createElement("a");x.href=d,x.download=`ì„¸ë¬´ì‚¬ë‘_ë§¤ì…ë§¤ì¶œ_${f}ë…„.csv`,x.click(),URL.revokeObjectURL(d)},className:"bg-green-100 text-green-700 p-4 rounded-lg font-medium hover:bg-green-200 flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ’š"}),e.jsx("span",{className:"text-sm",children:"ì„¸ë¬´ì‚¬ë‘"}),e.jsx("span",{className:"text-xs text-green-500",children:"ë§¤ì…ë§¤ì¶œ í˜•ì‹"})]}),e.jsxs("button",{onClick:()=>{const s=[["êµ¬ë¶„","ì„¸ê¸ˆê³„ì‚°ì„œë°œê¸‰ì¼","ê³µê¸‰ìì‚¬ì—…ìë²ˆí˜¸","ê³µê¸‰ììƒí˜¸","ê³µê¸‰ê°€ì•¡","ì„¸ì•¡","ë¹„ê³ "]];s.push(["[ ë§¤ì¶œ ì„¸ê¸ˆê³„ì‚°ì„œ í•©ê³„ ]","","","","","",""]);const r=_.filter(N=>{var y;return(y=N.settledAt||N.contractAt)==null?void 0:y.startsWith(String(f))}).reduce((N,y)=>N+(y.commission||0)*1e4,0),n=Math.round(r*.1);s.push(["ë§¤ì¶œí•©ê³„","","","",String(r),String(n),""]),s.push(["","","","","","",""]),s.push(["[ ë§¤ì… ì„¸ê¸ˆê³„ì‚°ì„œ í•©ê³„ ]","","","","","",""]);const d=V.reduce((N,y)=>N+(y.amount||0)*1e4,0),x=Math.round(d*.1);s.push(["ë§¤ì…í•©ê³„","","","",String(d),String(x),""]),s.push(["","","","","","",""]),s.push(["[ ë¶€ê°€ì„¸ ë‚©ë¶€ ì˜ˆì •ì•¡ ]","","","","",String(n-x),""]);const a=s.map(N=>N.join(",")).join(`
`),p=new Blob(["\uFEFF"+a],{type:"text/csv;charset=utf-8;"}),o=URL.createObjectURL(p),g=document.createElement("a");g.href=o,g.download=`ë¶€ê°€ì„¸ì‹ ê³ ìë£Œ_${f}ë…„.csv`,g.click(),URL.revokeObjectURL(o)},className:"bg-purple-100 text-purple-700 p-4 rounded-lg font-medium hover:bg-purple-200 flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ§¾"}),e.jsx("span",{className:"text-sm",children:"ë¶€ê°€ì„¸ ì‹ ê³ "}),e.jsx("span",{className:"text-xs text-purple-500",children:"ì„¸ê¸ˆê³„ì‚°ì„œ í•©ê³„"})]}),e.jsxs("button",{onClick:()=>{const s=[["ì†Œë“ìì„±ëª…","ì£¼ë¯¼ë²ˆí˜¸","ì†Œë“êµ¬ë¶„","ì§€ê¸‰ì•¡","ì†Œë“ì„¸","ì§€ë°©ì†Œë“ì„¸","ì‹¤ì§€ê¸‰ì•¡","ì§€ê¸‰ì¼"]];b.forEach(a=>{R.filter(o=>o.partnerId===a.partnerId&&(o.status==="paid"||o.status==="completed")).forEach(o=>{const g=(o.totalPayableCommission||0)*1e4,N=Math.round(g*.03),y=Math.round(g*.003),F=g-N-y;s.push([a.name,"","ì‚¬ì—…ì†Œë“",String(g),String(N),String(y),String(F),o.weekStart||""])})});const r=s.map(a=>a.join(",")).join(`
`),n=new Blob(["\uFEFF"+r],{type:"text/csv;charset=utf-8;"}),d=URL.createObjectURL(n),x=document.createElement("a");x.href=d,x.download=`ì›ì²œì„¸ì‹ ê³ ìë£Œ_${f}ë…„.csv`,x.click(),URL.revokeObjectURL(d)},className:"bg-orange-100 text-orange-700 p-4 rounded-lg font-medium hover:bg-orange-200 flex flex-col items-center gap-2",children:[e.jsx("span",{className:"text-2xl",children:"ğŸ’°"}),e.jsx("span",{className:"text-sm",children:"ì›ì²œì„¸ ì‹ ê³ "}),e.jsx("span",{className:"text-xs text-orange-500",children:"ì§€ê¸‰ëª…ì„¸ì„œ í˜•ì‹"})]})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-3",children:"ğŸ’¡ ë‹¤ìš´ë¡œë“œ í›„ ì„¸ë¬´ì‚¬ì—ê²Œ ì œì¶œ ë˜ëŠ” íšŒê³„ í”„ë¡œê·¸ë¨ì— ì§ì ‘ ì„í¬íŠ¸í•˜ì„¸ìš”."})]})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-rose-100 overflow-hidden",children:[e.jsx("div",{className:"p-4 border-b border-rose-100 bg-gradient-to-r from-rose-50 to-pink-50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"font-bold text-rose-700 flex items-center gap-2",children:"ğŸ“œ ì„¸ê¸ˆê³„ì‚°ì„œ ê´€ë¦¬"}),e.jsxs("p",{className:"text-xs text-rose-500 mt-1",children:[f,"ë…„ ë§¤ì…/ë§¤ì¶œ ì„¸ê¸ˆê³„ì‚°ì„œ"]})]}),e.jsx("button",{onClick:()=>{const s=prompt(`ì„¸ê¸ˆê³„ì‚°ì„œ ìœ í˜•ì„ ì„ íƒí•˜ì„¸ìš”:
1. ë§¤ì¶œ
2. ë§¤ì…`,"1");if(!s)return;const r=s==="1"?"ë§¤ì¶œ":"ë§¤ì…",n=prompt("ë°œí–‰ì¼ (YYYY-MM-DD):",new Date().toISOString().split("T")[0]);if(!n)return;const d=prompt("ê±°ë˜ì²˜ ìƒí˜¸:");if(!d)return;const x=prompt("ì‚¬ì—…ìë²ˆí˜¸ (í•˜ì´í”ˆ í¬í•¨):","000-00-00000")||"",a=prompt("ê³µê¸‰ê°€ì•¡ (ì›):");if(!a)return;const p=parseInt(a.replace(/,/g,"")),o=Math.round(p*.1),g=prompt("ì ìš”/í’ˆëª©:","")||"",N=prompt("ìŠ¹ì¸ë²ˆí˜¸ (ì„ íƒ):","")||void 0,y=confirm("ì „ìì„¸ê¸ˆê³„ì‚°ì„œ ì…ë‹ˆê¹Œ?"),{createTaxInvoice:F}=require("../services/api");F({type:r,issueDate:n,supplyAmount:p,vatAmount:o,totalAmount:p+o,businessNumber:x,companyName:d,description:g,approvalNumber:N,isElectronic:y}),alert(`ì„¸ê¸ˆê³„ì‚°ì„œê°€ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤:
${r} ${p.toLocaleString()}ì›`),window.location.reload()},className:"px-3 py-1.5 bg-rose-600 text-white text-sm rounded-lg hover:bg-rose-700",children:"+ ì„¸ê¸ˆê³„ì‚°ì„œ ë“±ë¡"})]})}),e.jsx("div",{className:"p-4",children:(()=>{const{fetchTaxInvoices:s,getTaxInvoiceStats:r,deleteTaxInvoice:n}=require("../services/api"),d=s(f),x=r(f);return e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[e.jsxs("div",{className:"bg-green-50 p-3 rounded-lg border border-green-200",children:[e.jsx("p",{className:"text-xs text-green-600",children:"ë§¤ì¶œ ì„¸ê¸ˆê³„ì‚°ì„œ"}),e.jsxs("p",{className:"text-lg font-bold text-green-700",children:[x.salesCount,"ê±´"]}),e.jsxs("p",{className:"text-xs text-green-500",children:[x.salesTotal.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"bg-red-50 p-3 rounded-lg border border-red-200",children:[e.jsx("p",{className:"text-xs text-red-600",children:"ë§¤ì… ì„¸ê¸ˆê³„ì‚°ì„œ"}),e.jsxs("p",{className:"text-lg font-bold text-red-700",children:[x.purchaseCount,"ê±´"]}),e.jsxs("p",{className:"text-xs text-red-500",children:[x.purchaseTotal.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"bg-blue-50 p-3 rounded-lg border border-blue-200",children:[e.jsx("p",{className:"text-xs text-blue-600",children:"ë§¤ì¶œì„¸ì•¡"}),e.jsxs("p",{className:"text-lg font-bold text-blue-700",children:[x.salesVat.toLocaleString(),"ì›"]})]}),e.jsxs("div",{className:"bg-purple-50 p-3 rounded-lg border border-purple-200",children:[e.jsx("p",{className:"text-xs text-purple-600",children:"ë‚©ë¶€ ì˜ˆì • ì„¸ì•¡"}),e.jsxs("p",{className:`text-lg font-bold ${x.vatPayable>=0?"text-purple-700":"text-green-700"}`,children:[x.vatPayable>=0?"":"-",Math.abs(x.vatPayable).toLocaleString(),"ì›"]})]})]}),d.length>0?e.jsx("div",{className:"overflow-x-auto max-h-60 overflow-y-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{className:"bg-rose-50 text-rose-700 sticky top-0",children:e.jsxs("tr",{children:[e.jsx("th",{className:"py-2 px-2 text-left",children:"ìœ í˜•"}),e.jsx("th",{className:"py-2 px-2 text-left",children:"ë°œí–‰ì¼"}),e.jsx("th",{className:"py-2 px-2 text-left",children:"ê±°ë˜ì²˜"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ê³µê¸‰ê°€ì•¡"}),e.jsx("th",{className:"py-2 px-2 text-right",children:"ì„¸ì•¡"}),e.jsx("th",{className:"py-2 px-2 text-center",children:"ì „ì"}),e.jsx("th",{className:"py-2 px-2"})]})}),e.jsx("tbody",{children:d.map(a=>e.jsxs("tr",{className:"border-b border-gray-100 hover:bg-gray-50",children:[e.jsx("td",{className:"py-2 px-2",children:e.jsx("span",{className:`px-2 py-0.5 rounded text-xs ${a.type==="ë§¤ì¶œ"?"bg-green-100 text-green-700":"bg-red-100 text-red-700"}`,children:a.type})}),e.jsx("td",{className:"py-2 px-2",children:a.issueDate}),e.jsx("td",{className:"py-2 px-2",children:a.companyName}),e.jsx("td",{className:"py-2 px-2 text-right",children:a.supplyAmount.toLocaleString()}),e.jsx("td",{className:"py-2 px-2 text-right",children:a.vatAmount.toLocaleString()}),e.jsx("td",{className:"py-2 px-2 text-center",children:a.isElectronic?"âœ“":""}),e.jsx("td",{className:"py-2 px-2",children:e.jsx("button",{onClick:()=>{confirm("ì´ ì„¸ê¸ˆê³„ì‚°ì„œë¥¼ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&(n(a.id),window.location.reload())},className:"text-gray-400 hover:text-red-500",children:"Ã—"})})]},a.id))})]})}):e.jsx("div",{className:"text-center py-8 text-gray-400",children:"ë“±ë¡ëœ ì„¸ê¸ˆê³„ì‚°ì„œê°€ ì—†ìŠµë‹ˆë‹¤."})]})})()})]}),e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-amber-100 overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-amber-100 bg-gradient-to-r from-amber-50 to-yellow-50",children:[e.jsx("h3",{className:"font-bold text-amber-700 flex items-center gap-2",children:"ğŸ“† ì›”ê°„ ì„¸ë¬´ ìº˜ë¦°ë”"}),e.jsxs("p",{className:"text-xs text-amber-500 mt-1",children:[f,"ë…„ ì„¸ë¬´ ì¼ì • í•œëˆˆì—"]})]}),e.jsxs("div",{className:"p-4",children:[(()=>{const r=new Date().getMonth()+1,n={1:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"},{day:25,name:"ë¶€ê°€ì„¸ í™•ì •ì‹ ê³ ",type:"ë¶€ê°€ì„¸",color:"bg-green-500"}],2:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"}],3:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"},{day:31,name:"ë²•ì¸ì„¸ ì‹ ê³ ",type:"ë²•ì¸ì„¸",color:"bg-purple-500"}],4:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"},{day:25,name:"ë¶€ê°€ì„¸ ì˜ˆì •ì‹ ê³ ",type:"ë¶€ê°€ì„¸",color:"bg-green-500"}],5:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"},{day:31,name:"ì¢…í•©ì†Œë“ì„¸ ì‹ ê³ ",type:"ì†Œë“ì„¸",color:"bg-red-500"}],6:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"}],7:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"},{day:25,name:"ë¶€ê°€ì„¸ í™•ì •ì‹ ê³ ",type:"ë¶€ê°€ì„¸",color:"bg-green-500"}],8:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"}],9:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"}],10:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"},{day:25,name:"ë¶€ê°€ì„¸ ì˜ˆì •ì‹ ê³ ",type:"ë¶€ê°€ì„¸",color:"bg-green-500"}],11:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"}],12:[{day:10,name:"ì›ì²œì„¸ ë‚©ë¶€",type:"ì›ì²œì„¸",color:"bg-blue-500"}]};return e.jsx("div",{className:"grid grid-cols-3 md:grid-cols-4 lg:grid-cols-6 gap-2",children:Array.from({length:12},(d,x)=>x+1).map(d=>{const x=n[d]||[],a=d===r;return e.jsxs("div",{className:`p-3 rounded-lg border ${a?"border-amber-400 bg-amber-50 ring-2 ring-amber-200":"border-gray-200 bg-gray-50"}`,children:[e.jsxs("div",{className:`text-sm font-bold mb-2 ${a?"text-amber-700":"text-gray-600"}`,children:[d,"ì›”"]}),e.jsx("div",{className:"space-y-1",children:x.length>0?x.map((p,o)=>e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx("span",{className:`w-1.5 h-1.5 rounded-full ${p.color}`}),e.jsxs("span",{className:"text-[10px] text-gray-600 truncate",children:[p.day,"ì¼ ",p.name]})]},o)):e.jsx("div",{className:"text-[10px] text-gray-400",children:"ì¼ì • ì—†ìŒ"})})]},d)})})})(),e.jsx("div",{className:"mt-4 p-3 bg-amber-50 rounded-lg border border-amber-200",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("span",{className:"text-lg",children:"ğŸ””"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium text-amber-700",children:"ì•± ì„¸ë¬´ ì•Œë¦¼"}),e.jsx("p",{className:"text-xs text-amber-600 mt-1",children:"LeadMaster ì•±ì—ì„œ ì„¸ë¬´ ì¼ì • ì•Œë¦¼ì„ ë°›ìœ¼ì„¸ìš”! ì„¤ì • â†’ ì•Œë¦¼ì—ì„œ ì„¸ë¬´ ì•Œë¦¼ì„ í™œì„±í™”í•˜ë©´ ë¶€ê°€ì„¸, ì›ì²œì„¸, ì†Œë“ì„¸ ì‹ ê³  ê¸°í•œ 7ì¼, 3ì¼, 1ì¼ ì „ì— í‘¸ì‹œ ì•Œë¦¼ì„ ë°›ì„ ìˆ˜ ìˆìŠµë‹ˆë‹¤."})]})]})})]})]})]})},dt=new Date,We=dt.getDay(),it=_.filter(t=>{var s;if(t.status==="ì¢…ê²°"||t.status==="ì·¨ì†Œ")return!1;const l=(t.depositHistory||[]).reduce((r,n)=>r+(n.amount||0),0);if((t.contractFee||0)-l<=0)return!1;const c=(s=t.depositHistory)!=null&&s.length?t.depositHistory.map(r=>r.date).sort().pop():t.contractAt||t.createdAt;return c?Xe(dt,Ae(c))>=30:!1}).length;let ee=null;return We===1?m?m.status==="draft"&&(ee={type:"info",msg:"ì •ì‚° ë‚´ì—­ì„ í™•ì¸í•˜ê³  í™•ì •(Confirmed)í•´ì£¼ì„¸ìš”."}):ee={type:"warning",msg:"ì›”ìš”ì¼ì…ë‹ˆë‹¤. ê¸ˆì£¼ ì •ì‚° ë°°ì¹˜ë¥¼ ìƒì„±í•˜ê³  í™•ì¸í•´ì£¼ì„¸ìš”."}:We===2?m&&!m.invoiceInfo&&(ee={type:"warning",msg:"í™”ìš”ì¼ì…ë‹ˆë‹¤. ì„¸ê¸ˆê³„ì‚°ì„œ ë°œí–‰ ë° ìˆ˜ê¸ˆ í™•ì¸ì´ í•„ìš”í•©ë‹ˆë‹¤."}):We===3&&m&&m.status!=="completed"&&m.status!=="paid"&&(ee={type:"warning",msg:"ìˆ˜ìš”ì¼ì…ë‹ˆë‹¤. íŒŒíŠ¸ë„ˆ ìˆ˜ìˆ˜ë£Œ ì§€ê¸‰ì„ ì§„í–‰í•´ì£¼ì„¸ìš”."}),e.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"ì£¼ê°„ì •ì‚°ì„¼í„°"}),e.jsx("div",{className:"flex gap-2 items-center flex-wrap",children:e.jsxs("div",{className:"relative",children:[e.jsxs("select",{className:"bg-white border p-2 pl-9 rounded text-lg font-bold text-indigo-700 min-w-[200px] outline-none cursor-pointer",value:v,onChange:t=>M(t.target.value),children:[e.jsx("option",{value:"all",children:"ì „ì²´ í†µê³„ (Total)"}),b.map(t=>e.jsx("option",{value:t.partnerId,children:t.name},t.partnerId))]}),e.jsx(Ms,{className:"absolute left-3 top-3 text-indigo-500",size:18})]})})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[it>0&&e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-3 flex items-center justify-between animate-pulse",children:[e.jsxs("div",{className:"flex items-center gap-2 text-red-700",children:[e.jsx("span",{className:"font-bold",children:"ğŸš¨ ê¸´ê¸‰"}),e.jsxs("span",{className:"text-sm",children:["í˜„ì¬ 30ì¼ ì´ìƒ ì¥ê¸° ë¯¸ìˆ˜ê¸ˆ ê±´ì´ ",e.jsxs("span",{className:"font-bold underline",children:[it,"ê±´"]})," ìˆìŠµë‹ˆë‹¤."]})]}),e.jsx("button",{onClick:()=>{D("report")},className:"text-xs bg-red-100 text-red-700 px-2 py-1 rounded font-bold hover:bg-red-200",children:"í™•ì¸í•˜ê¸°"})]}),ee&&e.jsxs("div",{className:`border rounded-lg p-3 flex items-center gap-2 ${ee.type==="warning"?"bg-orange-50 border-orange-200 text-orange-800":"bg-blue-50 border-blue-200 text-blue-800"}`,children:[e.jsx("span",{children:ee.type==="warning"?"âš ï¸":"â„¹ï¸"}),e.jsx("span",{className:"text-sm font-medium",children:ee.msg})]})]}),P!=="report"&&!X&&e.jsxs("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 flex flex-wrap items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("button",{onClick:Rt,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx(At,{size:20})}),e.jsxs("div",{className:"text-center min-w-[200px]",children:[e.jsx("p",{className:"font-bold text-lg text-gray-800",children:Re}),e.jsxs("p",{className:"text-sm text-gray-500",children:[k.toLocaleDateString("ko-KR")," ~ ",hs(k).toLocaleDateString("ko-KR")]})]}),e.jsx("button",{onClick:Ot,className:"p-2 hover:bg-gray-100 rounded",children:e.jsx($t,{size:20})})]}),e.jsx("button",{onClick:Bt,className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"ì´ë²ˆ ì£¼ë¡œ ì´ë™"})]}),e.jsxs("div",{className:"flex border-b border-gray-200 overflow-x-auto",children:[!X&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>D("monday"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap border-b-2 transition-colors ${P==="monday"?"border-blue-600 text-blue-600 bg-blue-50":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ğŸ“… ì›”ìš”ì¼ (í™•ì¸)"}),e.jsx("button",{onClick:()=>D("tuesday"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap border-b-2 transition-colors ${P==="tuesday"?"border-yellow-600 text-yellow-600 bg-yellow-50":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ğŸ“„ í™”ìš”ì¼ (ë°œí–‰/ìˆ˜ê¸ˆ)"}),e.jsx("button",{onClick:()=>D("wednesday"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap border-b-2 transition-colors ${P==="wednesday"?"border-green-600 text-green-600 bg-green-50":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ğŸ’° ìˆ˜ìš”ì¼ (ì§€ê¸‰)"})]}),e.jsx("button",{onClick:()=>D("report"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap border-b-2 transition-colors ${P==="report"?"border-purple-600 text-purple-600 bg-purple-50":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ğŸ“Š ë¦¬í¬íŠ¸"}),e.jsx("button",{onClick:()=>D("expenses"),className:`px-6 py-3 font-medium text-sm whitespace-nowrap border-b-2 transition-colors ${P==="expenses"?"border-red-600 text-red-600 bg-red-50":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"ğŸ’³ ì§€ì¶œ"})]}),(P==="report"||P==="expenses")&&e.jsxs("div",{className:"flex gap-2 items-center",children:[e.jsx("select",{className:"bg-white border p-2 rounded text-lg font-bold cursor-pointer min-w-[100px]",value:f,onChange:t=>U(Number(t.target.value)),children:Array.from({length:13},(t,l)=>2024+l).map(t=>e.jsxs("option",{value:t,children:[t,"ë…„"]},t))}),e.jsxs("select",{className:"bg-white border p-2 rounded text-lg font-bold cursor-pointer min-w-[100px]",value:S,onChange:t=>se(t.target.value==="all"?"all":Number(t.target.value)),children:[e.jsx("option",{value:"all",children:"ì „ì²´ ì›”"}),Array.from({length:12},(t,l)=>l+1).map(t=>e.jsxs("option",{value:t,children:[t,"ì›”"]},t))]})]}),P==="monday"&&!X&&Jt(),P==="tuesday"&&!X&&Qt(),P==="wednesday"&&!X&&es(),P==="report"&&ts(),P==="expenses"&&ns(),X&&P!=="report"&&P!=="expenses"&&e.jsxs("div",{className:"bg-gray-50 p-8 rounded-xl text-center",children:[e.jsx("p",{className:"text-gray-500",children:"ì£¼ê°„ ì •ì‚° ê¸°ëŠ¥ì€ íŠ¹ì • ê±°ë˜ì²˜ë¥¼ ì„ íƒí•´ì•¼ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤."}),e.jsx("p",{className:"text-sm text-gray-400 mt-2",children:'í†µê³„ë¥¼ ë³´ì‹œë ¤ë©´ "ë¦¬í¬íŠ¸" íƒ­ì„ ì„ íƒí•˜ì„¸ìš”.'})]}),e.jsxs(jt,{isOpen:je,onClose:()=>ce(!1),title:`${f}ë…„ ${S==="all"?"ì „ì²´":S+"ì›”"} ê³„ì•½ ë° ì •ì‚° ìƒì„¸ ë‚´ì—­`,children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm text-left whitespace-nowrap",children:[e.jsx("thead",{className:"bg-gray-100 text-gray-700 font-bold",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-4 py-2",children:"ê³„ì•½ì¼"}),e.jsx("th",{className:"px-4 py-2",children:"ê³ ê°ëª…"}),e.jsx("th",{className:"px-4 py-2",children:"ê±°ë˜ì²˜"}),e.jsx("th",{className:"px-4 py-2",children:"ìƒíƒœ"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"ìˆ˜ì„ë£Œ"}),e.jsx("th",{className:"px-4 py-2 text-right",children:"ìˆ˜ë‹¹(Rule)"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-100",children:G.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:6,className:"px-4 py-8 text-center text-gray-500",children:"í•´ë‹¹ ê¸°ê°„ì— ì™„ë£Œëœ ê³„ì•½ ê±´ì´ ì—†ìŠµë‹ˆë‹¤."})}):G.sort((t,l)=>(l.contractAt||"").localeCompare(t.contractAt||"")).map(t=>{var i;const l=Se(t);return e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"px-4 py-2 text-gray-600",children:t.contractAt}),e.jsx("td",{className:"px-4 py-2 font-medium text-gray-900",children:t.customerName}),e.jsx("td",{className:"px-4 py-2 text-gray-500",children:qt(t.partnerId)}),e.jsx("td",{className:"px-4 py-2",children:e.jsx("span",{className:"px-2 py-0.5 rounded text-xs bg-gray-100 text-gray-600 border border-gray-200",children:t.status})}),e.jsxs("td",{className:"px-4 py-2 text-right text-blue-600 font-medium",children:[(i=t.contractFee)==null?void 0:i.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"px-4 py-2 text-right text-green-600 font-bold",children:[l.toLocaleString(),"ë§Œì›"]})]},t.caseId)})}),G.length>0&&e.jsx("tfoot",{className:"bg-gray-50 font-bold",children:e.jsxs("tr",{children:[e.jsx("td",{colSpan:4,className:"px-4 py-2 text-center text-gray-700",children:"í•©ê³„"}),e.jsxs("td",{className:"px-4 py-2 text-right text-blue-700",children:[Be.toLocaleString(),"ë§Œì›"]}),e.jsxs("td",{className:"px-4 py-2 text-right text-green-700",children:[Ue.toLocaleString(),"ë§Œì›"]})]})})]})}),e.jsx("div",{className:"mt-4 flex justify-end",children:e.jsx("button",{onClick:()=>ce(!1),className:"px-4 py-2 bg-gray-200 text-gray-700 rounded hover:bg-gray-300 text-sm font-medium",children:"ë‹«ê¸°"})})]}),e.jsx(jt,{isOpen:Tt,onClose:()=>{xe(!1),me(null)},title:ve?"ì§€ì¶œ ìˆ˜ì •":"ì§€ì¶œ ë“±ë¡",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë‚ ì§œ"}),e.jsx("input",{type:"date",className:"w-full border rounded-lg p-2",value:H.date||"",onChange:t=>Q({...H,date:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ì¹´í…Œê³ ë¦¬"}),e.jsx("select",{className:"w-full border rounded-lg p-2",value:H.category||"ê´‘ê³ ë¹„",onChange:t=>Q({...H,category:t.target.value}),children:gs.map(t=>e.jsx("option",{value:t,children:t},t))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ê¸ˆì•¡ (ë§Œì›)"}),e.jsx("input",{type:"number",className:"w-full border rounded-lg p-2",placeholder:"ì˜ˆ: 100",value:H.amount||"",onChange:t=>Q({...H,amount:Number(t.target.value)})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë‚´ìš© *"}),e.jsx("input",{type:"text",className:"w-full border rounded-lg p-2",placeholder:"ì˜ˆ: ë„¤ì´ë²„ ê´‘ê³ ë¹„",value:H.description||"",onChange:t=>Q({...H,description:t.target.value})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ë©”ëª¨ (ì„ íƒ)"}),e.jsx("textarea",{className:"w-full border rounded-lg p-2",rows:2,placeholder:"ì¶”ê°€ ë©”ëª¨",value:H.memo||"",onChange:t=>Q({...H,memo:t.target.value})})]}),e.jsxs("div",{className:"flex gap-2 pt-4",children:[e.jsx("button",{onClick:ss,className:"flex-1 bg-red-600 text-white py-2 rounded-lg font-bold hover:bg-red-700",children:ve?"ìˆ˜ì •":"ë“±ë¡"}),e.jsx("button",{onClick:()=>{xe(!1),me(null)},className:"flex-1 bg-gray-200 text-gray-700 py-2 rounded-lg font-medium hover:bg-gray-300",children:"ì·¨ì†Œ"})]})]})})]})}export{Aa as default};
