import{c as oe,t as L,a as re,n as Ae,g as Ze,r as l,s as Xe,j as o,f as Z,L as Se,u as Je,b as Qe,d as et}from"./index-OIxOZZYR.js";import{i as tt,a as me,p as rt,g as fe,b as at,c as nt}from"./utils-HTqLcupK.js";import{C as it,a as lt}from"./chevron-right-jbmgd4yE.js";import{r as W,c as J,a as De,S as ot,b as st,u as R,s as ct,d as dt,e as ut,f as mt,g as ft,h as gt,i as vt,j as ae,k as se,l as pt,m as ge,n as ht,o as A,p as G,q as yt,t as bt,v as T,w as xt,x as Pt,y as Ne,z as jt,A as Ot,B as I,C as wt,D as Et,E as At,F as St,G as ke,H as Dt,I as Nt,J as kt,K as Ct,L as It,M as Mt,N as Ce,O as Tt,P as Ie,R as Lt,Q as _t,T as Me,U as Te,V as Rt,W as F,Z as Le,X as ce,Y as Ft,_ as $t,$ as Kt,a0 as Bt,a1 as ve,a2 as q,a3 as ne,a4 as zt,a5 as Wt,a6 as Gt,a7 as Vt,a8 as Ht,a9 as Ut,aa as Yt,ab as qt,ac as Zt,ad as Xt,ae as Jt,af as Qt,ag as z,ah as pe,ai as er,aj as tr,ak as rr,al as ar,am as nr,an as ir,ao as lr,ap as or,aq as sr,ar as _e,as as cr,at as dr,au as ur,av as mr,aw as Re,ax as fr,ay as gr}from"./BarChart-BTt_uUCg.js";import{C as vr}from"./circle-alert-CJK8Yngl.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pr=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hr=oe("calendar",pr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yr=[["path",{d:"M12 6v6l4 2",key:"mmk7yg"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],br=oe("clock",yr);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xr=[["path",{d:"M13 2a9 9 0 0 1 9 9",key:"1itnx2"}],["path",{d:"M13 6a5 5 0 0 1 5 5",key:"11nki7"}],["path",{d:"M13.832 16.568a1 1 0 0 0 1.213-.303l.355-.465A2 2 0 0 1 17 15h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2A18 18 0 0 1 2 4a2 2 0 0 1 2-2h3a2 2 0 0 1 2 2v3a2 2 0 0 1-.8 1.6l-.468.351a1 1 0 0 0-.292 1.233 14 14 0 0 0 6.392 6.384",key:"9njp5v"}]],Pr=oe("phone-call",xr);function Fe(e,t,r){const a=L(e,r==null?void 0:r.in);if(isNaN(t))return re(e,NaN);if(!t)return a;const n=a.getDate(),i=re(e,a.getTime());i.setMonth(a.getMonth()+t+1,0);const s=i.getDate();return n>=s?i:(a.setFullYear(i.getFullYear(),i.getMonth(),n),a)}function $e(e,t){const r=L(e,t==null?void 0:t.in),a=r.getMonth();return r.setFullYear(r.getFullYear(),a+1,0),r.setHours(23,59,59,999),r}function jr(e,t){const[r,a]=Ae(e,t.start,t.end);return{start:r,end:a}}function Or(e,t){const{start:r,end:a}=jr(t==null?void 0:t.in,e);let n=+r>+a;const i=n?+r:+a,s=n?a:r;s.setHours(0,0,0,0);let c=1;const u=[];for(;+s<=i;)u.push(re(r,s)),s.setDate(s.getDate()+c),s.setHours(0,0,0,0);return n?u.reverse():u}function Ke(e,t){const r=L(e,t==null?void 0:t.in);return r.setDate(1),r.setHours(0,0,0,0),r}function wr(e,t){var c,u;const r=Ze(),a=r.weekStartsOn??((u=(c=r.locale)==null?void 0:c.options)==null?void 0:u.weekStartsOn)??0,n=L(e,t==null?void 0:t.in),i=n.getDay(),s=(i<a?-7:0)+6-(i-a);return n.setDate(n.getDate()+s),n.setHours(23,59,59,999),n}function Er(e,t,r){const[a,n]=Ae(r==null?void 0:r.in,e,t);return a.getFullYear()===n.getFullYear()&&a.getMonth()===n.getMonth()}function Ar(e,t,r){const a=+L(e,r==null?void 0:r.in),[n,i]=[+L(t.start,r==null?void 0:r.in),+L(t.end,r==null?void 0:r.in)].sort((s,c)=>s-c);return a>=n&&a<=i}function Be(e,t,r){return Fe(e,-t,r)}function Sr({cases:e,onDateSelect:t,selectedDate:r}){const[a,n]=l.useState(new Date),i=()=>n(Be(a,1)),s=()=>n(Fe(a,1)),c=()=>n(new Date),u=Ke(a),f=$e(u),g=Xe(u),h=wr(f),m=Or({start:g,end:h}),p=e.flatMap(v=>(v.reminders||[]).map(y=>({caseId:v.caseId,customerName:v.customerName,datetime:y.datetime}))),x=v=>p.filter(y=>{if(!y.datetime)return!1;const d=rt(y.datetime,"yyyy-MM-dd HH:mm",new Date);return me(d,v)}).sort((y,d)=>(y.datetime||"").localeCompare(d.datetime||""));return o.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 flex items-center justify-between bg-white",children:[o.jsx("h3",{className:"font-bold text-gray-800 flex items-center gap-2",children:o.jsx("span",{className:"text-xl",children:Z(a,"yyyy년 M월")})}),o.jsxs("div",{className:"flex items-center gap-2",children:[o.jsx("button",{onClick:c,className:"px-3 py-1 text-xs font-medium bg-gray-100 rounded hover:bg-gray-200 text-gray-600",children:"오늘"}),o.jsxs("div",{className:"flex rounded-md border border-gray-200 bg-white",children:[o.jsx("button",{onClick:i,className:"p-1 hover:bg-gray-50 text-gray-600 border-r border-gray-200",children:o.jsx(it,{size:20})}),o.jsx("button",{onClick:s,className:"p-1 hover:bg-gray-50 text-gray-600",children:o.jsx(lt,{size:20})})]})]})]}),o.jsx("div",{className:"grid grid-cols-7 border-b border-gray-100 bg-gray-50",children:["일","월","화","수","목","금","토"].map((v,y)=>o.jsx("div",{className:`text-center py-2 text-xs font-semibold ${y===0?"text-red-500":"text-gray-500"}`,children:v},v))}),o.jsx("div",{className:"grid grid-cols-7 bg-gray-200 gap-px",children:m.map(v=>{const y=x(v),d=Er(v,u),b=tt(v),S=r?me(v,r):!1;return o.jsxs("div",{onClick:()=>t&&t(v),className:`min-h-[100px] p-2 flex flex-col gap-1 cursor-pointer transition-colors
                ${S?"bg-blue-50 ring-2 ring-blue-500 ring-inset z-10":d?"bg-white hover:bg-gray-50":"bg-gray-50 hover:bg-gray-100"}
              `,children:[o.jsxs("div",{className:"flex justify-between items-start",children:[o.jsx("span",{className:`text-xs font-medium w-6 h-6 flex items-center justify-center rounded-full
                    ${b?"bg-blue-600 text-white":S?"text-blue-700 font-bold":d?"text-gray-700":"text-gray-400"}`,children:Z(v,"d")}),y.length>0&&o.jsxs("span",{className:"text-[10px] bg-blue-50 text-blue-600 px-1.5 rounded font-bold",children:[y.length,"건"]})]}),o.jsx("div",{className:"flex-1 overflow-y-auto no-scrollbar space-y-1 mt-1",children:y.map((j,E)=>{var w;const O=((w=j.datetime)==null?void 0:w.split(" ")[1])||"";return o.jsx(Se,{to:`/case/${j.caseId}`,className:`block text-[10px] p-1 rounded border truncate hover:opacity-80 transition-opacity
                                ${b?"bg-blue-50 border-blue-100 text-blue-700":"bg-gray-50 border-gray-100 text-gray-600"}
                            `,children:o.jsxs("div",{className:"flex items-center gap-1",children:[o.jsx("span",{className:"font-mono font-bold text-gray-500",children:O}),o.jsx("span",{className:"font-semibold",children:j.customerName})]})},`${j.caseId}-${E}`)})})]},v.toISOString())})})]})}function X(){return X=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},X.apply(null,arguments)}function he(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Dr(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?he(Object(r),!0).forEach(function(a){Nr(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):he(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Nr(e,t,r){return(t=kr(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function kr(e){var t=Cr(e,"string");return typeof t=="symbol"?t:t+""}function Cr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var N=32,Ir={align:"center",iconSize:14,inactiveColor:"#ccc",layout:"horizontal",verticalAlign:"middle"};function Mr(e){var{data:t,iconType:r,inactiveColor:a}=e,n=N/2,i=N/6,s=N/3,c=t.inactive?a:t.color,u=r??t.type;if(u==="none")return null;if(u==="plainline"){var f;return l.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:(f=t.payload)===null||f===void 0?void 0:f.strokeDasharray,x1:0,y1:n,x2:N,y2:n,className:"recharts-legend-icon"})}if(u==="line")return l.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(n,"h").concat(s,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(2*s,",").concat(n,`
            H`).concat(N,"M").concat(2*s,",").concat(n,`
            A`).concat(i,",").concat(i,",0,1,1,").concat(s,",").concat(n),className:"recharts-legend-icon"});if(u==="rect")return l.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(N/8,"h").concat(N,"v").concat(N*3/4,"h").concat(-N,"z"),className:"recharts-legend-icon"});if(l.isValidElement(t.legendIcon)){var g=Dr({},t);return delete g.legendIcon,l.cloneElement(t.legendIcon,g)}return l.createElement(st,{fill:c,cx:n,cy:n,size:N,sizeType:"diameter",type:u})}function Tr(e){var{payload:t,iconSize:r,layout:a,formatter:n,inactiveColor:i,iconType:s}=e,c={x:0,y:0,width:N,height:N},u={display:a==="horizontal"?"inline-block":"block",marginRight:10},f={display:"inline-block",verticalAlign:"middle",marginRight:4};return t.map((g,h)=>{var m=g.formatter||n,p=J({"recharts-legend-item":!0,["legend-item-".concat(h)]:!0,inactive:g.inactive});if(g.type==="none")return null;var x=g.inactive?i:g.color,v=m?m(g.value,g,h):g.value;return l.createElement("li",X({className:p,style:u,key:"legend-item-".concat(h)},De(e,g,h)),l.createElement(ot,{width:r,height:r,viewBox:c,style:f,"aria-label":"".concat(v," legend icon")},l.createElement(Mr,{data:g,iconType:s,inactiveColor:i})),l.createElement("span",{className:"recharts-legend-item-text",style:{color:x}},v))})}var Lr=e=>{var t=W(e,Ir),{payload:r,layout:a,align:n}=t;if(!r||!r.length)return null;var i={padding:0,margin:0,textAlign:a==="horizontal"?n:"left"};return l.createElement("ul",{className:"recharts-default-legend",style:i},l.createElement(Tr,X({},t,{payload:r})))};function _r(){return R(ct)}var Rr=["contextPayload"];function ie(){return ie=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},ie.apply(null,arguments)}function ye(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function $(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?ye(Object(r),!0).forEach(function(a){Fr(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ye(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Fr(e,t,r){return(t=$r(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function $r(e){var t=Kr(e,"string");return typeof t=="symbol"?t:t+""}function Kr(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Br(e,t){if(e==null)return{};var r,a,n=zr(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function zr(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function Wr(e){return e.value}function Gr(e){var{contextPayload:t}=e,r=Br(e,Rr),a=ht(t,e.payloadUniqBy,Wr),n=$($({},r),{},{payload:a});return l.isValidElement(e.content)?l.cloneElement(e.content,n):typeof e.content=="function"?l.createElement(e.content,n):l.createElement(Lr,n)}function Vr(e,t,r,a,n,i){var{layout:s,align:c,verticalAlign:u}=t,f,g;return(!e||(e.left===void 0||e.left===null)&&(e.right===void 0||e.right===null))&&(c==="center"&&s==="vertical"?f={left:((a||0)-i.width)/2}:f=c==="right"?{right:r&&r.right||0}:{left:r&&r.left||0}),(!e||(e.top===void 0||e.top===null)&&(e.bottom===void 0||e.bottom===null))&&(u==="middle"?g={top:((n||0)-i.height)/2}:g=u==="bottom"?{bottom:r&&r.bottom||0}:{top:r&&r.top||0}),$($({},f),g)}function Hr(e){var t=se();return l.useEffect(()=>{t(pt(e))},[t,e]),null}function Ur(e){var t=se();return l.useEffect(()=>(t(ge(e)),()=>{t(ge({width:0,height:0}))}),[t,e]),null}function Yr(e,t,r,a){return e==="vertical"&&ae(t)?{height:t}:e==="horizontal"?{width:r||a}:null}var qr={align:"center",iconSize:14,itemSorter:"value",layout:"horizontal",verticalAlign:"bottom"};function ze(e){var t=W(e,qr),r=_r(),a=dt(),n=ut(),{width:i,height:s,wrapperStyle:c,portal:u}=t,[f,g]=mt([r]),h=ft(),m=gt();if(h==null||m==null)return null;var p=h-((n==null?void 0:n.left)||0)-((n==null?void 0:n.right)||0),x=Yr(t.layout,s,i,p),v=u?c:$($({position:"absolute",width:(x==null?void 0:x.width)||i||"auto",height:(x==null?void 0:x.height)||s||"auto"},Vr(c,t,n,h,m,f)),c),y=u??a;if(y==null||r==null)return null;var d=l.createElement("div",{className:"recharts-legend-wrapper",style:v,ref:g},l.createElement(Hr,{layout:t.layout,align:t.align,verticalAlign:t.verticalAlign,itemSorter:t.itemSorter}),!u&&l.createElement(Ur,{width:f.width,height:f.height}),l.createElement(Gr,ie({},t,x,{margin:n,chartWidth:h,chartHeight:m,contextPayload:r})));return vt.createPortal(d,y)}ze.displayName="Legend";var We=e=>e.graphicalItems.polarItems,Zr=A([G,yt],bt),Q=A([We,T,Zr],xt),Xr=A([Q],Pt),ee=A([Xr,Ne],jt),Jr=A([ee,T,Q],Ot);A([ee,T,Q],(e,t,r)=>r.length>0?e.flatMap(a=>r.flatMap(n=>{var i,s=I(a,(i=t.dataKey)!==null&&i!==void 0?i:n.dataKey);return{value:s,errorDomain:[]}})).filter(Boolean):(t==null?void 0:t.dataKey)!=null?e.map(a=>({value:I(a,t.dataKey),errorDomain:[]})):e.map(a=>({value:a,errorDomain:[]})));var be=()=>{},Qr=A([ee,T,Q,wt,G],Et),ea=A([T,At,St,be,Qr,be,ke,G],Dt),Ge=A([T,ke,ee,Jr,Nt,G,ea],kt),ta=A([Ge,T,Ct],It);A([T,Ge,ta,G],Mt);function xe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function Pe(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?xe(Object(r),!0).forEach(function(a){ra(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):xe(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function ra(e,t,r){return(t=aa(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function aa(e){var t=na(e,"string");return typeof t=="symbol"?t:t+""}function na(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var ia=(e,t)=>t,de=A([We,ia],(e,t)=>e.filter(r=>r.type==="pie").find(r=>r.id===t)),la=[],ue=(e,t,r)=>(r==null?void 0:r.length)===0?la:r,Ve=A([Ne,de,ue],(e,t,r)=>{var{chartData:a}=e;if(t!=null){var n;if((t==null?void 0:t.data)!=null&&t.data.length>0?n=t.data:n=a,(!n||!n.length)&&r!=null&&(n=r.map(i=>Pe(Pe({},t.presentationProps),i.props))),n!=null)return n}}),oa=A([Ve,de,ue],(e,t,r)=>{if(!(e==null||t==null))return e.map((a,n)=>{var i,s=I(a,t.nameKey,t.name),c;return r!=null&&(i=r[n])!==null&&i!==void 0&&(i=i.props)!==null&&i!==void 0&&i.fill?c=r[n].props.fill:typeof a=="object"&&a!=null&&"fill"in a?c=a.fill:c=t.fill,{value:Ce(s,t.dataKey),color:c,payload:a,type:t.legendType}})}),sa=A([Ve,de,ue,Tt],(e,t,r,a)=>{if(!(t==null||e==null))return Na({offset:a,pieSettings:t,displayedData:e,cells:r})}),ca=["key"],da=["onMouseEnter","onClick","onMouseLeave"],ua=["id"],ma=["id"];function je(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function P(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?je(Object(r),!0).forEach(function(a){fa(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):je(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function fa(e,t,r){return(t=ga(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function ga(e){var t=va(e,"string");return typeof t=="symbol"?t:t+""}function va(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function M(){return M=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},M.apply(null,arguments)}function te(e,t){if(e==null)return{};var r,a,n=pa(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function pa(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}function ha(e){var t=l.useMemo(()=>Te(e.children,ce),[e.children]),r=R(a=>oa(a,e.id,t));return r==null?null:l.createElement(Rt,{legendPayload:r})}var ya=l.memo(e=>{var{dataKey:t,nameKey:r,sectors:a,stroke:n,strokeWidth:i,fill:s,name:c,hide:u,tooltipType:f,id:g}=e,h={dataDefinedOnItem:a.map(m=>m.tooltipPayload),positions:a.map(m=>m.tooltipPosition),settings:{stroke:n,strokeWidth:i,fill:s,dataKey:t,nameKey:r,name:Ce(c,t),hide:u,type:f,color:s,unit:"",graphicalItemId:g}};return l.createElement(Ft,{tooltipEntrySettings:h})}),ba=(e,t)=>e>t?"start":e<t?"end":"middle",xa=(e,t,r)=>typeof t=="function"?z(t(e),r,r*.8):z(t,r,r*.8),Pa=(e,t,r)=>{var{top:a,left:n,width:i,height:s}=t,c=Qt(i,s),u=n+z(e.cx,i,i/2),f=a+z(e.cy,s,s/2),g=z(e.innerRadius,c,0),h=xa(r,e.outerRadius,c),m=e.maxRadius||Math.sqrt(i*i+s*s)/2;return{cx:u,cy:f,innerRadius:g,outerRadius:h,maxRadius:m}},ja=(e,t)=>{var r=q(t-e),a=Math.min(Math.abs(t-e),360);return r*a};function Oa(e){return e&&typeof e=="object"&&"className"in e&&typeof e.className=="string"?e.className:""}var wa=(e,t)=>{if(l.isValidElement(e))return l.cloneElement(e,t);if(typeof e=="function")return e(t);var r=J("recharts-pie-label-line",typeof e!="boolean"?e.className:""),{key:a}=t,n=te(t,ca);return l.createElement(er,M({},n,{type:"linear",className:r}))},Ea=(e,t,r)=>{if(l.isValidElement(e))return l.cloneElement(e,t);var a=r;if(typeof e=="function"&&(a=e(t),l.isValidElement(a)))return a;var n=J("recharts-pie-label-text",Oa(e));return l.createElement(tr,M({},t,{alignmentBaseline:"middle",className:n}),a)};function Aa(e){var{sectors:t,props:r,showLabels:a}=e,{label:n,labelLine:i,dataKey:s}=r;if(!a||!n||!t)return null;var c=Ie(r),u=pe(n),f=pe(i),g=typeof n=="object"&&"offsetRadius"in n&&typeof n.offsetRadius=="number"&&n.offsetRadius||20,h=t.map((m,p)=>{var x=(m.startAngle+m.endAngle)/2,v=ne(m.cx,m.cy,m.outerRadius+g,x),y=P(P(P(P({},c),m),{},{stroke:"none"},u),{},{index:p,textAnchor:ba(v.x,m.cx)},v),d=P(P(P(P({},c),m),{},{fill:"none",stroke:m.fill},f),{},{index:p,points:[ne(m.cx,m.cy,m.outerRadius,x),v],key:"line"});return l.createElement(Le,{zIndex:Me.label,key:"label-".concat(m.startAngle,"-").concat(m.endAngle,"-").concat(m.midAngle,"-").concat(p)},l.createElement(F,null,i&&wa(i,d),Ea(n,y,I(m,s))))});return l.createElement(F,{className:"recharts-pie-labels"},h)}function Sa(e){var{sectors:t,props:r,showLabels:a}=e,{label:n}=r;return typeof n=="object"&&n!=null&&"position"in n?l.createElement(Jt,{label:n}):l.createElement(Aa,{sectors:t,props:r,showLabels:a})}function Da(e){var{sectors:t,activeShape:r,inactiveShape:a,allOtherPieProps:n,shape:i,id:s}=e,c=R(Wt),u=R(Gt),f=R(Vt),{onMouseEnter:g,onClick:h,onMouseLeave:m}=n,p=te(n,da),x=Ht(g,n.dataKey,s),v=Ut(m),y=Yt(h,n.dataKey,s);return t==null||t.length===0?null:l.createElement(l.Fragment,null,t.map((d,b)=>{if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&t.length!==1)return null;var S=f==null||f===s,j=String(b)===c&&(u==null||n.dataKey===u)&&S,E=c?a:null,O=r&&j?r:E,w=P(P({},d),{},{stroke:d.stroke,tabIndex:-1,[Zt]:b,[qt]:s});return l.createElement(F,M({key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(b),tabIndex:-1,className:"recharts-pie-sector"},De(p,d,b),{onMouseEnter:x(d,b),onMouseLeave:v(d,b),onClick:y(d,b)}),l.createElement(Xt,M({option:i??O,index:b,shapeType:"sector",isActive:j},w)))}))}function Na(e){var t,{pieSettings:r,displayedData:a,cells:n,offset:i}=e,{cornerRadius:s,startAngle:c,endAngle:u,dataKey:f,nameKey:g,tooltipType:h}=r,m=Math.abs(r.minAngle),p=ja(c,u),x=Math.abs(p),v=a.length<=1?0:(t=r.paddingAngle)!==null&&t!==void 0?t:0,y=a.filter(O=>I(O,f,0)!==0).length,d=(x>=360?y:y-1)*v,b=x-y*m-d,S=a.reduce((O,w)=>{var D=I(w,f,0);return O+(ae(D)?D:0)},0),j;if(S>0){var E;j=a.map((O,w)=>{var D=I(O,f,0),_=I(O,g,w),k=Pa(r,i,O),V=(ae(D)?D:0)/S,C,K=P(P({},O),n&&n[w]&&n[w].props);w?C=E.endAngle+q(p)*v*(D!==0?1:0):C=c;var H=C+q(p)*((D!==0?m:0)+V*b),U=(C+H)/2,B=(k.innerRadius+k.outerRadius)/2,Ye=[{name:_,value:D,payload:K,dataKey:f,type:h,graphicalItemId:r.id}],qe=ne(k.cx,k.cy,B,U);return E=P(P(P(P({},r.presentationProps),{},{percent:V,cornerRadius:typeof s=="string"?parseFloat(s):s,name:_,tooltipPayload:Ye,midAngle:U,middleRadius:B,tooltipPosition:qe},K),k),{},{value:D,dataKey:f,startAngle:C,endAngle:H,payload:K,paddingAngle:q(p)*v}),E})}return j}function ka(e){var{showLabels:t,sectors:r,children:a}=e,n=l.useMemo(()=>!t||!r?[]:r.map(i=>({value:i.value,payload:i.payload,clockWise:!1,parentViewBox:void 0,viewBox:{cx:i.cx,cy:i.cy,innerRadius:i.innerRadius,outerRadius:i.outerRadius,startAngle:i.startAngle,endAngle:i.endAngle,clockWise:!1},fill:i.fill})),[r,t]);return l.createElement(zt,{value:t?n:void 0},a)}function Ca(e){var{props:t,previousSectorsRef:r,id:a}=e,{sectors:n,isAnimationActive:i,animationBegin:s,animationDuration:c,animationEasing:u,activeShape:f,inactiveShape:g,onAnimationStart:h,onAnimationEnd:m}=t,p=$t(t,"recharts-pie-"),x=r.current,[v,y]=l.useState(!1),d=l.useCallback(()=>{typeof m=="function"&&m(),y(!1)},[m]),b=l.useCallback(()=>{typeof h=="function"&&h(),y(!0)},[h]);return l.createElement(ka,{showLabels:!v,sectors:n},l.createElement(Kt,{animationId:p,begin:s,duration:c,isActive:i,easing:u,onAnimationStart:b,onAnimationEnd:d,key:p},S=>{var j=[],E=n&&n[0],O=E==null?void 0:E.startAngle;return n==null||n.forEach((w,D)=>{var _=x&&x[D],k=D>0?Bt(w,"paddingAngle",0):0;if(_){var V=ve(_.endAngle-_.startAngle,w.endAngle-w.startAngle,S),C=P(P({},w),{},{startAngle:O+k,endAngle:O+V+k});j.push(C),O=C.endAngle}else{var{endAngle:K,startAngle:H}=w,U=ve(0,K-H,S),B=P(P({},w),{},{startAngle:O+k,endAngle:O+U+k});j.push(B),O=B.endAngle}}),r.current=j,l.createElement(F,null,l.createElement(Da,{sectors:j,activeShape:f,inactiveShape:g,allOtherPieProps:t,shape:t.shape,id:a}))}),l.createElement(Sa,{showLabels:!v,sectors:n,props:t}),t.children)}var Ia={animationBegin:400,animationDuration:1500,animationEasing:"ease",cx:"50%",cy:"50%",dataKey:"value",endAngle:360,fill:"#808080",hide:!1,innerRadius:0,isAnimationActive:"auto",label:!1,labelLine:!0,legendType:"rect",minAngle:0,nameKey:"name",outerRadius:"80%",paddingAngle:0,rootTabIndex:0,startAngle:0,stroke:"#fff",zIndex:Me.area};function Ma(e){var{id:t}=e,r=te(e,ua),{hide:a,className:n,rootTabIndex:i}=e,s=l.useMemo(()=>Te(e.children,ce),[e.children]),c=R(g=>sa(g,t,s)),u=l.useRef(null),f=J("recharts-pie",n);return a||c==null?(u.current=null,l.createElement(F,{tabIndex:i,className:f})):l.createElement(Le,{zIndex:e.zIndex},l.createElement(ya,{dataKey:e.dataKey,nameKey:e.nameKey,sectors:c,stroke:e.stroke,strokeWidth:e.strokeWidth,fill:e.fill,name:e.name,hide:e.hide,tooltipType:e.tooltipType,id:t}),l.createElement(F,{tabIndex:i,className:f},l.createElement(Ca,{props:P(P({},r),{},{sectors:c}),previousSectorsRef:u,id:t})))}function He(e){var t=W(e,Ia),{id:r}=t,a=te(t,ma),n=Ie(a);return l.createElement(Lt,{id:r,type:"pie"},i=>l.createElement(l.Fragment,null,l.createElement(_t,{type:"pie",id:i,data:a.data,dataKey:a.dataKey,hide:a.hide,angleAxisId:0,radiusAxisId:0,name:a.name,nameKey:a.nameKey,tooltipType:a.tooltipType,legendType:a.legendType,fill:a.fill,cx:a.cx,cy:a.cy,startAngle:a.startAngle,endAngle:a.endAngle,paddingAngle:a.paddingAngle,minAngle:a.minAngle,innerRadius:a.innerRadius,outerRadius:a.outerRadius,cornerRadius:a.cornerRadius,presentationProps:n,maxRadius:t.maxRadius}),l.createElement(ha,M({},a,{id:i})),l.createElement(Ma,M({},a,{id:i}))))}He.displayName="Pie";function Ta(e){var t=se();return l.useEffect(()=>{t(rr(e))},[t,e]),null}var La=["layout"];function le(){return le=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var a in r)({}).hasOwnProperty.call(r,a)&&(e[a]=r[a])}return e},le.apply(null,arguments)}function _a(e,t){if(e==null)return{};var r,a,n=Ra(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],t.indexOf(r)===-1&&{}.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function Ra(e,t){if(e==null)return{};var r={};for(var a in e)if({}.hasOwnProperty.call(e,a)){if(t.indexOf(a)!==-1)continue;r[a]=e[a]}return r}var Fa={top:5,right:5,bottom:5,left:5},Ue={accessibilityLayer:!0,stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:Fa,reverseStackOrder:!1,syncMethod:"index",layout:"radial",responsive:!1,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"},$a=l.forwardRef(function(t,r){var a,n=W(t.categoricalChartProps,Ue),{layout:i}=n,s=_a(n,La),{chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:g}=t,h={chartName:c,defaultTooltipEventType:u,validateTooltipEventTypes:f,tooltipPayloadSearcher:g,eventEmitter:void 0};return l.createElement(ar,{preloadedState:{options:h},reduxStoreName:(a=n.id)!==null&&a!==void 0?a:c},l.createElement(nr,{chartData:n.data}),l.createElement(ir,{layout:i,margin:n.margin}),l.createElement(lr,{baseValue:void 0,accessibilityLayer:n.accessibilityLayer,barCategoryGap:n.barCategoryGap,maxBarSize:n.maxBarSize,stackOffset:n.stackOffset,barGap:n.barGap,barSize:n.barSize,syncId:n.syncId,syncMethod:n.syncMethod,className:n.className,reverseStackOrder:n.reverseStackOrder}),l.createElement(Ta,{cx:n.cx,cy:n.cy,startAngle:n.startAngle,endAngle:n.endAngle,innerRadius:n.innerRadius,outerRadius:n.outerRadius}),l.createElement(or,le({},s,{ref:r})))});function Oe(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter(function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable})),r.push.apply(r,a)}return r}function we(e){for(var t=1;t<arguments.length;t++){var r=arguments[t]!=null?arguments[t]:{};t%2?Oe(Object(r),!0).forEach(function(a){Ka(e,a,r[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):Oe(Object(r)).forEach(function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(r,a))})}return e}function Ka(e,t,r){return(t=Ba(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function Ba(e){var t=za(e,"string");return typeof t=="symbol"?t:t+""}function za(e,t){if(typeof e!="object"||!e)return e;var r=e[Symbol.toPrimitive];if(r!==void 0){var a=r.call(e,t);if(typeof a!="object")return a;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Wa=["item"],Ga=we(we({},Ue),{},{layout:"centric",startAngle:0,endAngle:360}),Va=l.forwardRef((e,t)=>{var r=W(e,Ga);return l.createElement($a,{chartName:"PieChart",defaultTooltipEventType:"item",validateTooltipEventTypes:Wa,tooltipPayloadSearcher:sr,categoricalChartProps:r,ref:t})});const Ee=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#6B7280"],Ha=({cases:e,isDark:t})=>{const r=l.useMemo(()=>{const a=new Date,n=Array.from({length:6},(i,s)=>{const c=Be(a,5-s);return{name:Z(c,"yyyy-MM"),start:Ke(c),end:$e(c),count:0}});return e.forEach(i=>{if(!i.createdAt)return;const s=new Date(i.createdAt),c=n.find(u=>Ar(s,{start:u.start,end:u.end}));c&&c.count++}),n.map(i=>({name:Z(i.start,"MM월"),건수:i.count}))},[e]);return o.jsxs("div",{className:"h-[350px] w-full bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors flex flex-col",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-4",children:"월별 신규 접수 추이"}),o.jsx("div",{className:"flex-1 w-full min-h-0",children:o.jsx(_e,{width:"100%",height:"100%",children:o.jsxs(cr,{data:r,margin:{top:5,right:30,left:10,bottom:5},children:[o.jsx(dr,{strokeDasharray:"3 3",stroke:t?"#374151":"#E5E7EB"}),o.jsx(ur,{dataKey:"name",stroke:t?"#9CA3AF":"#6B7280",tick:{fontSize:12}}),o.jsx(mr,{stroke:t?"#9CA3AF":"#6B7280",tick:{fontSize:12}}),o.jsx(Re,{contentStyle:{backgroundColor:t?"#1F2937":"#FFFFFF",borderColor:t?"#374151":"#E5E7EB",color:t?"#F3F4F6":"#111827"}}),o.jsx(fr,{dataKey:"건수",fill:"#3B82F6",radius:[4,4,0,0]})]})})})]})},Ua=({cases:e,isDark:t})=>{const r=l.useMemo(()=>{const a={};return e.forEach(n=>{const i=n.status||"미분류";a[i]=(a[i]||0)+1}),Object.entries(a).map(([n,i])=>({name:n,value:i})).sort((n,i)=>i.value-n.value)},[e]);return o.jsxs("div",{className:"h-[350px] w-full bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 transition-colors flex flex-col",children:[o.jsx("h3",{className:"text-lg font-bold text-gray-800 dark:text-white mb-2",children:"진행 상태 분포"}),o.jsx("div",{className:"flex-1 w-full min-h-0",children:o.jsx(_e,{width:"100%",height:"100%",children:o.jsxs(Va,{children:[o.jsx(He,{data:r,cx:"50%",cy:"50%",innerRadius:60,outerRadius:80,paddingAngle:5,dataKey:"value",label:({percent:a})=>a>.05?`${(a*100).toFixed(0)}%`:"",labelLine:!1,children:r.map((a,n)=>o.jsx(ce,{fill:Ee[n%Ee.length]},`cell-${n}`))}),o.jsx(Re,{contentStyle:{backgroundColor:t?"#1F2937":"#FFFFFF",borderColor:t?"#374151":"#E5E7EB",color:t?"#F3F4F6":"#111827"}}),o.jsx(ze,{layout:"vertical",verticalAlign:"middle",align:"right",wrapperStyle:{color:t?"#D1D5DB":"#374151",fontSize:"12px"}})]})})})]})},Y=({title:e,count:t,color:r,icon:a,subText:n})=>o.jsxs("div",{className:"bg-white dark:bg-gray-800 p-4 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 flex items-center justify-between transition-colors",children:[o.jsxs("div",{children:[o.jsx("p",{className:"text-sm text-gray-500 dark:text-gray-400 mb-1",children:e}),o.jsx("p",{className:`text-2xl font-bold ${r}`,children:t}),n&&o.jsx("p",{className:"text-xs text-gray-400 mt-1",children:n})]}),o.jsx("div",{className:`p-3 rounded-full bg-gray-50 dark:bg-gray-700 ${r.replace("text","text-opacity-20")}`,children:o.jsx(a,{size:24,className:r})})]});function Qa(){const{theme:e}=Je(),[t,r]=l.useState([]),[a,n]=l.useState([]),[i,s]=l.useState(!0),[c,u]=l.useState(new Date);if(l.useEffect(()=>{Promise.all([Qe(),et()]).then(([d,b])=>{r(d),n(b),s(!1)})},[]),i)return o.jsx("div",{className:"p-10 text-center text-gray-500",children:"로딩중..."});const f=t.flatMap(d=>(d.reminders||[]).map(b=>({reminder:b,caseData:d}))),g=f.filter(d=>fe(d.reminder.datetime)==="today"),h=f.filter(d=>fe(d.reminder.datetime)==="overdue"),m=t.filter(d=>{const b=a.find(S=>S.partnerId===d.partnerId);return at(d,b).length>0});let p=null;a.length>0&&(p=nt(t,a[0]));const x=c?c.toISOString().split("T")[0]:"",v=f.filter(d=>d.reminder.datetime?d.reminder.datetime.startsWith(x):!1).sort((d,b)=>d.reminder.datetime.localeCompare(b.reminder.datetime)),y=d=>{const b=["일","월","화","수","목","금","토"];return`${d.getMonth()+1}월 ${d.getDate()}일 (${b[d.getDay()]}) 일정`};return o.jsxs("div",{className:"space-y-6 max-w-7xl mx-auto",children:[o.jsx("h2",{className:"text-2xl font-bold text-gray-800 dark:text-white",children:"대시보드"}),o.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[o.jsx(Y,{title:"오늘 리마인더",count:g.length,color:"text-blue-600",icon:Pr}),o.jsx(Y,{title:"지연된 리마인더",count:h.length,color:"text-red-600",icon:br}),o.jsx(Y,{title:"조치 필요 (경고)",count:m.length,color:"text-yellow-600",icon:vr}),p&&o.jsx(Y,{title:p.isEligible?"지급 예정 수당":"누적 입금액(미달성)",count:p.isEligible?`${p.expectedCommission.toLocaleString()}만원`:`${p.currentTotalDeposit.toLocaleString()}만원`,color:p.isEligible?"text-green-600":"text-gray-400",icon:gr,subText:p.isEligible?`지급일: ${p.payoutDate}`:`목표: ${p.threshold}만원`})]}),o.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[o.jsx(Ha,{cases:t,isDark:e==="dark"}),o.jsx(Ua,{cases:t,isDark:e==="dark"})]}),o.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-xl shadow-sm border border-gray-100 dark:border-gray-700 overflow-hidden",children:[o.jsxs("div",{className:"p-4 border-b border-gray-100 dark:border-gray-700 bg-indigo-50 dark:bg-indigo-900/20 flex justify-between items-center",children:[o.jsxs("h3",{className:"font-bold text-indigo-900 dark:text-indigo-300 flex items-center gap-2",children:[o.jsx(hr,{size:20}),y(c)]}),o.jsxs("span",{className:"text-xs bg-white text-indigo-600 px-3 py-1 rounded-full font-bold shadow-sm",children:[v.length,"건"]})]}),o.jsx("div",{className:"p-4 min-h-[150px] max-h-[300px] overflow-y-auto",children:v.length===0?o.jsx("div",{className:"flex flex-col items-center justify-center h-24 text-gray-400",children:o.jsx("p",{children:"등록된 일정이 없습니다."})}):o.jsx("div",{className:"grid gap-3",children:v.map((d,b)=>{const S=d.reminder.datetime.split(" ")[1],j=d.reminder.type||"통화";let E="bg-gray-100 text-gray-600";return j==="통화"&&(E="bg-green-100 text-green-700"),j==="출장미팅"&&(E="bg-blue-100 text-blue-700"),j==="방문미팅"&&(E="bg-purple-100 text-purple-700"),j==="기타"&&(E="bg-yellow-100 text-yellow-700"),o.jsx(Se,{to:`/case/${d.caseData.caseId}`,className:"block group bg-gray-50 dark:bg-gray-700/50 hover:bg-white dark:hover:bg-gray-700 border border-transparent hover:border-indigo-200 rounded-lg p-3 transition-all shadow-sm hover:shadow-md",children:o.jsxs("div",{className:"flex items-center justify-between",children:[o.jsxs("div",{className:"flex items-center gap-3",children:[o.jsx("span",{className:"font-mono text-lg font-bold text-gray-700 dark:text-gray-300",children:S}),o.jsxs("div",{children:[o.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[o.jsx("span",{className:`text-[10px] px-2 py-0.5 rounded font-bold ${E}`,children:j}),o.jsx("span",{className:"font-bold text-gray-800 dark:text-white",children:d.caseData.customerName})]}),o.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400",children:d.reminder.content||"내용 없음"})]})]}),o.jsx("div",{className:"text-right",children:o.jsx("span",{className:"text-xs text-gray-400 group-hover:text-indigo-500 font-medium",children:"상세보기 →"})})]})},d.reminder.id)})})})]}),o.jsx("div",{children:o.jsx(Sr,{cases:t,selectedDate:c,onDateSelect:u})})]})}export{Qa as default};
