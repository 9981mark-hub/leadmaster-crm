import{c as K,r as l,j as t,T as at,_ as re,U as zt,V as Fr,e as Bt,g as zr,b as ht,W as Br,Y as Hr,Z as Be,$ as Ht,O as Wr,a0 as Vr,o as Kr,f as Pe,X as lt,S as Qe,R as gt,D as Gr,J as Yr,H as qr,E as Ur,F as Xr,G as Zr,I as Jr,K as Qr,M as en,a1 as tn,a2 as rn,a3 as nn,a4 as sn,v as an,w as ln,x as on,a5 as cn,y as dn}from"./index.LVfBQ48P.js";import{b as un,h as mn,n as fn,j as xn,k as He,l as bt,m as pn,o as hn}from"./utils.DvbHqMrd.js";import{r as gn,R as bn}from"./index.B80icz7v.js";import{A as vn}from"./index.Dspqed0I.js";import{m as yn,C as jn}from"./proxy.BN4kiYuj.js";import{S as Nn,F as ot}from"./search.DZhDwMVv.js";import{C as vt}from"./chevron-right.B1D_sXcV.js";import{M as wn}from"./message-square.Dy0PlPkG.js";import{T as ye,P as et}from"./trash-2.CreIw_Ne.js";import{C as Cn}from"./check.CFZ8YfeI.js";import{C as yt}from"./copy.BeiRGQHR.js";import{C as Sn}from"./calendar.ZBaYPaks.js";import{C as jt}from"./clock.y4mEliat.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const En=[["rect",{width:"20",height:"5",x:"2",y:"3",rx:"1",key:"1wp1u1"}],["path",{d:"M4 8v11a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8",key:"1s80jp"}],["path",{d:"M10 12h4",key:"a56b0p"}]],kn=K("archive",En);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rn=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],An=K("arrow-left",Rn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dn=[["path",{d:"M16 14v2.2l1.6 1",key:"fo4ql5"}],["path",{d:"M16 2v4",key:"4m81vk"}],["path",{d:"M21 7.5V6a2 2 0 0 0-2-2H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h3.5",key:"1osxxc"}],["path",{d:"M3 10h5",key:"r794hk"}],["path",{d:"M8 2v4",key:"1cmpym"}],["circle",{cx:"16",cy:"16",r:"6",key:"qoo3c4"}]],Wt=K("calendar-clock",Dn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const In=[["path",{d:"M9 9.003a1 1 0 0 1 1.517-.859l4.997 2.997a1 1 0 0 1 0 1.718l-4.997 2.997A1 1 0 0 1 9 14.996z",key:"kmsa83"}],["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],Mn=K("circle-play",In);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pn=[["path",{d:"M12 19v3",key:"npa21l"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["rect",{x:"9",y:"2",width:"6",height:"13",rx:"3",key:"s6n7sd"}]],Tn=K("mic",Pn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const On=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M9 21V9",key:"1oto5p"}]],Ln=K("panels-top-left",On);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $n=[["rect",{x:"14",y:"3",width:"5",height:"18",rx:"1",key:"kaeet6"}],["rect",{x:"5",y:"3",width:"5",height:"18",rx:"1",key:"1wsw3u"}]],_n=K("pause",$n);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fn=[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]],Te=K("pen",Fn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zn=[["path",{d:"M5 5a2 2 0 0 1 3.008-1.728l11.997 6.998a2 2 0 0 1 .003 3.458l-12 7A2 2 0 0 1 5 19z",key:"10ikf1"}]],Bn=K("play",zn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hn=[["path",{d:"M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8",key:"1357e3"}],["path",{d:"M3 3v5h5",key:"1xhq8a"}]],Wn=K("rotate-ccw",Hn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vn=[["path",{d:"M21 12a9 9 0 1 1-9-9c2.52 0 4.93 1 6.74 2.74L21 8",key:"1p45f6"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}]],Kn=K("rotate-cw",Vn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Gn=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],Vt=K("send",Gn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Yn=[["path",{d:"M11 4.702a.705.705 0 0 0-1.203-.498L6.413 7.587A1.4 1.4 0 0 1 5.416 8H3a1 1 0 0 0-1 1v6a1 1 0 0 0 1 1h2.416a1.4 1.4 0 0 1 .997.413l3.383 3.384A.705.705 0 0 0 11 19.298z",key:"uqj9uw"}],["path",{d:"M16 9a5 5 0 0 1 0 6",key:"1q6k2b"}],["path",{d:"M19.364 18.364a9 9 0 0 0 0-12.728",key:"ijwkga"}]],qn=K("volume-2",Yn);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Un=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],Xn=K("zap",Un);var Nt=1,Zn=.9,Jn=.8,Qn=.17,We=.1,Ve=.999,es=.9999,ts=.99,rs=/[\\\/_+.#"@\[\(\{&]/,ns=/[\\\/_+.#"@\[\(\{&]/g,ss=/[\s-]/,Kt=/[\s-]/g;function tt(e,r,n,s,a,o,c){if(o===r.length)return a===e.length?Nt:ts;var i=`${a},${o}`;if(c[i]!==void 0)return c[i];for(var m=s.charAt(o),d=n.indexOf(m,a),f=0,x,p,u,N;d>=0;)x=tt(e,r,n,s,d+1,o+1,c),x>f&&(d===a?x*=Nt:rs.test(e.charAt(d-1))?(x*=Jn,u=e.slice(a,d-1).match(ns),u&&a>0&&(x*=Math.pow(Ve,u.length))):ss.test(e.charAt(d-1))?(x*=Zn,N=e.slice(a,d-1).match(Kt),N&&a>0&&(x*=Math.pow(Ve,N.length))):(x*=Qn,a>0&&(x*=Math.pow(Ve,d-a))),e.charAt(d)!==r.charAt(o)&&(x*=es)),(x<We&&n.charAt(d-1)===s.charAt(o+1)||s.charAt(o+1)===s.charAt(o)&&n.charAt(d-1)!==s.charAt(o))&&(p=tt(e,r,n,s,d+1,o+2,c),p*We>x&&(x=p*We)),x>f&&(f=x),d=n.indexOf(m,d+1);return c[i]=f,f}function wt(e){return e.toLowerCase().replace(Kt," ")}function as(e,r,n){return e=n&&n.length>0?`${e+" "+n.join(" ")}`:e,tt(e,r,wt(e),wt(r),0,0,{})}function ne(e,r,{checkForDefaultPrevented:n=!0}={}){return function(a){if(e==null||e(a),n===!1||!a.defaultPrevented)return r==null?void 0:r(a)}}function Ct(e,r){if(typeof e=="function")return e(r);e!=null&&(e.current=r)}function se(...e){return r=>{let n=!1;const s=e.map(a=>{const o=Ct(a,r);return!n&&typeof o=="function"&&(n=!0),o});if(n)return()=>{for(let a=0;a<s.length;a++){const o=s[a];typeof o=="function"?o():Ct(e[a],null)}}}}function ue(...e){return l.useCallback(se(...e),e)}function ls(e,r){const n=l.createContext(r),s=o=>{const{children:c,...i}=o,m=l.useMemo(()=>i,Object.values(i));return t.jsx(n.Provider,{value:m,children:c})};s.displayName=e+"Provider";function a(o){const c=l.useContext(n);if(c)return c;if(r!==void 0)return r;throw new Error(`\`${o}\` must be used within \`${e}\``)}return[s,a]}function os(e,r=[]){let n=[];function s(o,c){const i=l.createContext(c),m=n.length;n=[...n,c];const d=x=>{var v;const{scope:p,children:u,...N}=x,g=((v=p==null?void 0:p[e])==null?void 0:v[m])||i,S=l.useMemo(()=>N,Object.values(N));return t.jsx(g.Provider,{value:S,children:u})};d.displayName=o+"Provider";function f(x,p){var g;const u=((g=p==null?void 0:p[e])==null?void 0:g[m])||i,N=l.useContext(u);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${x}\` must be used within \`${o}\``)}return[d,f]}const a=()=>{const o=n.map(c=>l.createContext(c));return function(i){const m=(i==null?void 0:i[e])||o;return l.useMemo(()=>({[`__scope${e}`]:{...i,[e]:m}}),[i,m])}};return a.scopeName=e,[s,is(a,...r)]}function is(...e){const r=e[0];if(e.length===1)return r;const n=()=>{const s=e.map(a=>({useScope:a(),scopeName:a.scopeName}));return function(o){const c=s.reduce((i,{useScope:m,scopeName:d})=>{const x=m(o)[`__scope${d}`];return{...i,...x}},{});return l.useMemo(()=>({[`__scope${r.scopeName}`]:c}),[c])}};return n.scopeName=r.scopeName,n}var je=globalThis!=null&&globalThis.document?l.useLayoutEffect:()=>{},cs=at[" useId ".trim().toString()]||(()=>{}),ds=0;function Q(e){const[r,n]=l.useState(cs());return je(()=>{n(s=>s??String(ds++))},[e]),r?`radix-${r}`:""}var us=at[" useInsertionEffect ".trim().toString()]||je;function ms({prop:e,defaultProp:r,onChange:n=()=>{},caller:s}){const[a,o,c]=fs({defaultProp:r,onChange:n}),i=e!==void 0,m=i?e:a;{const f=l.useRef(e!==void 0);l.useEffect(()=>{const x=f.current;x!==i&&console.warn(`${s} is changing from ${x?"controlled":"uncontrolled"} to ${i?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),f.current=i},[i,s])}const d=l.useCallback(f=>{var x;if(i){const p=xs(f)?f(e):f;p!==e&&((x=c.current)==null||x.call(c,p))}else o(f)},[i,e,o,c]);return[m,d]}function fs({defaultProp:e,onChange:r}){const[n,s]=l.useState(e),a=l.useRef(n),o=l.useRef(r);return us(()=>{o.current=r},[r]),l.useEffect(()=>{var c;a.current!==n&&((c=o.current)==null||c.call(o,n),a.current=n)},[n,a]),[n,s,o]}function xs(e){return typeof e=="function"}function we(e){const r=ps(e),n=l.forwardRef((s,a)=>{const{children:o,...c}=s,i=l.Children.toArray(o),m=i.find(gs);if(m){const d=m.props.children,f=i.map(x=>x===m?l.Children.count(d)>1?l.Children.only(null):l.isValidElement(d)?d.props.children:null:x);return t.jsx(r,{...c,ref:a,children:l.isValidElement(d)?l.cloneElement(d,void 0,f):null})}return t.jsx(r,{...c,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}function ps(e){const r=l.forwardRef((n,s)=>{const{children:a,...o}=n;if(l.isValidElement(a)){const c=vs(a),i=bs(o,a.props);return a.type!==l.Fragment&&(i.ref=s?se(s,c):c),l.cloneElement(a,i)}return l.Children.count(a)>1?l.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var hs=Symbol("radix.slottable");function gs(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===hs}function bs(e,r){const n={...r};for(const s in r){const a=e[s],o=r[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const m=o(...i);return a(...i),m}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function vs(e){var s,a;let r=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var ys=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Gt=ys.reduce((e,r)=>{const n=we(`Primitive.${r}`),s=l.forwardRef((a,o)=>{const{asChild:c,...i}=a,m=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(m,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{});function js(e,r){e&&gn.flushSync(()=>e.dispatchEvent(r))}function Ne(e){const r=l.useRef(e);return l.useEffect(()=>{r.current=e}),l.useMemo(()=>(...n)=>{var s;return(s=r.current)==null?void 0:s.call(r,...n)},[])}function Ns(e,r=globalThis==null?void 0:globalThis.document){const n=Ne(e);l.useEffect(()=>{const s=a=>{a.key==="Escape"&&n(a)};return r.addEventListener("keydown",s,{capture:!0}),()=>r.removeEventListener("keydown",s,{capture:!0})},[n,r])}var ws="DismissableLayer",rt="dismissableLayer.update",Cs="dismissableLayer.pointerDownOutside",Ss="dismissableLayer.focusOutside",St,Yt=l.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),qt=l.forwardRef((e,r)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:s,onPointerDownOutside:a,onFocusOutside:o,onInteractOutside:c,onDismiss:i,...m}=e,d=l.useContext(Yt),[f,x]=l.useState(null),p=(f==null?void 0:f.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,u]=l.useState({}),N=ue(r,A=>x(A)),g=Array.from(d.layers),[S]=[...d.layersWithOutsidePointerEventsDisabled].slice(-1),v=g.indexOf(S),C=f?g.indexOf(f):-1,j=d.layersWithOutsidePointerEventsDisabled.size>0,w=C>=v,E=Rs(A=>{const L=A.target,F=[...d.branches].some(_=>_.contains(L));!w||F||(a==null||a(A),c==null||c(A),A.defaultPrevented||i==null||i())},p),D=As(A=>{const L=A.target;[...d.branches].some(_=>_.contains(L))||(o==null||o(A),c==null||c(A),A.defaultPrevented||i==null||i())},p);return Ns(A=>{C===d.layers.size-1&&(s==null||s(A),!A.defaultPrevented&&i&&(A.preventDefault(),i()))},p),l.useEffect(()=>{if(f)return n&&(d.layersWithOutsidePointerEventsDisabled.size===0&&(St=p.body.style.pointerEvents,p.body.style.pointerEvents="none"),d.layersWithOutsidePointerEventsDisabled.add(f)),d.layers.add(f),Et(),()=>{n&&d.layersWithOutsidePointerEventsDisabled.size===1&&(p.body.style.pointerEvents=St)}},[f,p,n,d]),l.useEffect(()=>()=>{f&&(d.layers.delete(f),d.layersWithOutsidePointerEventsDisabled.delete(f),Et())},[f,d]),l.useEffect(()=>{const A=()=>u({});return document.addEventListener(rt,A),()=>document.removeEventListener(rt,A)},[]),t.jsx(Gt.div,{...m,ref:N,style:{pointerEvents:j?w?"auto":"none":void 0,...e.style},onFocusCapture:ne(e.onFocusCapture,D.onFocusCapture),onBlurCapture:ne(e.onBlurCapture,D.onBlurCapture),onPointerDownCapture:ne(e.onPointerDownCapture,E.onPointerDownCapture)})});qt.displayName=ws;var Es="DismissableLayerBranch",ks=l.forwardRef((e,r)=>{const n=l.useContext(Yt),s=l.useRef(null),a=ue(r,s);return l.useEffect(()=>{const o=s.current;if(o)return n.branches.add(o),()=>{n.branches.delete(o)}},[n.branches]),t.jsx(Gt.div,{...e,ref:a})});ks.displayName=Es;function Rs(e,r=globalThis==null?void 0:globalThis.document){const n=Ne(e),s=l.useRef(!1),a=l.useRef(()=>{});return l.useEffect(()=>{const o=i=>{if(i.target&&!s.current){let m=function(){Ut(Cs,n,d,{discrete:!0})};const d={originalEvent:i};i.pointerType==="touch"?(r.removeEventListener("click",a.current),a.current=m,r.addEventListener("click",a.current,{once:!0})):m()}else r.removeEventListener("click",a.current);s.current=!1},c=window.setTimeout(()=>{r.addEventListener("pointerdown",o)},0);return()=>{window.clearTimeout(c),r.removeEventListener("pointerdown",o),r.removeEventListener("click",a.current)}},[r,n]),{onPointerDownCapture:()=>s.current=!0}}function As(e,r=globalThis==null?void 0:globalThis.document){const n=Ne(e),s=l.useRef(!1);return l.useEffect(()=>{const a=o=>{o.target&&!s.current&&Ut(Ss,n,{originalEvent:o},{discrete:!1})};return r.addEventListener("focusin",a),()=>r.removeEventListener("focusin",a)},[r,n]),{onFocusCapture:()=>s.current=!0,onBlurCapture:()=>s.current=!1}}function Et(){const e=new CustomEvent(rt);document.dispatchEvent(e)}function Ut(e,r,n,{discrete:s}){const a=n.originalEvent.target,o=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});r&&a.addEventListener(e,r,{once:!0}),s?js(a,o):a.dispatchEvent(o)}var Ds=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Is=Ds.reduce((e,r)=>{const n=we(`Primitive.${r}`),s=l.forwardRef((a,o)=>{const{asChild:c,...i}=a,m=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(m,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),Ke="focusScope.autoFocusOnMount",Ge="focusScope.autoFocusOnUnmount",kt={bubbles:!1,cancelable:!0},Ms="FocusScope",Xt=l.forwardRef((e,r)=>{const{loop:n=!1,trapped:s=!1,onMountAutoFocus:a,onUnmountAutoFocus:o,...c}=e,[i,m]=l.useState(null),d=Ne(a),f=Ne(o),x=l.useRef(null),p=ue(r,g=>m(g)),u=l.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;l.useEffect(()=>{if(s){let g=function(j){if(u.paused||!i)return;const w=j.target;i.contains(w)?x.current=w:te(x.current,{select:!0})},S=function(j){if(u.paused||!i)return;const w=j.relatedTarget;w!==null&&(i.contains(w)||te(x.current,{select:!0}))},v=function(j){if(document.activeElement===document.body)for(const E of j)E.removedNodes.length>0&&te(i)};document.addEventListener("focusin",g),document.addEventListener("focusout",S);const C=new MutationObserver(v);return i&&C.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",g),document.removeEventListener("focusout",S),C.disconnect()}}},[s,i,u.paused]),l.useEffect(()=>{if(i){At.add(u);const g=document.activeElement;if(!i.contains(g)){const v=new CustomEvent(Ke,kt);i.addEventListener(Ke,d),i.dispatchEvent(v),v.defaultPrevented||(Ps(_s(Zt(i)),{select:!0}),document.activeElement===g&&te(i))}return()=>{i.removeEventListener(Ke,d),setTimeout(()=>{const v=new CustomEvent(Ge,kt);i.addEventListener(Ge,f),i.dispatchEvent(v),v.defaultPrevented||te(g??document.body,{select:!0}),i.removeEventListener(Ge,f),At.remove(u)},0)}}},[i,d,f,u]);const N=l.useCallback(g=>{if(!n&&!s||u.paused)return;const S=g.key==="Tab"&&!g.altKey&&!g.ctrlKey&&!g.metaKey,v=document.activeElement;if(S&&v){const C=g.currentTarget,[j,w]=Ts(C);j&&w?!g.shiftKey&&v===w?(g.preventDefault(),n&&te(j,{select:!0})):g.shiftKey&&v===j&&(g.preventDefault(),n&&te(w,{select:!0})):v===C&&g.preventDefault()}},[n,s,u.paused]);return t.jsx(Is.div,{tabIndex:-1,...c,ref:p,onKeyDown:N})});Xt.displayName=Ms;function Ps(e,{select:r=!1}={}){const n=document.activeElement;for(const s of e)if(te(s,{select:r}),document.activeElement!==n)return}function Ts(e){const r=Zt(e),n=Rt(r,e),s=Rt(r.reverse(),e);return[n,s]}function Zt(e){const r=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:s=>{const a=s.tagName==="INPUT"&&s.type==="hidden";return s.disabled||s.hidden||a?NodeFilter.FILTER_SKIP:s.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)r.push(n.currentNode);return r}function Rt(e,r){for(const n of e)if(!Os(n,{upTo:r}))return n}function Os(e,{upTo:r}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(r!==void 0&&e===r)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function Ls(e){return e instanceof HTMLInputElement&&"select"in e}function te(e,{select:r=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&Ls(e)&&r&&e.select()}}var At=$s();function $s(){let e=[];return{add(r){const n=e[0];r!==n&&(n==null||n.pause()),e=Dt(e,r),e.unshift(r)},remove(r){var n;e=Dt(e,r),(n=e[0])==null||n.resume()}}}function Dt(e,r){const n=[...e],s=n.indexOf(r);return s!==-1&&n.splice(s,1),n}function _s(e){return e.filter(r=>r.tagName!=="A")}var Fs=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],zs=Fs.reduce((e,r)=>{const n=we(`Primitive.${r}`),s=l.forwardRef((a,o)=>{const{asChild:c,...i}=a,m=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(m,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),Bs="Portal",Jt=l.forwardRef((e,r)=>{var i;const{container:n,...s}=e,[a,o]=l.useState(!1);je(()=>o(!0),[]);const c=n||a&&((i=globalThis==null?void 0:globalThis.document)==null?void 0:i.body);return c?bn.createPortal(t.jsx(zs.div,{...s,ref:r}),c):null});Jt.displayName=Bs;function Hs(e,r){return l.useReducer((n,s)=>r[n][s]??n,e)}var $e=e=>{const{present:r,children:n}=e,s=Ws(r),a=typeof n=="function"?n({present:s.isPresent}):l.Children.only(n),o=ue(s.ref,Vs(a));return typeof n=="function"||s.isPresent?l.cloneElement(a,{ref:o}):null};$e.displayName="Presence";function Ws(e){const[r,n]=l.useState(),s=l.useRef(null),a=l.useRef(e),o=l.useRef("none"),c=e?"mounted":"unmounted",[i,m]=Hs(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return l.useEffect(()=>{const d=Ee(s.current);o.current=i==="mounted"?d:"none"},[i]),je(()=>{const d=s.current,f=a.current;if(f!==e){const p=o.current,u=Ee(d);e?m("MOUNT"):u==="none"||(d==null?void 0:d.display)==="none"?m("UNMOUNT"):m(f&&p!==u?"ANIMATION_OUT":"UNMOUNT"),a.current=e}},[e,m]),je(()=>{if(r){let d;const f=r.ownerDocument.defaultView??window,x=u=>{const g=Ee(s.current).includes(CSS.escape(u.animationName));if(u.target===r&&g&&(m("ANIMATION_END"),!a.current)){const S=r.style.animationFillMode;r.style.animationFillMode="forwards",d=f.setTimeout(()=>{r.style.animationFillMode==="forwards"&&(r.style.animationFillMode=S)})}},p=u=>{u.target===r&&(o.current=Ee(s.current))};return r.addEventListener("animationstart",p),r.addEventListener("animationcancel",x),r.addEventListener("animationend",x),()=>{f.clearTimeout(d),r.removeEventListener("animationstart",p),r.removeEventListener("animationcancel",x),r.removeEventListener("animationend",x)}}else m("ANIMATION_END")},[r,m]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:l.useCallback(d=>{s.current=d?getComputedStyle(d):null,n(d)},[])}}function Ee(e){return(e==null?void 0:e.animationName)||"none"}function Vs(e){var s,a;let r=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var Ks=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Ce=Ks.reduce((e,r)=>{const n=we(`Primitive.${r}`),s=l.forwardRef((a,o)=>{const{asChild:c,...i}=a,m=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(m,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),Ye=0;function Gs(){l.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??It()),document.body.insertAdjacentElement("beforeend",e[1]??It()),Ye++,()=>{Ye===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(r=>r.remove()),Ye--}},[])}function It(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var Ie="right-scroll-bar-position",Me="width-before-scroll-bar",Ys="with-scroll-bars-hidden",qs="--removed-body-scroll-bar-size";function qe(e,r){return typeof e=="function"?e(r):e&&(e.current=r),e}function Us(e,r){var n=l.useState(function(){return{value:e,callback:r,facade:{get current(){return n.value},set current(s){var a=n.value;a!==s&&(n.value=s,n.callback(s,a))}}}})[0];return n.callback=r,n.facade}var Xs=typeof window<"u"?l.useLayoutEffect:l.useEffect,Mt=new WeakMap;function Zs(e,r){var n=Us(null,function(s){return e.forEach(function(a){return qe(a,s)})});return Xs(function(){var s=Mt.get(n);if(s){var a=new Set(s),o=new Set(e),c=n.current;a.forEach(function(i){o.has(i)||qe(i,null)}),o.forEach(function(i){a.has(i)||qe(i,c)})}Mt.set(n,e)},[e]),n}function Js(e){return e}function Qs(e,r){r===void 0&&(r=Js);var n=[],s=!1,a={read:function(){if(s)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(o){var c=r(o,s);return n.push(c),function(){n=n.filter(function(i){return i!==c})}},assignSyncMedium:function(o){for(s=!0;n.length;){var c=n;n=[],c.forEach(o)}n={push:function(i){return o(i)},filter:function(){return n}}},assignMedium:function(o){s=!0;var c=[];if(n.length){var i=n;n=[],i.forEach(o),c=n}var m=function(){var f=c;c=[],f.forEach(o)},d=function(){return Promise.resolve().then(m)};d(),n={push:function(f){c.push(f),d()},filter:function(f){return c=c.filter(f),n}}}};return a}function ea(e){e===void 0&&(e={});var r=Qs(null);return r.options=re({async:!0,ssr:!1},e),r}var Qt=function(e){var r=e.sideCar,n=zt(e,["sideCar"]);if(!r)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var s=r.read();if(!s)throw new Error("Sidecar medium not found");return l.createElement(s,re({},n))};Qt.isSideCarExport=!0;function ta(e,r){return e.useMedium(r),Qt}var er=ea(),Ue=function(){},_e=l.forwardRef(function(e,r){var n=l.useRef(null),s=l.useState({onScrollCapture:Ue,onWheelCapture:Ue,onTouchMoveCapture:Ue}),a=s[0],o=s[1],c=e.forwardProps,i=e.children,m=e.className,d=e.removeScrollBar,f=e.enabled,x=e.shards,p=e.sideCar,u=e.noRelative,N=e.noIsolation,g=e.inert,S=e.allowPinchZoom,v=e.as,C=v===void 0?"div":v,j=e.gapMode,w=zt(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),E=p,D=Zs([n,r]),A=re(re({},w),a);return l.createElement(l.Fragment,null,f&&l.createElement(E,{sideCar:er,removeScrollBar:d,shards:x,noRelative:u,noIsolation:N,inert:g,setCallbacks:o,allowPinchZoom:!!S,lockRef:n,gapMode:j}),c?l.cloneElement(l.Children.only(i),re(re({},A),{ref:D})):l.createElement(C,re({},A,{className:m,ref:D}),i))});_e.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};_e.classNames={fullWidth:Me,zeroRight:Ie};var ra=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function na(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var r=ra();return r&&e.setAttribute("nonce",r),e}function sa(e,r){e.styleSheet?e.styleSheet.cssText=r:e.appendChild(document.createTextNode(r))}function aa(e){var r=document.head||document.getElementsByTagName("head")[0];r.appendChild(e)}var la=function(){var e=0,r=null;return{add:function(n){e==0&&(r=na())&&(sa(r,n),aa(r)),e++},remove:function(){e--,!e&&r&&(r.parentNode&&r.parentNode.removeChild(r),r=null)}}},oa=function(){var e=la();return function(r,n){l.useEffect(function(){return e.add(r),function(){e.remove()}},[r&&n])}},tr=function(){var e=oa(),r=function(n){var s=n.styles,a=n.dynamic;return e(s,a),null};return r},ia={left:0,top:0,right:0,gap:0},Xe=function(e){return parseInt(e||"",10)||0},ca=function(e){var r=window.getComputedStyle(document.body),n=r[e==="padding"?"paddingLeft":"marginLeft"],s=r[e==="padding"?"paddingTop":"marginTop"],a=r[e==="padding"?"paddingRight":"marginRight"];return[Xe(n),Xe(s),Xe(a)]},da=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return ia;var r=ca(e),n=document.documentElement.clientWidth,s=window.innerWidth;return{left:r[0],top:r[1],right:r[2],gap:Math.max(0,s-n+r[2]-r[0])}},ua=tr(),be="data-scroll-locked",ma=function(e,r,n,s){var a=e.left,o=e.top,c=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Ys,` {
   overflow: hidden `).concat(s,`;
   padding-right: `).concat(i,"px ").concat(s,`;
  }
  body[`).concat(be,`] {
    overflow: hidden `).concat(s,`;
    overscroll-behavior: contain;
    `).concat([r&&"position: relative ".concat(s,";"),n==="margin"&&`
    padding-left: `.concat(a,`px;
    padding-top: `).concat(o,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(s,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(s,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(Ie,` {
    right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(Me,` {
    margin-right: `).concat(i,"px ").concat(s,`;
  }
  
  .`).concat(Ie," .").concat(Ie,` {
    right: 0 `).concat(s,`;
  }
  
  .`).concat(Me," .").concat(Me,` {
    margin-right: 0 `).concat(s,`;
  }
  
  body[`).concat(be,`] {
    `).concat(qs,": ").concat(i,`px;
  }
`)},Pt=function(){var e=parseInt(document.body.getAttribute(be)||"0",10);return isFinite(e)?e:0},fa=function(){l.useEffect(function(){return document.body.setAttribute(be,(Pt()+1).toString()),function(){var e=Pt()-1;e<=0?document.body.removeAttribute(be):document.body.setAttribute(be,e.toString())}},[])},xa=function(e){var r=e.noRelative,n=e.noImportant,s=e.gapMode,a=s===void 0?"margin":s;fa();var o=l.useMemo(function(){return da(a)},[a]);return l.createElement(ua,{styles:ma(o,!r,a,n?"":"!important")})},nt=!1;if(typeof window<"u")try{var ke=Object.defineProperty({},"passive",{get:function(){return nt=!0,!0}});window.addEventListener("test",ke,ke),window.removeEventListener("test",ke,ke)}catch{nt=!1}var fe=nt?{passive:!1}:!1,pa=function(e){return e.tagName==="TEXTAREA"},rr=function(e,r){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[r]!=="hidden"&&!(n.overflowY===n.overflowX&&!pa(e)&&n[r]==="visible")},ha=function(e){return rr(e,"overflowY")},ga=function(e){return rr(e,"overflowX")},Tt=function(e,r){var n=r.ownerDocument,s=r;do{typeof ShadowRoot<"u"&&s instanceof ShadowRoot&&(s=s.host);var a=nr(e,s);if(a){var o=sr(e,s),c=o[1],i=o[2];if(c>i)return!0}s=s.parentNode}while(s&&s!==n.body);return!1},ba=function(e){var r=e.scrollTop,n=e.scrollHeight,s=e.clientHeight;return[r,n,s]},va=function(e){var r=e.scrollLeft,n=e.scrollWidth,s=e.clientWidth;return[r,n,s]},nr=function(e,r){return e==="v"?ha(r):ga(r)},sr=function(e,r){return e==="v"?ba(r):va(r)},ya=function(e,r){return e==="h"&&r==="rtl"?-1:1},ja=function(e,r,n,s,a){var o=ya(e,window.getComputedStyle(r).direction),c=o*s,i=n.target,m=r.contains(i),d=!1,f=c>0,x=0,p=0;do{if(!i)break;var u=sr(e,i),N=u[0],g=u[1],S=u[2],v=g-S-o*N;(N||v)&&nr(e,i)&&(x+=v,p+=N);var C=i.parentNode;i=C&&C.nodeType===Node.DOCUMENT_FRAGMENT_NODE?C.host:C}while(!m&&i!==document.body||m&&(r.contains(i)||r===i));return(f&&Math.abs(x)<1||!f&&Math.abs(p)<1)&&(d=!0),d},Re=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},Ot=function(e){return[e.deltaX,e.deltaY]},Lt=function(e){return e&&"current"in e?e.current:e},Na=function(e,r){return e[0]===r[0]&&e[1]===r[1]},wa=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},Ca=0,xe=[];function Sa(e){var r=l.useRef([]),n=l.useRef([0,0]),s=l.useRef(),a=l.useState(Ca++)[0],o=l.useState(tr)[0],c=l.useRef(e);l.useEffect(function(){c.current=e},[e]),l.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(a));var g=Fr([e.lockRef.current],(e.shards||[]).map(Lt),!0).filter(Boolean);return g.forEach(function(S){return S.classList.add("allow-interactivity-".concat(a))}),function(){document.body.classList.remove("block-interactivity-".concat(a)),g.forEach(function(S){return S.classList.remove("allow-interactivity-".concat(a))})}}},[e.inert,e.lockRef.current,e.shards]);var i=l.useCallback(function(g,S){if("touches"in g&&g.touches.length===2||g.type==="wheel"&&g.ctrlKey)return!c.current.allowPinchZoom;var v=Re(g),C=n.current,j="deltaX"in g?g.deltaX:C[0]-v[0],w="deltaY"in g?g.deltaY:C[1]-v[1],E,D=g.target,A=Math.abs(j)>Math.abs(w)?"h":"v";if("touches"in g&&A==="h"&&D.type==="range")return!1;var L=window.getSelection(),F=L&&L.anchorNode,_=F?F===D||F.contains(D):!1;if(_)return!1;var M=Tt(A,D);if(!M)return!0;if(M?E=A:(E=A==="v"?"h":"v",M=Tt(A,D)),!M)return!1;if(!s.current&&"changedTouches"in g&&(j||w)&&(s.current=E),!E)return!0;var W=s.current||E;return ja(W,S,g,W==="h"?j:w)},[]),m=l.useCallback(function(g){var S=g;if(!(!xe.length||xe[xe.length-1]!==o)){var v="deltaY"in S?Ot(S):Re(S),C=r.current.filter(function(E){return E.name===S.type&&(E.target===S.target||S.target===E.shadowParent)&&Na(E.delta,v)})[0];if(C&&C.should){S.cancelable&&S.preventDefault();return}if(!C){var j=(c.current.shards||[]).map(Lt).filter(Boolean).filter(function(E){return E.contains(S.target)}),w=j.length>0?i(S,j[0]):!c.current.noIsolation;w&&S.cancelable&&S.preventDefault()}}},[]),d=l.useCallback(function(g,S,v,C){var j={name:g,delta:S,target:v,should:C,shadowParent:Ea(v)};r.current.push(j),setTimeout(function(){r.current=r.current.filter(function(w){return w!==j})},1)},[]),f=l.useCallback(function(g){n.current=Re(g),s.current=void 0},[]),x=l.useCallback(function(g){d(g.type,Ot(g),g.target,i(g,e.lockRef.current))},[]),p=l.useCallback(function(g){d(g.type,Re(g),g.target,i(g,e.lockRef.current))},[]);l.useEffect(function(){return xe.push(o),e.setCallbacks({onScrollCapture:x,onWheelCapture:x,onTouchMoveCapture:p}),document.addEventListener("wheel",m,fe),document.addEventListener("touchmove",m,fe),document.addEventListener("touchstart",f,fe),function(){xe=xe.filter(function(g){return g!==o}),document.removeEventListener("wheel",m,fe),document.removeEventListener("touchmove",m,fe),document.removeEventListener("touchstart",f,fe)}},[]);var u=e.removeScrollBar,N=e.inert;return l.createElement(l.Fragment,null,N?l.createElement(o,{styles:wa(a)}):null,u?l.createElement(xa,{noRelative:e.noRelative,gapMode:e.gapMode}):null)}function Ea(e){for(var r=null;e!==null;)e instanceof ShadowRoot&&(r=e.host,e=e.host),e=e.parentNode;return r}const ka=ta(er,Sa);var ar=l.forwardRef(function(e,r){return l.createElement(_e,re({},e,{ref:r,sideCar:ka}))});ar.classNames=_e.classNames;var Ra=function(e){if(typeof document>"u")return null;var r=Array.isArray(e)?e[0]:e;return r.ownerDocument.body},pe=new WeakMap,Ae=new WeakMap,De={},Ze=0,lr=function(e){return e&&(e.host||lr(e.parentNode))},Aa=function(e,r){return r.map(function(n){if(e.contains(n))return n;var s=lr(n);return s&&e.contains(s)?s:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},Da=function(e,r,n,s){var a=Aa(r,Array.isArray(e)?e:[e]);De[n]||(De[n]=new WeakMap);var o=De[n],c=[],i=new Set,m=new Set(a),d=function(x){!x||i.has(x)||(i.add(x),d(x.parentNode))};a.forEach(d);var f=function(x){!x||m.has(x)||Array.prototype.forEach.call(x.children,function(p){if(i.has(p))f(p);else try{var u=p.getAttribute(s),N=u!==null&&u!=="false",g=(pe.get(p)||0)+1,S=(o.get(p)||0)+1;pe.set(p,g),o.set(p,S),c.push(p),g===1&&N&&Ae.set(p,!0),S===1&&p.setAttribute(n,"true"),N||p.setAttribute(s,"true")}catch(v){console.error("aria-hidden: cannot operate on ",p,v)}})};return f(r),i.clear(),Ze++,function(){c.forEach(function(x){var p=pe.get(x)-1,u=o.get(x)-1;pe.set(x,p),o.set(x,u),p||(Ae.has(x)||x.removeAttribute(s),Ae.delete(x)),u||x.removeAttribute(n)}),Ze--,Ze||(pe=new WeakMap,pe=new WeakMap,Ae=new WeakMap,De={})}},Ia=function(e,r,n){n===void 0&&(n="data-aria-hidden");var s=Array.from(Array.isArray(e)?e:[e]),a=Ra(e);return a?(s.push.apply(s,Array.from(a.querySelectorAll("[aria-live], script"))),Da(s,a,n,"aria-hidden")):function(){return null}},Fe="Dialog",[or]=os(Fe),[Ma,U]=or(Fe),ir=e=>{const{__scopeDialog:r,children:n,open:s,defaultOpen:a,onOpenChange:o,modal:c=!0}=e,i=l.useRef(null),m=l.useRef(null),[d,f]=ms({prop:s,defaultProp:a??!1,onChange:o,caller:Fe});return t.jsx(Ma,{scope:r,triggerRef:i,contentRef:m,contentId:Q(),titleId:Q(),descriptionId:Q(),open:d,onOpenChange:f,onOpenToggle:l.useCallback(()=>f(x=>!x),[f]),modal:c,children:n})};ir.displayName=Fe;var cr="DialogTrigger",Pa=l.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=U(cr,n),o=ue(r,a.triggerRef);return t.jsx(Ce.button,{type:"button","aria-haspopup":"dialog","aria-expanded":a.open,"aria-controls":a.contentId,"data-state":dt(a.open),...s,ref:o,onClick:ne(e.onClick,a.onOpenToggle)})});Pa.displayName=cr;var it="DialogPortal",[Ta,dr]=or(it,{forceMount:void 0}),ur=e=>{const{__scopeDialog:r,forceMount:n,children:s,container:a}=e,o=U(it,r);return t.jsx(Ta,{scope:r,forceMount:n,children:l.Children.map(s,c=>t.jsx($e,{present:n||o.open,children:t.jsx(Jt,{asChild:!0,container:a,children:c})}))})};ur.displayName=it;var Oe="DialogOverlay",mr=l.forwardRef((e,r)=>{const n=dr(Oe,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=U(Oe,e.__scopeDialog);return o.modal?t.jsx($e,{present:s||o.open,children:t.jsx(La,{...a,ref:r})}):null});mr.displayName=Oe;var Oa=we("DialogOverlay.RemoveScroll"),La=l.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=U(Oe,n);return t.jsx(ar,{as:Oa,allowPinchZoom:!0,shards:[a.contentRef],children:t.jsx(Ce.div,{"data-state":dt(a.open),...s,ref:r,style:{pointerEvents:"auto",...s.style}})})}),ce="DialogContent",fr=l.forwardRef((e,r)=>{const n=dr(ce,e.__scopeDialog),{forceMount:s=n.forceMount,...a}=e,o=U(ce,e.__scopeDialog);return t.jsx($e,{present:s||o.open,children:o.modal?t.jsx($a,{...a,ref:r}):t.jsx(_a,{...a,ref:r})})});fr.displayName=ce;var $a=l.forwardRef((e,r)=>{const n=U(ce,e.__scopeDialog),s=l.useRef(null),a=ue(r,n.contentRef,s);return l.useEffect(()=>{const o=s.current;if(o)return Ia(o)},[]),t.jsx(xr,{...e,ref:a,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:ne(e.onCloseAutoFocus,o=>{var c;o.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:ne(e.onPointerDownOutside,o=>{const c=o.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&o.preventDefault()}),onFocusOutside:ne(e.onFocusOutside,o=>o.preventDefault())})}),_a=l.forwardRef((e,r)=>{const n=U(ce,e.__scopeDialog),s=l.useRef(!1),a=l.useRef(!1);return t.jsx(xr,{...e,ref:r,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:o=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,o),o.defaultPrevented||(s.current||(i=n.triggerRef.current)==null||i.focus(),o.preventDefault()),s.current=!1,a.current=!1},onInteractOutside:o=>{var m,d;(m=e.onInteractOutside)==null||m.call(e,o),o.defaultPrevented||(s.current=!0,o.detail.originalEvent.type==="pointerdown"&&(a.current=!0));const c=o.target;((d=n.triggerRef.current)==null?void 0:d.contains(c))&&o.preventDefault(),o.detail.originalEvent.type==="focusin"&&a.current&&o.preventDefault()}})}),xr=l.forwardRef((e,r)=>{const{__scopeDialog:n,trapFocus:s,onOpenAutoFocus:a,onCloseAutoFocus:o,...c}=e,i=U(ce,n),m=l.useRef(null),d=ue(r,m);return Gs(),t.jsxs(t.Fragment,{children:[t.jsx(Xt,{asChild:!0,loop:!0,trapped:s,onMountAutoFocus:a,onUnmountAutoFocus:o,children:t.jsx(qt,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":dt(i.open),...c,ref:d,onDismiss:()=>i.onOpenChange(!1)})}),t.jsxs(t.Fragment,{children:[t.jsx(Ha,{titleId:i.titleId}),t.jsx(Va,{contentRef:m,descriptionId:i.descriptionId})]})]})}),ct="DialogTitle",Fa=l.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=U(ct,n);return t.jsx(Ce.h2,{id:a.titleId,...s,ref:r})});Fa.displayName=ct;var pr="DialogDescription",za=l.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=U(pr,n);return t.jsx(Ce.p,{id:a.descriptionId,...s,ref:r})});za.displayName=pr;var hr="DialogClose",Ba=l.forwardRef((e,r)=>{const{__scopeDialog:n,...s}=e,a=U(hr,n);return t.jsx(Ce.button,{type:"button",...s,ref:r,onClick:ne(e.onClick,()=>a.onOpenChange(!1))})});Ba.displayName=hr;function dt(e){return e?"open":"closed"}var gr="DialogTitleWarning",[Gl,br]=ls(gr,{contentName:ce,titleName:ct,docsSlug:"dialog"}),Ha=({titleId:e})=>{const r=br(gr),n=`\`${r.contentName}\` requires a \`${r.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${r.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${r.docsSlug}`;return l.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},Wa="DialogDescriptionWarning",Va=({contentRef:e,descriptionId:r})=>{const s=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${br(Wa).contentName}}.`;return l.useEffect(()=>{var o;const a=(o=e.current)==null?void 0:o.getAttribute("aria-describedby");r&&a&&(document.getElementById(r)||console.warn(s))},[s,e,r]),null},Ka=ir,Ga=ur,Ya=mr,qa=fr,Ua=Symbol.for("react.lazy"),Le=at[" use ".trim().toString()];function Xa(e){return typeof e=="object"&&e!==null&&"then"in e}function vr(e){return e!=null&&typeof e=="object"&&"$$typeof"in e&&e.$$typeof===Ua&&"_payload"in e&&Xa(e._payload)}function Za(e){const r=Ja(e),n=l.forwardRef((s,a)=>{let{children:o,...c}=s;vr(o)&&typeof Le=="function"&&(o=Le(o._payload));const i=l.Children.toArray(o),m=i.find(el);if(m){const d=m.props.children,f=i.map(x=>x===m?l.Children.count(d)>1?l.Children.only(null):l.isValidElement(d)?d.props.children:null:x);return t.jsx(r,{...c,ref:a,children:l.isValidElement(d)?l.cloneElement(d,void 0,f):null})}return t.jsx(r,{...c,ref:a,children:o})});return n.displayName=`${e}.Slot`,n}function Ja(e){const r=l.forwardRef((n,s)=>{let{children:a,...o}=n;if(vr(a)&&typeof Le=="function"&&(a=Le(a._payload)),l.isValidElement(a)){const c=rl(a),i=tl(o,a.props);return a.type!==l.Fragment&&(i.ref=s?se(s,c):c),l.cloneElement(a,i)}return l.Children.count(a)>1?l.Children.only(null):null});return r.displayName=`${e}.SlotClone`,r}var Qa=Symbol("radix.slottable");function el(e){return l.isValidElement(e)&&typeof e.type=="function"&&"__radixId"in e.type&&e.type.__radixId===Qa}function tl(e,r){const n={...r};for(const s in r){const a=e[s],o=r[s];/^on[A-Z]/.test(s)?a&&o?n[s]=(...i)=>{const m=o(...i);return a(...i),m}:a&&(n[s]=a):s==="style"?n[s]={...a,...o}:s==="className"&&(n[s]=[a,o].filter(Boolean).join(" "))}return{...e,...n}}function rl(e){var s,a;let r=(s=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:s.get,n=r&&"isReactWarning"in r&&r.isReactWarning;return n?e.ref:(r=(a=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:a.get,n=r&&"isReactWarning"in r&&r.isReactWarning,n?e.props.ref:e.props.ref||e.ref)}var nl=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],le=nl.reduce((e,r)=>{const n=Za(`Primitive.${r}`),s=l.forwardRef((a,o)=>{const{asChild:c,...i}=a,m=c?n:r;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),t.jsx(m,{...i,ref:o})});return s.displayName=`Primitive.${r}`,{...e,[r]:s}},{}),ve='[cmdk-group=""]',Je='[cmdk-group-items=""]',sl='[cmdk-group-heading=""]',yr='[cmdk-item=""]',$t=`${yr}:not([aria-disabled="true"])`,st="cmdk-item-select",he="data-value",al=(e,r,n)=>as(e,r,n),jr=l.createContext(void 0),Se=()=>l.useContext(jr),Nr=l.createContext(void 0),ut=()=>l.useContext(Nr),wr=l.createContext(void 0),Cr=l.forwardRef((e,r)=>{let n=ge(()=>{var b,R;return{search:"",value:(R=(b=e.value)!=null?b:e.defaultValue)!=null?R:"",selectedItemId:void 0,filtered:{count:0,items:new Map,groups:new Set}}}),s=ge(()=>new Set),a=ge(()=>new Map),o=ge(()=>new Map),c=ge(()=>new Set),i=Sr(e),{label:m,children:d,value:f,onValueChange:x,filter:p,shouldFilter:u,loop:N,disablePointerSelection:g=!1,vimBindings:S=!0,...v}=e,C=Q(),j=Q(),w=Q(),E=l.useRef(null),D=hl();de(()=>{if(f!==void 0){let b=f.trim();n.current.value=b,A.emit()}},[f]),de(()=>{D(6,oe)},[]);let A=l.useMemo(()=>({subscribe:b=>(c.current.add(b),()=>c.current.delete(b)),snapshot:()=>n.current,setState:(b,R,h)=>{var y,I,P,V;if(!Object.is(n.current[b],R)){if(n.current[b]=R,b==="search")W(),_(),D(1,M);else if(b==="value"){if(document.activeElement.hasAttribute("cmdk-input")||document.activeElement.hasAttribute("cmdk-root")){let O=document.getElementById(w);O?O.focus():(y=document.getElementById(C))==null||y.focus()}if(D(7,()=>{var O;n.current.selectedItemId=(O=Y())==null?void 0:O.id,A.emit()}),h||D(5,oe),((I=i.current)==null?void 0:I.value)!==void 0){let O=R??"";(V=(P=i.current).onValueChange)==null||V.call(P,O);return}}A.emit()}},emit:()=>{c.current.forEach(b=>b())}}),[]),L=l.useMemo(()=>({value:(b,R,h)=>{var y;R!==((y=o.current.get(b))==null?void 0:y.value)&&(o.current.set(b,{value:R,keywords:h}),n.current.filtered.items.set(b,F(R,h)),D(2,()=>{_(),A.emit()}))},item:(b,R)=>(s.current.add(b),R&&(a.current.has(R)?a.current.get(R).add(b):a.current.set(R,new Set([b]))),D(3,()=>{W(),_(),n.current.value||M(),A.emit()}),()=>{o.current.delete(b),s.current.delete(b),n.current.filtered.items.delete(b);let h=Y();D(4,()=>{W(),(h==null?void 0:h.getAttribute("id"))===b&&M(),A.emit()})}),group:b=>(a.current.has(b)||a.current.set(b,new Set),()=>{o.current.delete(b),a.current.delete(b)}),filter:()=>i.current.shouldFilter,label:m||e["aria-label"],getDisablePointerSelection:()=>i.current.disablePointerSelection,listId:C,inputId:w,labelId:j,listInnerRef:E}),[]);function F(b,R){var h,y;let I=(y=(h=i.current)==null?void 0:h.filter)!=null?y:al;return b?I(b,n.current.search,R):0}function _(){if(!n.current.search||i.current.shouldFilter===!1)return;let b=n.current.filtered.items,R=[];n.current.filtered.groups.forEach(y=>{let I=a.current.get(y),P=0;I.forEach(V=>{let O=b.get(V);P=Math.max(O,P)}),R.push([y,P])});let h=E.current;z().sort((y,I)=>{var P,V;let O=y.getAttribute("id"),B=I.getAttribute("id");return((P=b.get(B))!=null?P:0)-((V=b.get(O))!=null?V:0)}).forEach(y=>{let I=y.closest(Je);I?I.appendChild(y.parentElement===I?y:y.closest(`${Je} > *`)):h.appendChild(y.parentElement===h?y:y.closest(`${Je} > *`))}),R.sort((y,I)=>I[1]-y[1]).forEach(y=>{var I;let P=(I=E.current)==null?void 0:I.querySelector(`${ve}[${he}="${encodeURIComponent(y[0])}"]`);P==null||P.parentElement.appendChild(P)})}function M(){let b=z().find(h=>h.getAttribute("aria-disabled")!=="true"),R=b==null?void 0:b.getAttribute(he);A.setState("value",R||void 0)}function W(){var b,R,h,y;if(!n.current.search||i.current.shouldFilter===!1){n.current.filtered.count=s.current.size;return}n.current.filtered.groups=new Set;let I=0;for(let P of s.current){let V=(R=(b=o.current.get(P))==null?void 0:b.value)!=null?R:"",O=(y=(h=o.current.get(P))==null?void 0:h.keywords)!=null?y:[],B=F(V,O);n.current.filtered.items.set(P,B),B>0&&I++}for(let[P,V]of a.current)for(let O of V)if(n.current.filtered.items.get(O)>0){n.current.filtered.groups.add(P);break}n.current.filtered.count=I}function oe(){var b,R,h;let y=Y();y&&(((b=y.parentElement)==null?void 0:b.firstChild)===y&&((h=(R=y.closest(ve))==null?void 0:R.querySelector(sl))==null||h.scrollIntoView({block:"nearest"})),y.scrollIntoView({block:"nearest"}))}function Y(){var b;return(b=E.current)==null?void 0:b.querySelector(`${yr}[aria-selected="true"]`)}function z(){var b;return Array.from(((b=E.current)==null?void 0:b.querySelectorAll($t))||[])}function q(b){let R=z()[b];R&&A.setState("value",R.getAttribute(he))}function ee(b){var R;let h=Y(),y=z(),I=y.findIndex(V=>V===h),P=y[I+b];(R=i.current)!=null&&R.loop&&(P=I+b<0?y[y.length-1]:I+b===y.length?y[0]:y[I+b]),P&&A.setState("value",P.getAttribute(he))}function J(b){let R=Y(),h=R==null?void 0:R.closest(ve),y;for(;h&&!y;)h=b>0?xl(h,ve):pl(h,ve),y=h==null?void 0:h.querySelector($t);y?A.setState("value",y.getAttribute(he)):ee(b)}let me=()=>q(z().length-1),ie=b=>{b.preventDefault(),b.metaKey?me():b.altKey?J(1):ee(1)},X=b=>{b.preventDefault(),b.metaKey?q(0):b.altKey?J(-1):ee(-1)};return l.createElement(le.div,{ref:r,tabIndex:-1,...v,"cmdk-root":"",onKeyDown:b=>{var R;(R=v.onKeyDown)==null||R.call(v,b);let h=b.nativeEvent.isComposing||b.keyCode===229;if(!(b.defaultPrevented||h))switch(b.key){case"n":case"j":{S&&b.ctrlKey&&ie(b);break}case"ArrowDown":{ie(b);break}case"p":case"k":{S&&b.ctrlKey&&X(b);break}case"ArrowUp":{X(b);break}case"Home":{b.preventDefault(),q(0);break}case"End":{b.preventDefault(),me();break}case"Enter":{b.preventDefault();let y=Y();if(y){let I=new Event(st);y.dispatchEvent(I)}}}}},l.createElement("label",{"cmdk-label":"",htmlFor:L.inputId,id:L.labelId,style:bl},m),ze(e,b=>l.createElement(Nr.Provider,{value:A},l.createElement(jr.Provider,{value:L},b))))}),ll=l.forwardRef((e,r)=>{var n,s;let a=Q(),o=l.useRef(null),c=l.useContext(wr),i=Se(),m=Sr(e),d=(s=(n=m.current)==null?void 0:n.forceMount)!=null?s:c==null?void 0:c.forceMount;de(()=>{if(!d)return i.item(a,c==null?void 0:c.id)},[d]);let f=Er(a,o,[e.value,e.children,o],e.keywords),x=ut(),p=ae(D=>D.value&&D.value===f.current),u=ae(D=>d||i.filter()===!1?!0:D.search?D.filtered.items.get(a)>0:!0);l.useEffect(()=>{let D=o.current;if(!(!D||e.disabled))return D.addEventListener(st,N),()=>D.removeEventListener(st,N)},[u,e.onSelect,e.disabled]);function N(){var D,A;g(),(A=(D=m.current).onSelect)==null||A.call(D,f.current)}function g(){x.setState("value",f.current,!0)}if(!u)return null;let{disabled:S,value:v,onSelect:C,forceMount:j,keywords:w,...E}=e;return l.createElement(le.div,{ref:se(o,r),...E,id:a,"cmdk-item":"",role:"option","aria-disabled":!!S,"aria-selected":!!p,"data-disabled":!!S,"data-selected":!!p,onPointerMove:S||i.getDisablePointerSelection()?void 0:g,onClick:S?void 0:N},e.children)}),ol=l.forwardRef((e,r)=>{let{heading:n,children:s,forceMount:a,...o}=e,c=Q(),i=l.useRef(null),m=l.useRef(null),d=Q(),f=Se(),x=ae(u=>a||f.filter()===!1?!0:u.search?u.filtered.groups.has(c):!0);de(()=>f.group(c),[]),Er(c,i,[e.value,e.heading,m]);let p=l.useMemo(()=>({id:c,forceMount:a}),[a]);return l.createElement(le.div,{ref:se(i,r),...o,"cmdk-group":"",role:"presentation",hidden:x?void 0:!0},n&&l.createElement("div",{ref:m,"cmdk-group-heading":"","aria-hidden":!0,id:d},n),ze(e,u=>l.createElement("div",{"cmdk-group-items":"",role:"group","aria-labelledby":n?d:void 0},l.createElement(wr.Provider,{value:p},u))))}),il=l.forwardRef((e,r)=>{let{alwaysRender:n,...s}=e,a=l.useRef(null),o=ae(c=>!c.search);return!n&&!o?null:l.createElement(le.div,{ref:se(a,r),...s,"cmdk-separator":"",role:"separator"})}),cl=l.forwardRef((e,r)=>{let{onValueChange:n,...s}=e,a=e.value!=null,o=ut(),c=ae(d=>d.search),i=ae(d=>d.selectedItemId),m=Se();return l.useEffect(()=>{e.value!=null&&o.setState("search",e.value)},[e.value]),l.createElement(le.input,{ref:r,...s,"cmdk-input":"",autoComplete:"off",autoCorrect:"off",spellCheck:!1,"aria-autocomplete":"list",role:"combobox","aria-expanded":!0,"aria-controls":m.listId,"aria-labelledby":m.labelId,"aria-activedescendant":i,id:m.inputId,type:"text",value:a?e.value:c,onChange:d=>{a||o.setState("search",d.target.value),n==null||n(d.target.value)}})}),dl=l.forwardRef((e,r)=>{let{children:n,label:s="Suggestions",...a}=e,o=l.useRef(null),c=l.useRef(null),i=ae(d=>d.selectedItemId),m=Se();return l.useEffect(()=>{if(c.current&&o.current){let d=c.current,f=o.current,x,p=new ResizeObserver(()=>{x=requestAnimationFrame(()=>{let u=d.offsetHeight;f.style.setProperty("--cmdk-list-height",u.toFixed(1)+"px")})});return p.observe(d),()=>{cancelAnimationFrame(x),p.unobserve(d)}}},[]),l.createElement(le.div,{ref:se(o,r),...a,"cmdk-list":"",role:"listbox",tabIndex:-1,"aria-activedescendant":i,"aria-label":s,id:m.listId},ze(e,d=>l.createElement("div",{ref:se(c,m.listInnerRef),"cmdk-list-sizer":""},d)))}),ul=l.forwardRef((e,r)=>{let{open:n,onOpenChange:s,overlayClassName:a,contentClassName:o,container:c,...i}=e;return l.createElement(Ka,{open:n,onOpenChange:s},l.createElement(Ga,{container:c},l.createElement(Ya,{"cmdk-overlay":"",className:a}),l.createElement(qa,{"aria-label":e.label,"cmdk-dialog":"",className:o},l.createElement(Cr,{ref:r,...i}))))}),ml=l.forwardRef((e,r)=>ae(n=>n.filtered.count===0)?l.createElement(le.div,{ref:r,...e,"cmdk-empty":"",role:"presentation"}):null),fl=l.forwardRef((e,r)=>{let{progress:n,children:s,label:a="Loading...",...o}=e;return l.createElement(le.div,{ref:r,...o,"cmdk-loading":"",role:"progressbar","aria-valuenow":n,"aria-valuemin":0,"aria-valuemax":100,"aria-label":a},ze(e,c=>l.createElement("div",{"aria-hidden":!0},c)))}),H=Object.assign(Cr,{List:dl,Item:ll,Input:cl,Group:ol,Separator:il,Dialog:ul,Empty:ml,Loading:fl});function xl(e,r){let n=e.nextElementSibling;for(;n;){if(n.matches(r))return n;n=n.nextElementSibling}}function pl(e,r){let n=e.previousElementSibling;for(;n;){if(n.matches(r))return n;n=n.previousElementSibling}}function Sr(e){let r=l.useRef(e);return de(()=>{r.current=e}),r}var de=typeof window>"u"?l.useEffect:l.useLayoutEffect;function ge(e){let r=l.useRef();return r.current===void 0&&(r.current=e()),r}function ae(e){let r=ut(),n=()=>e(r.snapshot());return l.useSyncExternalStore(r.subscribe,n,n)}function Er(e,r,n,s=[]){let a=l.useRef(),o=Se();return de(()=>{var c;let i=(()=>{var d;for(let f of n){if(typeof f=="string")return f.trim();if(typeof f=="object"&&"current"in f)return f.current?(d=f.current.textContent)==null?void 0:d.trim():a.current}})(),m=s.map(d=>d.trim());o.value(e,i,m),(c=r.current)==null||c.setAttribute(he,i),a.current=i}),a}var hl=()=>{let[e,r]=l.useState(),n=ge(()=>new Map);return de(()=>{n.current.forEach(s=>s()),n.current=new Map},[e]),(s,a)=>{n.current.set(s,a),r({})}};function gl(e){let r=e.type;return typeof r=="function"?r(e.props):"render"in r?r.render(e.props):e}function ze({asChild:e,children:r},n){return e&&l.isValidElement(r)?l.cloneElement(gl(r),{ref:r.ref},n(r.props.children)):n(r)}var bl={position:"absolute",width:"1px",height:"1px",padding:"0",margin:"-1px",overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",borderWidth:"0"};const vl=()=>{const[e,r]=l.useState(!1),[n,s]=l.useState([]),[a,o]=l.useState([]),[c,i]=l.useState("root"),[m,d]=l.useState(null),[f,x]=l.useState(""),p=Bt(),{showToast:u}=zr();l.useEffect(()=>{const v=C=>{C.key==="k"&&(C.metaKey||C.ctrlKey)&&(C.preventDefault(),r(j=>(j||(i("root"),x("")),!j)))};return document.addEventListener("keydown",v),()=>document.removeEventListener("keydown",v)},[]),l.useEffect(()=>{e&&(ht().then(s),Br().then(o))},[e]);const N=v=>{r(!1),v()},g=async v=>{if(!m)return;const C=n.find(j=>j.caseId===m);C==null||C.status;try{await Wr(m,{status:v}),u(`${C==null?void 0:C.customerName}  ${v}() .`,"success"),r(!1),i("root"),ht().then(s)}catch(j){console.error("Failed to update status",j),u("  .","error")}},S=l.useMemo(()=>{if(!f)return n;const v=f.toLowerCase();return n.filter(C=>C.customerName.toLowerCase().includes(v)||C.phone.includes(v))},[n,f]);return e?t.jsx(vn,{children:e&&t.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:t.jsx(yn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"w-full max-w-2xl bg-white dark:bg-gray-800 rounded-xl shadow-2xl border border-gray-200 dark:border-gray-700 overflow-hidden",children:t.jsxs(H,{className:"w-full",onKeyDown:v=>{v.key==="Backspace"&&!f&&(v.preventDefault(),c==="status-select"&&i("status-case-select"),c==="status-case-select"&&i("root"))},children:[t.jsxs("div",{className:"flex items-center border-b border-gray-100 dark:border-gray-700 px-4",children:[c!=="root"&&t.jsx("button",{onClick:()=>{i(c==="status-select"?"status-case-select":"root")},className:"mr-2 p-1 hover:bg-gray-100 rounded text-gray-500",children:t.jsx(yl,{})}),t.jsx(Nn,{className:"w-5 h-5 text-gray-400 mr-2"}),t.jsx(H.Input,{value:f,onValueChange:x,className:"w-full p-4 bg-transparent outline-none text-gray-800 dark:text-gray-100 placeholder-gray-400",placeholder:c==="root"?"   (, , )...":c==="status-case-select"?"   ...":"  ..."})]}),t.jsxs(H.List,{className:"max-h-[60vh] overflow-y-auto p-2 scrollbar-hide",children:[t.jsx(H.Empty,{className:"p-4 text-center text-gray-500",children:"  ."}),c==="root"&&t.jsxs(t.Fragment,{children:[t.jsx(H.Group,{heading:" ",className:"text-xs font-semibold text-gray-500 mb-2 px-2",children:t.jsxs(H.Item,{onSelect:()=>{i("status-case-select"),x("")},className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-orange-100 p-1.5 rounded mr-3 text-orange-600",children:t.jsx(Xn,{size:16})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-medium",children:"  "}),t.jsx("span",{className:"text-[10px] text-gray-400",children:"     "})]}),t.jsx(vt,{className:"ml-auto w-4 h-4 text-gray-400"})]})}),t.jsxs(H.Group,{heading:" ",className:"text-xs font-semibold text-gray-500 mb-2 px-2",children:[t.jsxs(H.Item,{onSelect:()=>N(()=>p("/")),className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-blue-100 p-1.5 rounded mr-3 text-blue-600",children:t.jsx(Hr,{size:16})}),t.jsx("span",{className:"text-sm font-medium",children:""})]}),t.jsxs(H.Item,{onSelect:()=>N(()=>p("/cases")),className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-purple-100 p-1.5 rounded mr-3 text-purple-600",children:t.jsx(ot,{size:16})}),t.jsx("span",{className:"text-sm font-medium",children:" "})]}),t.jsxs(H.Item,{onSelect:()=>N(()=>p("/new")),className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-green-100 p-1.5 rounded mr-3 text-green-600",children:t.jsx(Be,{size:16})}),t.jsx("span",{className:"text-sm font-medium",children:"  "})]})]}),t.jsx(H.Group,{heading:" ",className:"text-xs font-semibold text-gray-500 mb-2 px-2 mt-2",children:n.slice(0,5).map(v=>t.jsxs(H.Item,{onSelect:()=>N(()=>p(`/case/${v.caseId}`)),className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-1.5 rounded mr-3 text-gray-600 dark:text-gray-300",children:t.jsx(Be,{size:16})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:v.customerName}),t.jsxs("span",{className:"text-xs text-gray-500",children:[v.phone," | ",v.status]})]})]},v.caseId))})]}),c==="status-case-select"&&t.jsx(H.Group,{heading:"  ( )",className:"text-xs font-semibold text-gray-500 mb-2 px-2",children:S.slice(0,20).map(v=>t.jsxs(H.Item,{onSelect:()=>{d(v.caseId),i("status-select"),x("")},className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-gray-100 dark:bg-gray-700 p-1.5 rounded mr-3 text-gray-600 dark:text-gray-300",children:t.jsx(Be,{size:16})}),t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"text-sm font-medium text-gray-800 dark:text-gray-200",children:v.customerName}),t.jsxs("span",{className:"text-xs text-gray-500",children:[v.phone," | : ",v.status]})]}),t.jsx(vt,{className:"ml-auto w-4 h-4 text-gray-400"})]},"status-"+v.caseId))}),c==="status-select"&&t.jsx(H.Group,{heading:"  ",className:"text-xs font-semibold text-gray-500 mb-2 px-2",children:a.filter(v=>v!=="").map(v=>t.jsxs(H.Item,{onSelect:()=>g(v),className:"flex items-center p-2 rounded-lg cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 data-[selected=true]:bg-blue-50 dark:data-[selected=true]:bg-blue-900/20 data-[selected=true]:text-blue-600",children:[t.jsx("div",{className:"bg-gray-100 p-1.5 rounded mr-3 text-gray-600",children:t.jsx(Ht,{size:16})}),t.jsx("span",{className:"text-sm font-medium text-gray-800",children:v})]},v))})]}),t.jsxs("div",{className:"border-t border-gray-100 dark:border-gray-700 p-2 px-4 flex justify-between items-center text-[10px] text-gray-400 bg-gray-50 dark:bg-gray-900/50",children:[t.jsx("span",{children:": "}),t.jsx("span",{children:": "}),t.jsx("span",{children:": Bksp"}),t.jsx("span",{children:": ESC"})]})]})})})}):null},yl=()=>t.jsx("svg",{width:"15",height:"15",viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",className:"w-4 h-4",children:t.jsx("path",{d:"M8.84182 3.13514C9.04327 3.32401 9.05348 3.64042 8.86462 3.84188L5.43521 7.49991L8.86462 11.1579C9.05348 11.3594 9.04327 11.6758 8.84182 11.8647C8.64036 12.0535 8.32394 12.0433 8.13508 11.8419L4.38508 7.84188C4.20477 7.64955 4.20477 7.35027 4.38508 7.15794L8.13508 3.15794C8.32394 2.95648 8.64036 2.94628 8.84182 3.13514Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})}),jl=({c:e,partner:r,statuses:n,secondaryStatuses:s,onStatusChangeStart:a,onSecondaryStatusChangeStart:o})=>{const c=un(e,r);return t.jsx("div",{className:"bg-white p-4 rounded-xl shadow-sm border border-gray-100 sticky top-0 z-10",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[t.jsx("span",{className:"px-2 py-0.5 rounded text-xs font-bold text-white whitespace-nowrap "+(["",""].includes(e.caseType||"")?"bg-indigo-500":"bg-gray-500"),children:e.caseType}),t.jsx("span",{className:"text-xs bg-gray-100 text-gray-600 px-2 py-0.5 rounded font-bold border border-gray-200 whitespace-nowrap",children:(r==null?void 0:r.name)||" "}),t.jsx("h1",{className:"text-xl md:text-2xl font-bold text-gray-900 whitespace-nowrap",children:e.customerName}),t.jsx("span",{className:"text-gray-500 whitespace-nowrap",children:e.phone})]}),c.length>0&&t.jsx("div",{className:"flex gap-2 mt-2",children:c.map(i=>t.jsxs("span",{className:"text-xs bg-red-100 text-red-600 px-2 py-0.5 rounded font-bold flex items-center",children:[t.jsx(Vr,{size:12,className:"mr-1"})," ",i]},i))})]}),t.jsxs("div",{className:"flex flex-col md:flex-row gap-2",children:[t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-xs text-gray-400 font-medium",children:"1 "}),t.jsx("select",{className:"p-2 border border-gray-300 rounded font-semibold outline-none min-w-[140px] "+(Kr[e.status]||"bg-blue-50 text-blue-800"),value:e.status,onChange:i=>a(i.target.value),children:n.map(i=>t.jsx("option",{value:i,children:i},i))})]}),e.status===" "&&t.jsxs("div",{className:"flex flex-col gap-1",children:[t.jsx("label",{className:"text-xs text-purple-500 font-medium",children:"2 "}),t.jsxs("select",{className:"p-2 border border-purple-300 rounded font-semibold outline-none min-w-[140px] bg-purple-50 text-purple-800",value:e.secondaryStatus||"",onChange:i=>o(i.target.value||null),children:[t.jsx("option",{value:"",children:" "}),s.map(i=>t.jsx("option",{value:i,children:i},i))]})]})]})]})})},_t={:{bg:"bg-green-50",border:"border-green-200",text:"text-green-700",icon:""},:{bg:"bg-red-50",border:"border-red-200",text:"text-red-600",icon:""},:{bg:"bg-blue-50",border:"border-blue-200",text:"text-blue-600",icon:""},:{bg:"bg-gray-50",border:"border-gray-200",text:"text-gray-600",icon:""}},Nl=({reminders:e,memos:r,onUpdateReminders:n,onUpdateMemos:s,showToast:a})=>{const[o,c]=l.useState(""),[i,m]=l.useState("09"),[d,f]=l.useState("00"),[x,p]=l.useState(""),[u,N]=l.useState(""),[g,S]=l.useState(""),[v,C]=l.useState(null),[j,w]=l.useState(null),[E,D]=l.useState(""),[A,L]=l.useState(null),[F,_]=l.useState(""),[M,W]=l.useState({isOpen:!1,reminderId:"",status:"",note:""});l.useEffect(()=>{p(o&&i&&d?`${o} ${i}:${d}`:"")},[o,i,d]);const oe=()=>{if(!x){a("  .","error");return}if(e.length>=5){a("  5   .","error");return}const h={id:Date.now().toString(),datetime:x.replace("T"," "),type:u,content:g};n([...e,h]),c(""),m("09"),f("00"),p(""),S(""),N(""),a("  .")},Y=h=>{n(e.filter(y=>y.id!==h)),C(null),a(" .")},z=()=>{if(!F.trim())return;const h={id:Date.now().toString(),createdAt:new Date().toISOString(),content:F.trim()};s([h,...r]),_(""),a("  .")},q=()=>{if(!j)return;const h=r.map(y=>y.id===j?{...y,content:E}:y);s(h),w(null),D(""),a("  .")},ee=h=>{s(r.filter(y=>y.id!==h)),a("  ."),L(null)},J=(h,y)=>{W({isOpen:!0,reminderId:h,status:y,note:""})},me=()=>{const h=e.map(y=>y.id===M.reminderId?{...y,resultStatus:M.status,resultNote:M.note}:y);n(h),W({isOpen:!1,reminderId:"",status:"",note:""}),a(`${M.status} .`)},ie=()=>{W({isOpen:!1,reminderId:"",status:"",note:""})},X=[...e].sort((h,y)=>h.datetime.localeCompare(y.datetime)),b=[...r].sort((h,y)=>y.createdAt.localeCompare(h.createdAt)),R=_t[M.status]||_t.;return t.jsxs(t.Fragment,{children:[M.isOpen&&t.jsx("div",{className:"fixed inset-0 z-[9999] flex items-center justify-center p-4",style:{backgroundColor:"rgba(0, 0, 0, 0.5)"},children:t.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl w-full max-w-sm overflow-hidden animate-in fade-in zoom-in duration-200",onClick:h=>h.stopPropagation(),children:[t.jsx("div",{className:`${R.bg} px-5 py-4 border-b ${R.border}`,children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`w-10 h-10 rounded-full ${R.bg} ${R.border} border-2 flex items-center justify-center`,children:t.jsx("span",{className:`text-xl font-bold ${R.text}`,children:R.icon})}),t.jsxs("div",{children:[t.jsxs("h3",{className:`text-lg font-bold ${R.text}`,children:[M.status," "]}),t.jsx("p",{className:"text-xs text-gray-500",children:"  "})]})]})}),t.jsxs("div",{className:"p-5",children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[t.jsx(wn,{size:14,className:"inline mr-1.5 text-gray-400"})," ()"]}),t.jsx("textarea",{className:"w-full p-3 border border-gray-200 rounded-xl text-sm focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none resize-none transition-all bg-gray-50 focus:bg-white",rows:3,placeholder:"   ...",value:M.note,onChange:h=>W(y=>({...y,note:h.target.value})),autoFocus:!0})]}),t.jsxs("div",{className:"px-5 pb-5 flex gap-3",children:[t.jsx("button",{onClick:ie,className:"flex-1 py-3 px-4 rounded-xl border border-gray-200 text-gray-600 font-medium hover:bg-gray-50 transition-colors",children:""}),t.jsx("button",{onClick:me,className:`flex-1 py-3 px-4 rounded-xl font-bold text-white transition-colors ${M.status===""?"bg-green-500 hover:bg-green-600":M.status===""?"bg-red-500 hover:bg-red-600":M.status===""?"bg-blue-500 hover:bg-blue-600":"bg-gray-500 hover:bg-gray-600"}`,children:""})]})]})}),t.jsxs("div",{className:"bg-yellow-50 p-4 rounded-lg border border-yellow-100",children:[t.jsx("h3",{className:"font-bold text-yellow-800 mb-2 flex items-center gap-2",children:"    "}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[t.jsxs("div",{className:"bg-white p-3 rounded-lg border border-yellow-200 shadow-sm",children:[t.jsxs("label",{className:"block text-xs font-bold text-yellow-800 mb-2",children:["   (",X.length,"/5)"]}),t.jsx("div",{className:"flex flex-col md:flex-row gap-2 mb-3",children:t.jsxs("div",{className:"flex flex-col gap-2 flex-[2]",children:[t.jsx("input",{type:"date",className:"w-full p-2 border border-blue-300 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500",value:o,onChange:h=>c(h.target.value),disabled:(e.length||0)>=5}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx("select",{className:"flex-1 p-2 border border-blue-300 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500",value:i,onChange:h=>m(h.target.value),disabled:(e.length||0)>=5,children:Array.from({length:24}).map((h,y)=>{const I=y.toString().padStart(2,"0");return t.jsxs("option",{value:I,children:[I,""]},I)})}),t.jsx("select",{className:"flex-1 p-2 border border-blue-300 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500",value:d,onChange:h=>f(h.target.value),disabled:(e.length||0)>=5,children:["00","10","20","30","40","50"].map(h=>t.jsxs("option",{value:h,children:[h,""]},h))}),t.jsxs("select",{className:"flex-1 p-2 border border-blue-300 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500 min-w-[60px]",value:u,onChange:h=>N(h.target.value),children:[t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""}),t.jsx("option",{value:"",children:""})]})]})]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("input",{type:"text",className:"flex-1 p-2 border border-gray-300 rounded text-sm",placeholder:u===""?"  ":" ()",value:g,onChange:h=>S(h.target.value)}),t.jsx("button",{onClick:oe,disabled:(e.length||0)>=5,className:"bg-yellow-500 text-white px-3 py-2 rounded text-sm font-bold hover:bg-yellow-600 whitespace-nowrap disabled:bg-gray-400",children:""})]}),t.jsx("div",{className:"space-y-2 mt-2",children:X.length===0?t.jsx("div",{className:"text-center py-2 text-xs text-gray-400 bg-gray-50 rounded border border-gray-100 border-dashed",children:"  ."}):X.map(h=>t.jsxs("div",{className:"bg-blue-50 border border-blue-100 rounded p-2 flex flex-col gap-2",children:[t.jsxs("div",{className:"flex flex-col md:flex-row md:justify-between md:items-center w-full gap-2",children:[t.jsxs("div",{className:"flex items-center gap-2 flex-wrap",children:[t.jsx(Wt,{size:16,className:"text-blue-600 flex-shrink-0"}),t.jsx("span",{className:"text-sm font-bold text-gray-800 whitespace-nowrap",children:h.datetime}),t.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded font-bold whitespace-nowrap ${h.type===""?"bg-purple-100 text-purple-700":h.type===""?"bg-green-100 text-green-700":"bg-blue-100 text-blue-700"}`,children:h.type||""})]}),h.content&&t.jsx("span",{className:"text-xs text-gray-600 break-words w-full md:w-auto md:max-w-[200px]",children:h.content})]}),t.jsx("div",{className:"pt-2 border-t border-blue-100 w-full",children:h.resultStatus?t.jsxs("div",{className:"flex justify-between items-center text-xs",children:[t.jsx("span",{className:`font-bold px-2 py-0.5 rounded ${h.resultStatus===""?"bg-green-100 text-green-700":h.resultStatus===""?"bg-red-100 text-red-700":h.resultStatus===""?"bg-blue-100 text-blue-700":"bg-gray-100 text-gray-700"}`,children:h.resultStatus}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-gray-500 truncate max-w-[150px]",children:h.resultNote}),t.jsx("button",{onClick:()=>{const y=e.map(I=>I.id===h.id?{...I,resultStatus:void 0,resultNote:void 0}:I);n(y)},className:"text-gray-400 hover:text-gray-600 underline whitespace-nowrap",children:""})]})]}):t.jsxs("div",{className:"flex items-center gap-2 overflow-x-auto no-scrollbar pb-1",children:[t.jsx("span",{className:"text-xs text-blue-400 font-bold flex-shrink-0",children:":"}),["","","",""].map(y=>t.jsx("button",{type:"button",onClick:()=>J(h.id,y),className:`text-[10px] px-2 py-1 rounded border flex-shrink-0 transition-colors ${y===""?"border-green-200 text-green-700 hover:bg-green-50":y===""?"border-red-200 text-red-700 hover:bg-red-50":y===""?"border-blue-200 text-blue-700 hover:bg-blue-50":"border-gray-200 text-gray-600 hover:bg-gray-50"}`,children:y},y)),v===h.id?t.jsxs("div",{className:"flex gap-2 flex-shrink-0",children:[t.jsx("button",{onClick:()=>Y(h.id),className:"text-green-600 text-xs font-bold",children:""}),t.jsx("button",{onClick:()=>C(null),className:"text-red-500 text-xs",children:""})]}):t.jsx("button",{onClick:()=>C(h.id),className:"text-red-500 p-1 hover:bg-red-50 rounded flex-shrink-0",title:" ",children:t.jsx(ye,{size:16})})]})})]},h.id))})]}),t.jsxs("div",{children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs font-medium text-yellow-800 mb-1",children:"  "}),t.jsx("textarea",{className:"w-full p-2 border border-yellow-300 rounded bg-white h-[60px] text-sm focus:ring-1 focus:ring-yellow-500 outline-none",value:F,onChange:h=>_(h.target.value),placeholder:"   ..."}),t.jsx("button",{onClick:z,className:"w-full mt-1 bg-yellow-100 text-yellow-800 border border-yellow-300 px-3 py-1.5 rounded text-xs font-bold hover:bg-yellow-200",children:"  "})]}),t.jsxs("div",{className:"mt-4",children:[t.jsxs("label",{className:"block text-xs font-medium text-yellow-800 mb-2",children:["  (",r.length,")"]}),t.jsxs("div",{className:"max-h-64 overflow-y-auto space-y-2 bg-yellow-100/30 p-2 rounded",children:[b.length===0&&t.jsx("p",{className:"text-center text-xs text-gray-500 py-4",children:"   ."}),b.map(h=>t.jsxs("div",{className:"bg-white p-3 rounded text-xs shadow-sm border border-yellow-100",children:[t.jsxs("div",{className:"flex justify-between items-start mb-1",children:[t.jsx("p",{className:"font-bold text-gray-500 text-[10px]",children:Pe(new Date(h.createdAt),"yyyy-MM-dd HH:mm")}),t.jsx("div",{className:"flex gap-1",children:j===h.id?t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:q,className:"text-green-600 hover:bg-green-50 p-1 rounded",title:"",children:t.jsx(Cn,{size:14})}),t.jsx("button",{type:"button",onClick:()=>w(null),className:"text-gray-400 hover:bg-gray-100 p-1 rounded",title:"",children:t.jsx(lt,{size:14})})]}):A===h.id?t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:()=>ee(h.id),className:"text-green-600 hover:bg-green-50 p-1 rounded font-bold",title:"",children:""}),t.jsx("button",{type:"button",onClick:()=>L(null),className:"text-red-500 hover:bg-red-50 p-1 rounded",title:"",children:""})]}):t.jsxs(t.Fragment,{children:[t.jsx("button",{type:"button",onClick:()=>{w(h.id),D(h.content)},className:"text-blue-500 hover:bg-blue-50 p-1 rounded",title:"",children:t.jsx(Te,{size:14})}),t.jsx("button",{type:"button",onClick:()=>L(h.id),className:"text-red-500 hover:bg-red-50 p-1 rounded",title:"",children:t.jsx(ye,{size:14})})]})})]}),j===h.id?t.jsx("textarea",{className:"w-full p-1 border rounded text-xs h-20",value:E,onChange:y=>D(y.target.value)}):t.jsx("p",{className:"text-gray-800 whitespace-pre-wrap leading-relaxed",children:h.content})]},h.id))]})]})]})]})]})]})},Ft=e=>{if(!e||isNaN(e))return"00:00";const r=Math.floor(e/60),n=Math.floor(e%60);return`${r.toString().padStart(2,"0")}:${n.toString().padStart(2,"0")}`},wl=({src:e,fileName:r})=>{const n=l.useRef(null),[s,a]=l.useState(!1),[o,c]=l.useState(0),[i,m]=l.useState(0),[d,f]=l.useState(!1);l.useEffect(()=>{a(!1),m(0),c(0),f(!1),n.current&&(n.current.currentTime=0,n.current.load())},[e]);const x=()=>{if(n.current){if(s)n.current.pause();else{const j=n.current.play();j!==void 0&&j.catch(w=>{console.error("Playback failed",w),f(!0)})}a(!s)}},p=()=>{n.current&&m(n.current.currentTime)},u=()=>{n.current&&(c(n.current.duration),f(!1))},N=j=>{const w=Number(j.target.value);n.current&&(n.current.currentTime=w,m(w))},g=j=>{n.current&&(n.current.currentTime+=j)},S=()=>{f(!0),a(!1)},v=e.includes("drive.google.com"),C=j=>{if(!j.includes("drive.google.com"))return j;let w="";const E=j.match(/\/file\/d\/([a-zA-Z0-9_-]+)/);if(E)w=E[1];else{const D=j.match(/[?&]id=([a-zA-Z0-9_-]+)/);D&&(w=D[1])}return w?`https://drive.google.com/file/d/${w}/preview`:j};return t.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-purple-100 p-4 w-full",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[t.jsx("div",{className:"bg-purple-100 p-1.5 rounded-full text-purple-600",children:t.jsx(qn,{size:16})}),t.jsx("span",{className:"text-sm font-bold text-gray-700 truncate flex-1",children:r||"  "})]}),v?t.jsxs("div",{className:"flex flex-col gap-2",children:[t.jsx("div",{className:"relative w-full h-[100px] bg-gray-100 rounded-lg overflow-hidden border border-gray-200",children:t.jsx("iframe",{src:C(e),className:"w-full h-full border-none",title:"Audio Preview",allow:"autoplay"})}),t.jsxs("div",{className:"flex justify-end items-center gap-2",children:[t.jsx("span",{className:"text-[10px] text-gray-400",children:"*       ."}),t.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"text-xs bg-purple-50 text-purple-700 px-2 py-1 rounded font-bold hover:bg-purple-100 transition-colors",children:"  "})]})]}):t.jsxs(t.Fragment,{children:[t.jsx("audio",{ref:n,src:e,onTimeUpdate:p,onLoadedMetadata:u,onEnded:()=>a(!1),onError:S}),d?t.jsxs("div",{className:"bg-red-50 text-red-600 text-xs p-3 rounded flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center gap-1",children:[t.jsx(jn,{size:14}),"    ."]}),t.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"underline font-bold",children:" "})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"relative group",children:[t.jsx("input",{type:"range",min:0,max:o||100,value:i,onChange:N,className:"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-purple-600 hover:h-2 transition-all",style:{background:`linear-gradient(to right, #9333ea ${i/(o||1)*100}%, #e5e7eb ${i/(o||1)*100}%)`}}),t.jsxs("div",{className:"flex justify-between text-[10px] text-gray-400 font-mono mt-1",children:[t.jsx("span",{children:Ft(i)}),t.jsx("span",{children:Ft(o)})]})]}),t.jsxs("div",{className:"flex justify-center items-center gap-6",children:[t.jsx("button",{onClick:()=>g(-10),className:"text-gray-400 hover:text-purple-600 transition-colors p-2 hover:bg-purple-50 rounded-full",title:"10 ",children:t.jsx(Wn,{size:20})}),t.jsx("button",{onClick:x,className:"bg-purple-600 text-white w-12 h-12 rounded-full flex items-center justify-center shadow-lg hover:bg-purple-700 hover:scale-105 transition-all",children:s?t.jsx(_n,{size:24,fill:"currentColor"}):t.jsx(Bn,{size:24,fill:"currentColor",className:"ml-1"})}),t.jsx("button",{onClick:()=>g(30),className:"text-gray-400 hover:text-purple-600 transition-colors p-2 hover:bg-purple-50 rounded-full",title:"30 ",children:t.jsx(Kn,{size:20})})]})]})]})]})},Cl=({c:e,aiSummaryText:r,setAiSummaryText:n,aiSummaryEditMode:s,setAiSummaryEditMode:a,handleUpdateAiSummaryText:o,handleDeleteAiSummary:c,handleSaveSummaryToMemo:i,currentAudioFile:m,audioUrl:d,isFileUploading:f,isAiLoading:x,onAudioFileSelect:p,onTriggerAudioInput:u,onGenerateAiSummary:N,onPlayRecording:g,onDeleteRecording:S})=>{var j,w;const v=l.useRef(null),C=()=>{var E;(E=v.current)==null||E.click()};return t.jsxs("div",{className:"bg-purple-50 p-4 rounded-lg border border-purple-100",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("h3",{className:"font-bold text-purple-800 flex items-center gap-2",children:[t.jsx(Qe,{size:18,className:"flex-shrink-0"}),t.jsxs("div",{className:"flex flex-col leading-none",children:[t.jsx("span",{children:"AI  "}),t.jsx("span",{children:"& "})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"file",ref:v,className:"hidden",accept:"audio/*",onChange:p}),t.jsxs("button",{onClick:C,disabled:f,className:"flex items-center gap-1 text-xs px-2 py-1.5 rounded border "+(m?"bg-green-100 text-green-700 border-green-300":"bg-white text-gray-600 border-gray-300")+(f?" opacity-50 cursor-not-allowed":""),children:[t.jsx(Tn,{size:14,className:"flex-shrink-0"}),t.jsx("span",{className:"text-center leading-tight",children:f?"...":m?" ":t.jsxs(t.Fragment,{children:["",t.jsx("br",{}),""]})})]}),t.jsx("button",{onClick:N,disabled:x,className:"flex items-center gap-1 text-xs bg-purple-600 text-white px-3 py-1.5 rounded font-bold hover:bg-purple-700 disabled:opacity-50 transition-colors shadow-sm",children:x?" ...":t.jsxs("span",{className:"text-center leading-tight",children:["",t.jsx("br",{}),""]})})]})]}),t.jsx("div",{className:"mb-4",children:(d||m)&&t.jsx(wl,{src:d&&d.includes("drive.google.com")?mn(d):d||"",fileName:m?m.name:`  (ID: ${(w=(j=e.recordings)==null?void 0:j.find(E=>E.url===d))==null?void 0:w.id.substring(0,8)}...)`})}),e.recordings&&e.recordings.length>0&&t.jsxs("div",{className:"mb-4",children:[t.jsxs("h4",{className:"text-xs font-bold text-gray-600 mb-2 flex items-center",children:[t.jsx(kn,{size:12,className:"mr-1"}),"  "]}),t.jsx("div",{className:"space-y-1 max-h-32 overflow-y-auto no-scrollbar",children:e.recordings.map(E=>t.jsxs("div",{className:"flex justify-between items-center bg-white p-2 rounded border border-gray-200 text-xs",children:[t.jsxs("div",{className:"flex items-center gap-2 overflow-hidden",children:[t.jsx(Mn,{size:16,className:"text-blue-500 cursor-pointer flex-shrink-0",onClick:()=>g(E)}),t.jsxs("div",{className:"truncate",children:[t.jsx("span",{className:"font-medium",children:E.filename}),t.jsx("span",{className:"text-gray-400 text-[10px] ml-1",children:Pe(new Date(E.uploadDate),"yy.MM.dd HH:mm")})]})]}),t.jsx("button",{onClick:()=>S(E.id),className:"text-gray-400 hover:text-red-500",children:t.jsx(lt,{size:14})})]},E.id))})]}),t.jsx("div",{className:"bg-white p-3 rounded-lg border border-purple-100 shadow-sm relative min-h-[80px]",children:s?t.jsxs("div",{className:"space-y-2",children:[t.jsx("textarea",{className:"w-full h-32 p-2 text-sm border border-purple-200 rounded focus:outline-none focus:ring-1 focus:ring-purple-500",value:r||"",onChange:E=>n(E.target.value)}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:o,className:"text-xs bg-green-600 text-white px-3 py-1 rounded hover:bg-green-700",children:""}),t.jsx("button",{onClick:()=>a(!1),className:"text-xs bg-gray-200 text-gray-700 px-3 py-1 rounded hover:bg-gray-300",children:""})]})]}):t.jsxs("div",{className:"group",children:[t.jsxs("div",{className:"absolute top-2 right-2 flex gap-1 opacity-0 group-hover:opacity-100 transition-opacity",children:[t.jsx("button",{onClick:()=>a(!0),className:"p-1 text-blue-500 hover:bg-blue-50 rounded",title:"",children:t.jsx(Te,{size:14})}),t.jsx("button",{onClick:c,className:"p-1 text-red-500 hover:bg-red-50 rounded",title:"",children:t.jsx(ye,{size:14})})]}),t.jsx("div",{className:"text-sm text-gray-700 whitespace-pre-wrap leading-relaxed pr-10",children:r||t.jsx("span",{className:"text-gray-400",children:"   .         ."})})]})}),r&&!s&&t.jsx("div",{className:"mt-3 flex justify-end",children:t.jsxs("button",{onClick:i,className:"flex items-center gap-1 text-xs bg-indigo-50 text-indigo-700 px-3 py-2 rounded font-bold hover:bg-indigo-100 border border-indigo-200 transition-colors",children:[t.jsx(Vt,{size:14}),"    ( )"]})})]})},$=({label:e,value:r,onChange:n,onBlur:s,type:a="text",placeholder:o="",suffix:c="",readOnly:i=!1,isPhone:m=!1,isCurrency:d=!1,className:f="",updateOnBlur:x=!1})=>{const[p,u]=gt.useState(r);gt.useEffect(()=>{u(r)},[r]);const N=x?p:r,g=C=>a==="number"&&!d&&(C===0||C===void 0||C===null)?"":d&&(typeof C=="number"||!isNaN(Number(C)))?Number(C).toLocaleString():C,S=C=>{let j=C.target.value;if(m){const w=j.replace(/[^0-9]/g,"");let E=w;w.length>3&&w.length<=7?E=`${w.slice(0,3)}-${w.slice(3)}`:w.length>7&&(E=`${w.slice(0,3)}-${w.slice(3,7)}-${w.slice(7,11)}`),x?u(E):n(E);return}if(d){const w=j.replace(/,/g,"");if(w===""||/^[0-9]+$/.test(w)){const E=w===""?0:Number(w);x?u(E):n(E)}return}if(a==="number"){if(j===""||/^[0-9]+$/.test(j)){const w=j===""?0:Number(j);x?u(w):n(w)}}else x?u(j):n(j)},v=()=>{x&&p!==r&&n(p),s&&s()};return t.jsxs("div",{className:`mb-4 ${f}`,children:[e&&t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:e}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",autoComplete:"off",className:"w-full p-2 border border-blue-300 rounded text-sm outline-none "+(i?"bg-gray-100 text-gray-500 cursor-not-allowed":"focus:ring-1 focus:ring-blue-500"),value:g(N)||"",onChange:i?void 0:S,onBlur:v,placeholder:o,readOnly:i}),c&&t.jsx("span",{className:"absolute right-3 top-2 text-gray-500 text-xs",children:c})]})]})},Z=({label:e,value:r,onChange:n,options:s,isMulti:a=!1,className:o=""})=>t.jsxs("div",{className:`mb-4 ${o}`,children:[e&&t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:e}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:s.map(c=>{const i=a?r==null?void 0:r.includes(c):r===c;return t.jsx("button",{type:"button",onClick:()=>n(c),className:"px-3 py-1.5 text-xs rounded border "+(i?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),children:c},c)})})]}),Sl=({c:e,partners:r,inboundPaths:n,onUpdate:s,statusLogs:a})=>{var o;return t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-700 border-b pb-2 mb-4",children:" "}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-4",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" ()"}),t.jsx("select",{className:"w-full p-2 border border-gray-300 rounded text-sm bg-gray-50",value:e.partnerId,onChange:c=>s("partnerId",c.target.value),children:r.map(c=>t.jsx("option",{value:c.partnerId,children:c.name},c.partnerId))})]}),t.jsxs("div",{className:"flex-1",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" "}),t.jsxs("select",{className:"w-full p-2 border border-gray-300 rounded text-sm focus:ring-1 focus:ring-blue-500 outline-none",value:e.inboundPath,onChange:c=>s("inboundPath",c.target.value),children:[t.jsx("option",{value:"",children:""}),n.map(c=>t.jsx("option",{value:c,children:c},c))]})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"   (  )"}),t.jsx("div",{className:"w-full p-2 border border-gray-200 rounded text-sm bg-gray-50 min-h-[40px] "+(e.preInfo?"text-gray-800":"text-gray-400"),children:e.preInfo?e.preInfo.split(/\s\/\s|\n/).filter(c=>{const i=c.toLowerCase();return!i.includes("[referrer]")&&!i.includes("[marketing_consent]")&&!i.includes("[third_party_consent]")&&!i.includes("[user_agent]")&&c.trim()!==""}).map((c,i)=>t.jsxs("div",{className:"flex items-start gap-1",children:[t.jsx("span",{className:"text-blue-500 font-bold",children:"*"}),t.jsx("span",{children:c.trim()})]},i)):t.jsx("span",{className:"text-gray-400 italic",children:"  "})})]}),a.length>0&&t.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg border border-blue-100 mb-6",children:[t.jsxs("h4",{className:"font-bold text-blue-800 mb-3 flex items-center gap-2",children:[t.jsx(Wt,{size:16}),"   "]}),t.jsx("div",{className:"space-y-3 max-h-60 overflow-y-auto pr-2",children:a.map(c=>t.jsxs("div",{className:"bg-white p-3 rounded-lg border border-blue-100 shadow-sm text-sm",children:[t.jsxs("div",{className:"flex justify-between items-center mb-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"font-bold text-gray-400 line-through text-xs px-2 py-0.5 bg-gray-100 rounded",children:c.fromStatus}),t.jsx("span",{className:"text-gray-400",children:""}),t.jsx("span",{className:"font-bold text-blue-600 text-xs px-2 py-0.5 bg-blue-50 rounded border border-blue-100",children:c.toStatus})]}),t.jsx("span",{className:"text-[10px] text-gray-400",children:Pe(new Date(c.changedAt),"yy.MM.dd HH:mm")})]}),c.memo&&t.jsx("div",{className:"mt-2 text-gray-600 bg-gray-50 p-2 rounded text-xs leading-relaxed",children:c.memo}),t.jsx("div",{className:"mt-1 text-right",children:t.jsxs("span",{className:"text-[10px] text-gray-400",children:["Changed by ",c.changedBy]})})]},c.logId))})]}),t.jsx($,{label:" ",value:e.createdAt?Pe(new Date(e.createdAt),"yyyy-MM-dd HH:mm"):"-",readOnly:!0,onChange:()=>{}}),t.jsx("div",{className:"mb-4",children:t.jsx(Z,{label:" ",value:e.caseType,onChange:c=>s("caseType",c),options:Gr})}),t.jsx($,{label:"",value:e.customerName,onChange:c=>s("customerName",c),updateOnBlur:!0}),t.jsx($,{label:"",value:e.phone,onChange:c=>s("phone",c),placeholder:"010-0000-0000",isPhone:!0,updateOnBlur:!0}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx($,{label:" (2)",value:e.birth,onChange:c=>s("birth",c),onBlur:()=>{const c=fn(e.birth);c!==e.birth&&s("birth",c)},placeholder:": 77",suffix:((o=e.birth)==null?void 0:o.length)===4?"":"",updateOnBlur:!0}),t.jsx(Z,{label:"",value:e.gender,onChange:c=>s("gender",c),options:["",""]})]})]})},El=({c:e,onUpdate:r,onIncomeChange:n,onJobTypeChange:s})=>{var a,o,c,i;return t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-700 border-b pb-2 mb-4",children:" / "}),t.jsx(Z,{label:" ( )",value:e.jobTypes,onChange:s,options:Yr,isMulti:!0}),((a=e.jobTypes)==null?void 0:a.includes(""))&&t.jsx($,{label:" ()",type:"number",value:e.incomeDetails.salary,onChange:m=>n("salary",m),isCurrency:!0,updateOnBlur:!0}),(((o=e.jobTypes)==null?void 0:o.includes(""))||((c=e.jobTypes)==null?void 0:c.includes("")))&&t.jsx($,{label:" ()",type:"number",value:e.incomeDetails.business,onChange:m=>n("business",m),isCurrency:!0,updateOnBlur:!0}),((i=e.jobTypes)==null?void 0:i.includes(""))&&t.jsx($,{label:" ()",type:"number",value:e.incomeDetails.freelance,onChange:m=>n("freelance",m),isCurrency:!0,updateOnBlur:!0}),t.jsx(Z,{label:"4",value:e.insurance4,onChange:m=>r("insurance4",m),options:["",""]}),t.jsx(Z,{label:"",value:e.maritalStatus,onChange:m=>r("maritalStatus",m),options:["","",""]}),e.maritalStatus!==""&&t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"  "}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:[0,1,2,3,4,5,6,7].map(m=>t.jsxs("button",{type:"button",onClick:()=>r("childrenCount",m),className:"px-3 py-1.5 text-xs rounded border "+(e.childrenCount===m?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),children:[m,""]},m))})]})]})},kl=({c:e,onUpdate:r})=>t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-700 border-b pb-2 mb-4",children:""}),t.jsx(Z,{label:"",value:e.housingType,onChange:n=>r("housingType",n),options:qr}),t.jsx(Z,{label:"",value:e.housingDetail,onChange:n=>r("housingDetail",n),options:Ur}),e.housingType===""?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx($,{label:" ()",type:"number",value:e.ownHousePrice,onChange:n=>r("ownHousePrice",n),isCurrency:!0,updateOnBlur:!0}),t.jsx($,{label:"  ()",type:"number",value:e.ownHouseLoan,onChange:n=>r("ownHouseLoan",n),isCurrency:!0,updateOnBlur:!0})]}),t.jsx(Z,{label:" ",value:e.ownHouseOwner,onChange:n=>r("ownHouseOwner",n),options:["",""," "]})]}):e.housingType===""?t.jsx(t.Fragment,{children:t.jsx(Z,{label:" ",value:e.freeHousingOwner,onChange:n=>r("freeHousingOwner",n),options:Xr})}):t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx($,{label:"()",type:"number",value:e.deposit,onChange:n=>r("deposit",n),isCurrency:!0,updateOnBlur:!0}),t.jsx($,{label:" ()",type:"number",value:e.depositLoanAmount,onChange:n=>r("depositLoanAmount",n),isCurrency:!0,updateOnBlur:!0})]}),t.jsx($,{label:"()",type:"number",value:e.rent,onChange:n=>r("rent",n),isCurrency:!0,updateOnBlur:!0}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:" "}),t.jsx("div",{className:"flex gap-2",children:Zr.map(n=>t.jsx("button",{type:"button",onClick:()=>r("rentContractor",n),className:"flex-1 py-1.5 text-xs rounded border "+(e.rentContractor===n?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),children:n},n))})]})]}),t.jsx($,{label:"",value:e.region,onChange:n=>r("region",n),updateOnBlur:!0})]}),Rl=({c:e,onUpdate:r,showToast:n})=>{var p;const[s,a]=l.useState({owner:"",type:"",amount:0,loanAmount:0,rentDeposit:0,desc:""}),[o,c]=l.useState({desc:"",amount:0}),i=()=>{if(!s.amount&&!s.loanAmount){n("    .");return}const u={id:Date.now().toString(),owner:s.owner,type:s.type||"",amount:s.amount||0,loanAmount:s.loanAmount||0,rentDeposit:s.rentDeposit||0,desc:s.desc||""},N=e.assets||[];r("assets",[...N,u]),a({owner:"",type:"",amount:0,loanAmount:0,rentDeposit:0,desc:""})},m=u=>{r("assets",(e.assets||[]).filter(N=>N.id!==u))},d=()=>{if(!o.amount){n("  .");return}const u={id:Date.now().toString(),desc:o.desc||"",amount:o.amount||0},N=e.creditLoan||[];r("creditLoan",[...N,u]),c({desc:"",amount:0})},f=u=>{r("creditLoan",(e.creditLoan||[]).filter(N=>N.id!==u))},x=xn(e);return t.jsxs("div",{children:[t.jsx("h3",{className:"font-bold text-gray-700 border-b pb-2 mb-4",children:" / "}),t.jsxs("div",{className:"mb-6 bg-blue-50 p-4 rounded-lg border border-blue-200",children:[t.jsx("h4",{className:"font-bold text-gray-700 mb-2 text-xs",children:" "}),t.jsxs("div",{className:"space-y-2 mb-3",children:[(!e.assets||e.assets.length===0)&&t.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"  ."}),e.assets&&e.assets.map(u=>t.jsxs("div",{className:"bg-white p-2 rounded border flex justify-between items-center text-xs",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("span",{className:"font-bold text-blue-600 mr-2",children:["[",u.owner,"]"]}),t.jsx("span",{className:"font-semibold mr-2",children:u.type}),t.jsxs("span",{className:"text-gray-800 mr-2",children:[" ",u.amount>0?u.amount.toLocaleString()+" ":"0"]}),u.loanAmount>0&&t.jsxs("span",{className:"text-red-500 mr-2",children:[" ",u.loanAmount.toLocaleString(),""]}),u.rentDeposit&&u.rentDeposit>0&&t.jsxs("span",{className:"text-green-600 mr-2",children:[" ",u.rentDeposit.toLocaleString(),""]}),u.desc&&t.jsxs("span",{className:"text-gray-500",children:["(",u.desc,")"]})]}),t.jsx("button",{onClick:()=>m(u.id),className:"text-red-500 p-1",children:t.jsx(ye,{size:14})})]},u.id))]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[t.jsx("select",{className:"p-1.5 border rounded text-xs bg-white",value:s.owner,onChange:u=>a({...s,owner:u.target.value}),children:Jr.map(u=>t.jsx("option",{value:u,children:u},u))}),t.jsx("select",{className:"p-1.5 border rounded text-xs bg-white",value:s.type,onChange:u=>a({...s,type:u.target.value}),children:Qr.map(u=>t.jsx("option",{value:u,children:u},u))})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[t.jsx($,{label:"",type:"number",value:s.amount,onChange:u=>a({...s,amount:u}),placeholder:"",suffix:"",isCurrency:!0}),t.jsx($,{label:"",type:"number",value:s.loanAmount,onChange:u=>a({...s,loanAmount:u}),placeholder:"",suffix:"",isCurrency:!0})]}),["",""].includes(s.type||"")&&t.jsx("div",{className:"mb-2",children:t.jsx($,{label:"",type:"number",value:s.rentDeposit,onChange:u=>a({...s,rentDeposit:u}),placeholder:"",suffix:"",isCurrency:!0})}),t.jsxs("div",{className:"flex gap-2 mb-2",children:[t.jsx("input",{type:"text",placeholder:"  (:  )",className:"flex-1 p-1.5 border rounded text-xs",value:s.desc||"",onChange:u=>a({...s,desc:u.target.value})}),t.jsxs("button",{type:"button",onClick:i,className:"w-24 bg-blue-600 text-white rounded text-xs font-bold flex justify-center items-center hover:bg-blue-700 flex-shrink-0",children:[t.jsx(et,{size:14,className:"mr-1"})," "]})]})]}),t.jsxs("div",{className:"mb-6 bg-pink-50 p-4 rounded-lg border border-pink-200",children:[t.jsx("h4",{className:"font-bold text-gray-700 mb-2 text-xs",children:" "}),t.jsxs("div",{className:"space-y-2 mb-3",children:[(!e.creditLoan||e.creditLoan.length===0)&&t.jsx("p",{className:"text-xs text-gray-400 text-center py-2",children:"  ."}),(p=e.creditLoan)==null?void 0:p.map(u=>t.jsxs("div",{className:"bg-white p-2 rounded border flex justify-between items-center text-xs",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("span",{className:"font-semibold mr-2",children:u.desc}),t.jsxs("span",{className:"text-gray-800",children:[u.amount.toLocaleString(),""]})]}),t.jsx("button",{type:"button",onClick:()=>f(u.id),className:"text-red-500 p-1",children:t.jsx(ye,{size:14})})]},u.id))]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2 mb-2",children:[t.jsx("input",{type:"text",placeholder:"  (: )",className:"w-full p-1.5 border rounded text-xs col-span-2",value:o.desc||"",onChange:u=>c({...o,desc:u.target.value})}),t.jsx($,{label:"",type:"number",value:o.amount,onChange:u=>c({...o,amount:u}),placeholder:"",suffix:"",isCurrency:!0}),t.jsx("div",{className:"flex items-center pb-4",children:t.jsxs("button",{type:"button",onClick:d,className:"w-full px-4 py-2 bg-blue-600 text-white rounded text-xs font-bold flex justify-center items-center hover:bg-blue-700 whitespace-nowrap h-[38px] mt-auto",children:[t.jsx(et,{size:14,className:"mr-1"})," "]})})]})]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-xs font-medium text-gray-500 mb-1",children:"   (  + )"}),t.jsxs("div",{className:"bg-gray-50 p-2 rounded text-xs text-blue-800 font-medium mb-1",children:[" : ",x]}),t.jsx("input",{type:"text",className:"w-full p-2 border border-gray-300 rounded text-sm outline-none focus:ring-1 focus:ring-blue-500",value:e.collateralLoanMemo||"",onChange:u=>r("collateralLoanMemo",u.target.value),placeholder:"    "})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx(Z,{label:" ",value:e.creditCardUse,onChange:u=>r("creditCardUse",u),options:["",""]}),e.creditCardUse===""&&t.jsx($,{label:" ()",type:"number",value:e.creditCardAmount,onChange:u=>r("creditCardAmount",u),isCurrency:!0,updateOnBlur:!0})]}),t.jsx($,{label:" ()",type:"number",value:e.loanMonthlyPay,onChange:u=>r("loanMonthlyPay",u),isCurrency:!0,updateOnBlur:!0})]})},Al=({c:e,onUpdate:r})=>{const[n,s]=l.useState(e.historyMemo||"");l.useEffect(()=>{s(e.historyMemo||"")},[e.historyMemo]);const a=()=>{n!==e.historyMemo&&r("historyMemo",n)};return t.jsxs("div",{className:"mt-4",children:[t.jsx("h3",{className:"font-bold text-gray-700 border-b pb-2 mb-4",children:" /  "}),t.jsx("div",{className:"flex gap-2 mb-2 flex-wrap",children:en.map(o=>t.jsx("button",{type:"button",onClick:()=>r("historyType",o),className:"px-3 py-1.5 text-xs rounded border "+(e.historyType===o?"bg-blue-600 text-white border-blue-600":"bg-white text-gray-600 border-gray-300 hover:bg-gray-50"),children:o},o))}),e.historyType&&e.historyType!==""&&t.jsx("textarea",{className:"w-full p-2 border border-gray-300 rounded text-sm h-24",value:n,onChange:o=>s(o.target.value),onBlur:a,placeholder:"   ."})]})},Dl=({c:e,partners:r,inboundPaths:n,onUpdate:s,onIncomeChange:a,onJobTypeChange:o,reminders:c,memos:i,onUpdateReminders:m,onUpdateMemos:d,aiSummaryText:f,setAiSummaryText:x,aiSummaryEditMode:p,setAiSummaryEditMode:u,handleUpdateAiSummaryText:N,handleDeleteAiSummary:g,handleSaveSummaryToMemo:S,currentAudioFile:v,audioUrl:C,isFileUploading:j,isAiLoading:w,onAudioFileSelect:E,onTriggerAudioInput:D,onGenerateAiSummary:A,onPlayRecording:L,onDeleteRecording:F,statusLogs:_,showToast:M})=>t.jsxs("div",{className:"space-y-8",children:[t.jsx(Nl,{reminders:c,memos:i,onUpdateReminders:m,onUpdateMemos:d,showToast:M}),t.jsx(Cl,{c:e,aiSummaryText:f,setAiSummaryText:x,aiSummaryEditMode:p,setAiSummaryEditMode:u,handleUpdateAiSummaryText:N,handleDeleteAiSummary:g,handleSaveSummaryToMemo:S,currentAudioFile:v,audioUrl:C,isFileUploading:j,isAiLoading:w,onAudioFileSelect:E,onTriggerAudioInput:D,onGenerateAiSummary:A,onPlayRecording:L,onDeleteRecording:F}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[t.jsx(Sl,{c:e,partners:r,inboundPaths:n,onUpdate:s,statusLogs:_}),t.jsx(El,{c:e,onUpdate:s,onIncomeChange:a,onJobTypeChange:o})]}),t.jsx("hr",{className:"border-gray-100"}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[t.jsx(kl,{c:e,onUpdate:s}),t.jsx(Rl,{c:e,onUpdate:s,showToast:M})]}),t.jsx(Al,{c:e,onUpdate:s})]}),Il=({c:e,currentPartner:r,aiSummaryText:n,setAiSummaryText:s,aiSummaryEditMode:a,setAiSummaryEditMode:o,handleUpdateAiSummaryText:c,handleSaveSummaryToMemo:i,showToast:m})=>{const[d,f]=l.useState(""),[x,p]=l.useState(!1);return t.jsxs("div",{className:"grid md:grid-cols-2 gap-4 h-full min-h-[400px] md:min-h-[500px]",children:[t.jsxs("div",{className:"bg-white p-4 rounded-xl border border-gray-200 shadow-sm flex flex-col h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("h3",{className:"font-bold text-gray-700 flex items-center gap-2",children:[t.jsx(ot,{size:18}),"  "]}),t.jsx("div",{className:"flex gap-2",children:x?t.jsx(t.Fragment,{children:t.jsx("button",{onClick:()=>p(!1),className:"text-xs bg-gray-200 text-gray-700 px-3 py-1.5 rounded hover:bg-gray-300",children:""})}):t.jsxs("button",{onClick:()=>{f(He(e,r==null?void 0:r.summaryTemplate)),p(!0)},className:"text-xs bg-gray-100 text-gray-600 px-3 py-1.5 rounded hover:bg-gray-200 flex items-center gap-1",children:[t.jsx(Te,{size:12})," "]})})]}),t.jsx("div",{className:"flex-1 relative h-full",children:x?t.jsx("textarea",{className:"w-full h-full p-4 border rounded-lg text-sm leading-relaxed resize-none focus:ring-2 focus:ring-blue-500 outline-none min-h-[200px] md:min-h-[250px] max-h-[400px] md:max-h-[500px] overflow-y-auto",value:d,onChange:u=>f(u.target.value)}):t.jsx("div",{className:"w-full h-full p-4 bg-gray-50 rounded-lg text-sm whitespace-pre-wrap leading-relaxed border border-gray-100 overflow-y-auto min-h-[200px] md:min-h-[250px] max-h-[400px] md:max-h-[500px]",children:He(e,r==null?void 0:r.summaryTemplate)})}),t.jsx("div",{className:"mt-4 flex justify-center",children:t.jsxs("button",{onClick:()=>{const u=x?d:He(e,r==null?void 0:r.summaryTemplate);navigator.clipboard.writeText(u),m(".")},className:"bg-gray-800 text-white px-6 py-3 rounded-lg font-bold flex items-center hover:bg-gray-900 w-full justify-center",children:[t.jsx(yt,{className:"mr-2",size:16}),"  "]})})]}),t.jsxs("div",{className:"bg-purple-50 p-4 rounded-xl border border-purple-100 shadow-sm flex flex-col h-full",children:[t.jsxs("div",{className:"flex justify-between items-center mb-3",children:[t.jsxs("h3",{className:"font-bold text-purple-800 flex items-center gap-2",children:[t.jsx(Qe,{size:18})," AI "]}),t.jsx("div",{className:"flex gap-2",children:a?t.jsxs(t.Fragment,{children:[t.jsx("button",{onClick:c,className:"text-xs bg-green-600 text-white px-3 py-1.5 rounded hover:bg-green-700 font-bold",children:""}),t.jsx("button",{onClick:()=>o(!1),className:"text-xs bg-gray-200 text-gray-700 px-3 py-1.5 rounded hover:bg-gray-300",children:""})]}):t.jsxs("button",{onClick:()=>{s(bt(n||"",e)),o(!0)},className:"text-xs bg-purple-100 text-purple-700 px-3 py-1.5 rounded hover:bg-purple-200 flex items-center gap-1",children:[t.jsx(Te,{size:12})," "]})})]}),t.jsx("div",{className:"flex-1 relative h-full",children:n?a?t.jsx("textarea",{className:"w-full h-full p-4 border border-purple-200 rounded-lg text-sm leading-relaxed resize-none focus:ring-2 focus:ring-purple-500 outline-none min-h-[200px] md:min-h-[250px] max-h-[400px] md:max-h-[500px] overflow-y-auto",value:n,onChange:u=>s(u.target.value)}):t.jsx("div",{className:"w-full h-full p-4 bg-white rounded-lg text-sm whitespace-pre-wrap leading-relaxed border border-purple-100 overflow-y-auto cursor-text hover:bg-purple-50/50 transition-colors min-h-[200px] md:min-h-[250px] max-h-[400px] md:max-h-[500px]",onClick:()=>{s(bt(n,e)),o(!0)},children:n}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-400 gap-4 min-h-[200px]",children:[t.jsx(Qe,{size:48,className:"opacity-20"}),t.jsxs("p",{className:"text-center text-sm",children:["AI   .",t.jsx("br",{}),"' '    ",t.jsx("br",{}),"AI  ."]}),t.jsx("p",{className:"text-center text-xs text-purple-500",children:"     ."})]})}),n&&t.jsxs("div",{className:"mt-4 flex flex-col gap-2",children:[t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsxs("button",{onClick:()=>{navigator.clipboard.writeText(n),m(".")},className:"bg-gray-700 text-white px-4 py-3 rounded-lg font-bold flex items-center justify-center hover:bg-gray-800 shadow-sm transition-all active:scale-95 text-xs md:text-sm",children:[t.jsx(yt,{className:"mr-2",size:16}),"  "]}),t.jsxs("button",{onClick:i,className:"bg-indigo-600 text-white px-4 py-3 rounded-lg font-bold flex items-center justify-center hover:bg-indigo-700 w-full shadow-sm transition-all active:scale-95 text-xs md:text-sm",children:[t.jsx(Vt,{className:"mr-2",size:16}),"  "]})]}),t.jsx("p",{className:"text-[10px] text-center text-purple-400",children:"*   ''    ."})]})]})]})},Ml=({c:e,commission:r,onUpdate:n})=>{var m,d,f,x;const[s,a]=l.useState(null),[o,c]=l.useState(!0);l.useEffect(()=>{(async()=>{c(!0);const u=await rn(e.caseId);a(u),c(!1)})()},[e.caseId]);const i=p=>({draft:"bg-gray-100 text-gray-600",confirmed:"bg-blue-100 text-blue-700",invoiced:"bg-yellow-100 text-yellow-700",collected:"bg-green-100 text-green-700",paid:"bg-purple-100 text-purple-700",completed:"bg-emerald-100 text-emerald-700"})[p]||"bg-gray-100 text-gray-600";return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-blue-50 p-4 md:p-6 rounded-xl border border-blue-100",children:[t.jsxs("h3",{className:"font-bold text-blue-800 mb-3 text-lg flex items-center",children:[t.jsx(Sn,{className:"mr-2",size:20}),"   "]}),o?t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500",children:[t.jsx(jt,{size:14,className:"animate-spin"})," ..."]}):s?t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[t.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg border border-blue-200 shadow-sm",children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:""}),t.jsx("span",{className:"font-bold text-blue-800",children:s.weekLabel})]}),t.jsxs("div",{className:"bg-white px-4 py-2 rounded-lg border border-blue-200 shadow-sm",children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:""}),t.jsxs("span",{className:"font-medium text-gray-700 text-sm",children:[s.startDate," ~ ",s.endDate]})]}),t.jsxs("div",{className:`px-4 py-2 rounded-lg ${i(s.status)}`,children:[t.jsx("span",{className:"text-xs block",children:""}),t.jsx("span",{className:"font-bold",children:tn(s.status)})]})]}),((m=s.invoiceInfo)==null?void 0:m.approvalNumber)&&t.jsxs("div",{className:"flex items-center gap-2 bg-white p-3 rounded-lg border border-green-200",children:[t.jsx(ot,{className:"text-green-600",size:18}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:""}),t.jsxs("span",{className:"font-medium text-green-700",children:[" (",s.invoiceInfo.issueDate,")"]}),t.jsxs("span",{className:"text-xs text-gray-500 ml-2",children:[": ",s.invoiceInfo.approvalNumber]})]})]}),((d=s.collectionInfo)==null?void 0:d.collectedAt)&&t.jsxs("div",{className:"flex items-center gap-2 bg-white p-3 rounded-lg border border-green-200",children:[t.jsx(Ht,{className:"text-green-600",size:18}),t.jsxs("div",{children:[t.jsx("span",{className:"text-xs text-gray-500 block",children:""}),t.jsxs("span",{className:"font-medium text-green-700",children:[" (",s.collectionInfo.collectedAt,")"]}),t.jsxs("span",{className:"font-bold text-green-800 ml-2",children:[(f=s.collectionInfo.amount)==null?void 0:f.toLocaleString(),""]})]})]})]}):t.jsxs("div",{className:"flex items-center gap-2 text-gray-500",children:[t.jsx(jt,{size:16}),t.jsx("span",{className:"text-sm",children:"    ."}),e.contractAt&&t.jsxs("span",{className:"text-xs text-gray-400 ml-2",children:["(: ",e.contractAt,"     )"]})]})]}),t.jsxs("div",{className:"bg-green-50 p-6 rounded-xl border border-green-100",children:[t.jsx("h3",{className:"font-bold text-green-800 mb-4 text-lg",children:"  "}),t.jsxs("div",{className:"grid md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-green-900 mb-1",children:" ()"}),t.jsx("input",{type:"date",className:"w-full p-2 border border-green-300 rounded",value:e.contractAt||"",onChange:p=>n("contractAt",p.target.value)})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-bold text-green-900 mb-1 flex items-center justify-between",children:[" ",t.jsxs("label",{className:"flex items-center gap-1 cursor-pointer text-blue-600 bg-white px-2 py-0.5 rounded border border-blue-100",children:[t.jsx("input",{type:"checkbox",className:"form-checkbox h-3 w-3",checked:e.useCapital||!1,onChange:p=>n("useCapital",p.target.checked)}),t.jsx("span",{className:"text-xs",children:" "})]})]}),t.jsxs("select",{className:"w-full p-2 border border-green-300 rounded bg-white",value:e.installmentMonths||"",onChange:p=>n("installmentMonths",p.target.value),children:[t.jsx("option",{value:"",children:""}),!e.useCapital&&t.jsx("option",{value:"",children:""}),Array.from({length:8},(p,u)=>u+1).map(p=>e.useCapital||p>=2?t.jsxs("option",{value:`${p} `,children:[p,""]},p):null)]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-bold text-green-900 mb-1",children:"  ()"}),t.jsx($,{type:"number",value:e.contractFee||0,onChange:p=>n("contractFee",Number(p)),updateOnBlur:!0,className:"text-lg font-bold",placeholder:"0"}),t.jsxs("div",{className:"mt-4 pt-4 border-t border-green-200 flex justify-between items-center",children:[t.jsx("span",{className:"text-sm text-green-700 font-medium",children:"  (Commission):"}),t.jsxs("span",{className:"text-xl font-bold text-green-900",children:[r.toLocaleString(),""]})]})]})]})]}),t.jsxs("div",{className:"bg-gray-50 p-6 rounded-xl border border-gray-200",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"font-bold text-gray-700 text-lg",children:" "}),t.jsxs("button",{onClick:()=>{const u=[...e.depositHistory&&e.depositHistory.length>0?e.depositHistory:[{date:e.deposit1Date||"",amount:e.deposit1Amount||0},{date:e.deposit2Date||"",amount:e.deposit2Amount||0}],{date:"",amount:0}];n("depositHistory",u)},className:"flex items-center gap-1 bg-blue-600 text-white px-3 py-1.5 rounded-lg text-sm font-bold hover:bg-blue-700 shadow-sm",children:[t.jsx(et,{size:16}),"  (",(((x=e.depositHistory)==null?void 0:x.length)||2)+1,")"]})]}),t.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:(e.depositHistory&&e.depositHistory.length>0?e.depositHistory:[{date:e.deposit1Date||"",amount:e.deposit1Amount||0},{date:e.deposit2Date||"",amount:e.deposit2Amount||0}]).map((p,u)=>t.jsxs("div",{className:"bg-white p-4 rounded border border-gray-200 shadow-sm relative group",children:[t.jsxs("div",{className:"flex justify-between items-center mb-2",children:[t.jsxs("h4",{className:"font-bold text-gray-600 text-sm",children:[u+1," "]}),u>=2&&t.jsx("button",{onClick:()=>{const g=(e.depositHistory||[]).filter((S,v)=>v!==u);n("depositHistory",g)},className:"text-gray-400 hover:text-red-500",children:t.jsx(lt,{size:16})})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:" ()"}),t.jsx("input",{type:"number",className:"w-full p-2 border border-gray-300 rounded text-sm font-bold",value:p.amount||"",onChange:N=>{const g=e.depositHistory&&e.depositHistory.length>0?[...e.depositHistory]:[{date:e.deposit1Date||"",amount:e.deposit1Amount||0},{date:e.deposit2Date||"",amount:e.deposit2Amount||0}];g[u].amount=Number(N.target.value),n("depositHistory",g)}})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-xs text-gray-500 mb-1",children:""}),t.jsx("input",{type:"date",className:"w-full p-2 border border-gray-300 rounded text-sm",value:p.date||"",onChange:N=>{const g=e.depositHistory&&e.depositHistory.length>0?[...e.depositHistory]:[{date:e.deposit1Date||"",amount:e.deposit1Amount||0},{date:e.deposit2Date||"",amount:e.deposit2Amount||0}];g[u].date=N.target.value,n("depositHistory",g)}})]})]})]},u))}),t.jsxs("div",{className:"mt-6 pt-4 border-t border-gray-200 flex justify-between items-center",children:[t.jsx("span",{className:"font-bold text-gray-700",children:"  "}),t.jsxs("span",{className:"text-2xl font-bold text-blue-600",children:[(()=>{const p=new Date().toISOString().split("T")[0];return(e.depositHistory&&e.depositHistory.length>0?e.depositHistory:[{date:e.deposit1Date||"",amount:e.deposit1Amount||0},{date:e.deposit2Date||"",amount:e.deposit2Amount||0}]).filter(N=>N.date&&N.date<=p).reduce((N,g)=>N+(g.amount||0),0)})().toLocaleString()," "]})]})]})]})};function Yl(){const{caseId:e}=nn(),r=e,n=Bt(),{data:s,isLoading:a,error:o}=sn(r),{data:c=[]}=an(),{data:i=[]}=ln(),{data:m=[]}=on(),{data:d=[]}=cn(),f=dn(),[x,p]=l.useState("info"),[u,N]=l.useState(null),[g,S]=l.useState(!1),[v,C]=l.useState(!1),[j,w]=l.useState(null),[E,D]=l.useState(""),[A,L]=l.useState([]),[F,_]=l.useState(!1),[M,W]=l.useState(null),[oe,Y]=l.useState(""),[z,q]=l.useState(null),[ee,J]=l.useState(!1),[me,ie]=l.useState(!1),[X,b]=l.useState(null),[R,h]=l.useState(null),[y,I]=l.useState(!1);l.useEffect(()=>{s&&(q(s.aiSummary||null),s.status===" "?L(d.length>0?d:[]):L([]))},[s,d]);const P=c.find(k=>k.partnerId===(s==null?void 0:s.partnerId)),V=s?pn(s.contractFee||0,(P==null?void 0:P.commissionRules)||[]):0,O=(k,T="success")=>{N({msg:k,type:T}),setTimeout(()=>N(null),3e3)};l.useEffect(()=>{const k=T=>{(T.metaKey||T.ctrlKey)&&T.key==="k"&&(T.preventDefault(),S(!0))};return window.addEventListener("keydown",k),()=>window.removeEventListener("keydown",k)},[]);const B=(k,T)=>{s&&f.mutate({id:s.caseId,updates:{[k]:T},silent:!0})},kr=(k,T)=>{if(!s)return;const G={...s.incomeDetails,[k]:T};B("incomeDetails",G)},Rr=k=>{if(!s)return;let T=s.jobTypes?[...s.jobTypes]:[];T.includes(k)?T=T.filter(G=>G!==k):T.push(k),B("jobTypes",T)},Ar=k=>{B("reminders",k)},mt=k=>{B("specialMemo",k)},Dr=k=>{k!==(s==null?void 0:s.status)&&(W(k),Y(""),_(!0))},Ir=()=>{if(!s||!M)return;L(M===" "?d:[]);const k={logId:Date.now().toString(),fromStatus:s.status,toStatus:M,changedAt:new Date().toISOString(),changedBy:"User",memo:oe};f.mutate({id:s.caseId,updates:{status:M,statusLogs:[k,...s.statusLogs||[]],...M!==" "?{secondaryStatus:void 0}:{}}}),O(` ${M}() .`),_(!1),W(null)},Mr=k=>{k!==(s==null?void 0:s.secondaryStatus)&&(w(k),D(""),C(!0))},Pr=()=>{if(!s||!j)return;const k={logId:Date.now().toString(),fromStatus:`${s.status} (${s.secondaryStatus||""})`,toStatus:`${s.status} (${j})`,changedAt:new Date().toISOString(),changedBy:"User",memo:E},T=`[2  ] ${s.secondaryStatus||""}  ${j}${E?`
: ${E}`:""}`,G={id:Date.now().toString(),createdAt:new Date().toISOString(),content:T};f.mutate({id:s.caseId,updates:{secondaryStatus:j,statusLogs:[k,...s.statusLogs||[]],specialMemo:[G,...s.specialMemo||[]]}}),C(!1),w(null),O("2  .")},Tr=async k=>{if(k.target.files&&k.target.files[0]){const T=k.target.files[0];b(T),h(URL.createObjectURL(T)),I(!0);try{await new Promise(pt=>setTimeout(pt,1500));const G={id:Date.now().toString(),filename:T.name,url:URL.createObjectURL(T),uploadDate:new Date().toISOString(),mimeType:T.type||"audio/mp3",duration:0};B("recordings",[G,...(s==null?void 0:s.recordings)||[]]),O("  .")}catch{O("  ","error")}finally{I(!1)}}},Or=async()=>{if(!X&&!R){O("   .","error");return}ie(!0);try{const k=P==null?void 0:P.aiPromptTemplate,T={customerName:(s==null?void 0:s.customerName)||"",phone:(s==null?void 0:s.phone)||"",managerName:localStorage.getItem("managerName")||"Mark"},G=await hn(X||new File([],"mock.mp3"),k,T);q(G),J(!0),B("aiSummary",G),O("AI  .")}catch(k){console.error(k),O("AI     .","error")}finally{ie(!1)}},ft=()=>{z&&(B("aiSummary",z),J(!1),O("AI  ."))},Lr=()=>{window.confirm("AI  ?")&&(q(null),B("aiSummary",null),O("."))},xt=()=>{if(!z)return;let k="";z.match(/(?:^|\n)(?:[\*\-0-9\.\s]*)[:\s]*([\s\S]*?)(?=\n[0-9]+\.|^$|$)/i);const T=z.match(/(?:^|\n)(?:[\*\-0-9\.\s]*)[:\s]*([\s\S]*)$/i);T&&T[1]?k=`${T[1].trim().slice(0,1e3)}`:k=`[AI  ]
${z.slice(0,1e3)}`;const G={id:Date.now().toString(),createdAt:new Date().toISOString(),content:k};mt([G,...(s==null?void 0:s.specialMemo)||[]]),O("   .")},$r=k=>{h(k.url),b(null)},_r=k=>{window.confirm("  ?")&&B("recordings",((s==null?void 0:s.recordings)||[]).filter(T=>T.id!==k))};return a?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"  ..."}):a?t.jsx("div",{className:"p-8 text-center text-gray-500",children:"  ..."}):o||!s?t.jsxs("div",{className:"p-8 text-center text-red-500 flex flex-col items-center gap-4",children:[t.jsx("p",{className:"text-xl font-bold",children:"    ."}),t.jsxs("p",{className:"text-sm text-gray-500",children:["ID: ",r]}),t.jsxs("div",{className:"text-xs bg-gray-100 p-2 rounded max-w-md break-all",children:["     .",t.jsx("br",{}),"   , (F5) ."]}),t.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700",children:" "})]}):t.jsxs("div",{className:"min-h-screen bg-gray-50 pb-20",children:[t.jsxs("div",{className:"bg-white border-b border-gray-200 px-4 py-3 flex justify-between items-center sticky top-0 z-20 shadow-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("button",{onClick:()=>n(-1),className:"p-2 hover:bg-gray-100 rounded-full text-gray-600 transition-colors",children:t.jsx(An,{size:20})}),t.jsx("span",{className:"font-bold text-gray-700 text-lg",children:" "})]}),t.jsx("div",{className:"flex gap-2",children:t.jsx("button",{onClick:()=>S(!0),className:"p-2 hover:bg-gray-100 rounded-full text-gray-500 transition-colors",title:"  (Cmd+K)",children:t.jsx(Ln,{size:20})})})]}),t.jsxs("div",{className:"max-w-5xl mx-auto p-4 md:p-6 space-y-6",children:[t.jsx(jl,{c:s,partner:P,statuses:m,secondaryStatuses:A,onStatusChangeStart:Dr,onSecondaryStatusChangeStart:Mr}),F&&M!==null&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-[400px] shadow-xl border-t-4 border-blue-500",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-blue-700",children:"  "}),t.jsxs("p",{className:"mb-4 text-gray-700",children:[" ",t.jsx("span",{className:"font-bold text-blue-600",children:s.status})," ",t.jsx("span",{className:"font-bold text-blue-600",children:M}),"() ?"]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  ()"}),t.jsx("textarea",{className:"w-full p-2 border border-blue-200 rounded resize-none h-24 focus:ring-2 focus:ring-blue-500 outline-none",placeholder:"   ... (: ,   )",value:oe,onChange:k=>Y(k.target.value)})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>{_(!1),W(null)},className:"px-4 py-2 bg-gray-200 rounded text-gray-800 font-medium hover:bg-gray-300",children:""}),t.jsx("button",{onClick:Ir,className:"px-4 py-2 bg-blue-600 rounded text-white font-medium hover:bg-blue-700",children:""})]})]})}),v&&j!==null&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-[400px] shadow-xl border-t-4 border-purple-500",children:[t.jsx("h3",{className:"text-lg font-bold mb-4 text-purple-700",children:"2   "}),t.jsxs("p",{className:"mb-4 text-gray-700",children:["2  ",t.jsx("span",{className:"font-bold text-purple-600",children:s.secondaryStatus||""})," ",t.jsx("span",{className:"font-bold text-purple-600",children:j||""}),"() ?"]}),t.jsxs("div",{className:"mb-4",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"  / "}),t.jsx("textarea",{className:"w-full p-2 border border-purple-200 rounded resize-none h-24 focus:ring-2 focus:ring-purple-500 outline-none",placeholder:"   ...",value:E,onChange:k=>D(k.target.value)})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{onClick:()=>{C(!1),w(null)},className:"px-4 py-2 bg-gray-200 rounded text-gray-800 font-medium hover:bg-gray-300",children:""}),t.jsx("button",{onClick:Pr,className:"px-4 py-2 bg-purple-600 rounded text-white font-medium hover:bg-purple-700",children:""})]})]})}),t.jsx("div",{className:"flex border-b border-gray-200 bg-white px-4 rounded-t-lg overflow-x-auto no-scrollbar",children:[{id:"info",label:" "},{id:"summary",label:""},{id:"settlement",label:"/"}].map(k=>t.jsx("button",{onClick:()=>p(k.id),className:"px-4 py-3 text-sm font-medium border-b-2 whitespace-nowrap "+(x===k.id?"border-blue-600 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"),children:k.label},k.id))}),t.jsxs("div",{className:"bg-white p-6 rounded-b-xl shadow-sm border border-gray-100 border-t-0 min-h-[600px]",children:[x==="info"&&t.jsx(Dl,{c:s,partners:c,inboundPaths:i,onUpdate:B,onIncomeChange:kr,onJobTypeChange:Rr,reminders:s.reminders||[],memos:s.specialMemo||[],onUpdateReminders:Ar,onUpdateMemos:mt,aiSummaryText:z,setAiSummaryText:q,aiSummaryEditMode:ee,setAiSummaryEditMode:J,handleUpdateAiSummaryText:ft,handleDeleteAiSummary:Lr,handleSaveSummaryToMemo:xt,currentAudioFile:X,audioUrl:R,isFileUploading:y,isAiLoading:me,onAudioFileSelect:Tr,onTriggerAudioInput:()=>{},onGenerateAiSummary:Or,onPlayRecording:$r,onDeleteRecording:_r,statusLogs:s.statusLogs||[],showToast:O}),x==="summary"&&t.jsx(Il,{c:s,currentPartner:P,aiSummaryText:z,setAiSummaryText:q,aiSummaryEditMode:ee,setAiSummaryEditMode:J,handleUpdateAiSummaryText:ft,handleSaveSummaryToMemo:xt,showToast:O}),x==="settlement"&&t.jsx(Ml,{c:s,commission:V,onUpdate:B})]})]}),u&&t.jsx("div",{className:`fixed bottom-24 left-1/2 transform -translate-x-1/2 px-6 py-3 rounded-full shadow-lg text-white text-sm font-bold z-50 animate-fade-in-up ${u.type==="error"?"bg-red-500":"bg-gray-900"}`,children:u.msg}),t.jsx(vl,{isOpen:g,onClose:()=>S(!1)})]})}export{Yl as default};
