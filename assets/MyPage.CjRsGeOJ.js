import{c as o,h as V,ap as q,r,j as e,a0 as w,aq as D,al as U,a7 as K}from"./index.CVYY_nI7.js";import{M as Q}from"./mail.BzvfafZU.js";import{P as W}from"./phone.C4Q6Wm26.js";import{P as X,T as Y}from"./trash-2.CNCYA5rL.js";/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Z=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],ee=o("globe",Z);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const se=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],te=o("lock",se);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ae=[["path",{d:"m16 17 5-5-5-5",key:"1bji2h"}],["path",{d:"M21 12H9",key:"dn1m92"}],["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}]],v=o("log-out",ae);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const le=[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]],re=o("monitor",le);/**
 * @license lucide-react v0.562.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ne=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],k=o("shield-check",ne),A="9981mark@gmail.com";function me(){var j;const{showToast:l}=V(),{logout:z,user:s,allowedEmails:d,addAllowedEmail:S,removeAllowedEmail:E}=q(),[x,g]=r.useState(""),[i,h]=r.useState(""),[T,u]=r.useState("Loading..."),[C,M]=r.useState(""),[B,_]=r.useState(!1),[p,b]=r.useState("CARD"),[c,f]=r.useState(!0),[P,I]=r.useState([]),m=(s==null?void 0:s.email)===A;r.useEffect(()=>{var a,y;const t=localStorage.getItem("managerName");if(g(t||(s==null?void 0:s.name)||""),M(navigator.userAgent),(s==null?void 0:s.email)===A&&fetch("https://api.ipify.org?format=json").then(n=>n.json()).then(n=>u(n.ip)).catch(()=>u("확인 불가")),(y=(a=window.AndroidBridge)==null?void 0:a.isAndroidApp)!=null&&y.call(a)){_(!0);try{const n=window.AndroidBridge.getAvailableTemplates(),J=JSON.parse(n);I(J);const R=window.AndroidBridge.getPopupSettings(),N=JSON.parse(R);b(N.template),f(N.floatingButtonEnabled)}catch(n){console.error("Failed to load Android settings",n)}}},[s]);const $=async()=>{await K({managerName:x}),l("표시 이름이 변경되었습니다.")},O=()=>{z(),l("로그아웃 되었습니다.")},H=()=>{if(i.trim()){if(!i.includes("@")){l("올바른 이메일 형식이 아닙니다.","error");return}if(d.includes(i)){l("이미 등록된 이메일입니다.","error");return}S(i.trim()),h(""),l("허용 이메일이 추가되었습니다.")}},L=t=>{if(d.length<=1){l("최소 한 개의 관리자 계정은 필요합니다.","error");return}window.confirm(`'${t}' 계정의 접근 권한을 삭제하시겠습니까?`)&&window.confirm("⚠️ [최종 경고] 정말로 삭제하시겠습니까? 이 계정은 더 이상 로그인할 수 없습니다.")&&(E(t),l("권한이 삭제되었습니다."))},G=t=>{var a;b(t),(a=window.AndroidBridge)==null||a.setPopupTemplate(t),l("팝업 템플릿이 변경되었습니다.")},F=()=>{var a;const t=!c;f(t),(a=window.AndroidBridge)==null||a.setFloatingButtonEnabled(t),l(t?"플로팅 버튼이 활성화되었습니다.":"플로팅 버튼이 비활성화되었습니다.")};return e.jsxs("div",{className:"max-w-2xl mx-auto space-y-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-800",children:"마이페이지"}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-6 flex items-center",children:[e.jsx(w,{className:"mr-2",size:20})," 내 정보 (Google 계정 연동)"]}),e.jsxs("div",{className:"flex items-center gap-4 mb-8 bg-blue-50 p-4 rounded-lg",children:[s!=null&&s.picture?e.jsx("img",{src:s.picture,alt:"Profile",className:"w-16 h-16 rounded-full border-2 border-white shadow-sm"}):e.jsx("div",{className:"w-16 h-16 rounded-full bg-blue-200 flex items-center justify-center text-blue-600 font-bold text-xl",children:(j=s==null?void 0:s.name)==null?void 0:j.charAt(0)}),e.jsxs("div",{children:[e.jsx("p",{className:"text-lg font-bold text-gray-800",children:s==null?void 0:s.name}),e.jsx("p",{className:"text-sm text-gray-500",children:s==null?void 0:s.email}),e.jsxs("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mt-1",children:[e.jsx(k,{size:12,className:"mr-1"})," 인증됨"]}),m&&e.jsxs("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800 mt-1",children:[e.jsx(te,{size:12,className:"mr-1"})," HOST"]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"CRM 표시 이름 (변경 가능)"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx("input",{type:"text",className:"w-full p-2.5 pl-10 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none",value:x,onChange:t=>g(t.target.value)}),e.jsx(w,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]}),e.jsx("button",{onClick:$,className:"bg-gray-800 text-white px-4 py-2 rounded-lg text-sm font-medium hover:bg-gray-900",children:"저장"})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"이 이름은 상담 내역 및 정산 리포트에 표시됩니다."})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-600 mb-1",children:"로그인 이메일"}),e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"email",className:"w-full p-2.5 pl-10 border border-gray-300 rounded-lg bg-gray-100 text-gray-500 cursor-not-allowed",value:(s==null?void 0:s.email)||"",readOnly:!0}),e.jsx(Q,{className:"absolute left-3 top-2.5 text-gray-400",size:18})]}),e.jsx("p",{className:"text-xs text-gray-400 mt-1",children:"이메일은 Google 계정에서만 변경할 수 있습니다."})]})]})]}),B&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-blue-100 ring-1 ring-blue-50",children:[e.jsxs("h3",{className:"text-lg font-bold text-blue-800 mb-4 flex items-center",children:[e.jsx(W,{className:"mr-2",size:20})," 전화 팝업 설정"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"수신 전화 시 표시될 팝업 디자인을 선택하세요."}),e.jsx("div",{className:"space-y-2 mb-6",children:P.map(t=>e.jsx("button",{onClick:()=>G(t.name),className:`w-full p-3 rounded-lg border text-left transition-all ${p===t.name?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}`,children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:t.displayName}),p===t.name&&e.jsx("span",{className:"text-blue-600 text-sm",children:"✓ 선택됨"})]})},t.name))}),e.jsxs("div",{className:"border-t pt-4",children:[e.jsxs("h4",{className:"font-medium text-gray-700 mb-3 flex items-center",children:[e.jsx(D,{className:"mr-2",size:16})," 통화 중 플로팅 버튼"]}),e.jsxs("button",{onClick:F,className:"flex items-center justify-between w-full p-3 bg-gray-50 rounded-lg",children:[e.jsx("span",{className:"text-sm text-gray-600",children:"전화를 받은 후 미니 버튼 표시"}),e.jsx("div",{className:`w-12 h-6 rounded-full transition-colors ${c?"bg-blue-500":"bg-gray-300"}`,children:e.jsx("div",{className:`w-5 h-5 rounded-full bg-white shadow-sm transform transition-transform ${c?"translate-x-6":"translate-x-0.5"} mt-0.5`})})]})]})]}),m&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-purple-100 ring-1 ring-purple-50",children:[e.jsxs("h3",{className:"text-lg font-bold text-purple-800 mb-4 flex items-center",children:[e.jsx(k,{className:"mr-2",size:20})," 보안 대시보드 (HOST 전용)"]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(ee,{className:"mr-3 text-gray-400",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"현재 IP 주소"}),e.jsx("p",{className:"text-sm font-mono font-bold",children:T})]})]})}),e.jsx("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:e.jsxs("div",{className:"flex items-center text-gray-700",children:[e.jsx(re,{className:"mr-3 text-gray-400",size:20}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs text-gray-400",children:"접속 기기 정보"}),e.jsx("p",{className:"text-xs font-mono break-all",children:C})]})]})})]})]}),m&&e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-4 flex items-center",children:[e.jsx(U,{className:"mr-2",size:20})," 관리자 계정 관리"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"로그인이 허용된 Google 계정을 관리합니다."}),e.jsxs("div",{className:"flex gap-2 mb-4",children:[e.jsx("input",{type:"email",placeholder:"추가할 이메일 (예: admin@example.com)",className:"flex-1 p-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 outline-none text-sm",value:i,onChange:t=>h(t.target.value)}),e.jsx("button",{onClick:H,className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700",children:e.jsx(X,{size:20})})]}),e.jsx("div",{className:"space-y-2",children:d.map(t=>e.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg border border-gray-100",children:[e.jsx("span",{className:"text-sm font-medium text-gray-700",children:t}),d.length>1&&e.jsx("button",{onClick:()=>L(t),className:"text-gray-400 hover:text-red-500 p-1",children:e.jsx(Y,{size:16})})]},t))})]}),e.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-sm border border-gray-100",children:[e.jsxs("h3",{className:"text-lg font-bold text-gray-700 mb-4 flex items-center",children:[e.jsx(v,{className:"mr-2",size:20})," 로그아웃"]}),e.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"현재 기기에서 접속을 종료합니다."}),e.jsxs("button",{onClick:O,className:"w-full bg-red-600 text-white px-4 py-3 rounded-lg text-sm font-medium hover:bg-red-700 flex items-center justify-center shadow-sm transition-colors",children:[e.jsx(v,{size:18,className:"mr-2"})," 안전하게 로그아웃"]})]})]})}export{me as default};
